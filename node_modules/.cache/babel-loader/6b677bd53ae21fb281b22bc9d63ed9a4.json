{"ast":null,"code":"import { defineComponent, ref, onMounted, onUpdated, createVNode, mergeProps, isVNode } from \"vue\";\nimport Tooltip from \"../../tooltip/index.js\";\nimport ResizeObserver from \"../resize-observer-v2.js\";\nimport { getPrefixCls } from \"../../_utils/global-config.js\";\n\nfunction _isSlot(s) {\n  return typeof s === \"function\" || Object.prototype.toString.call(s) === \"[object Object]\" && !isVNode(s);\n}\n\nvar AutoTooltip = defineComponent({\n  name: \"AutoTooltip\",\n  inheritAttrs: false,\n  props: {\n    tooltipProps: {\n      type: Object\n    }\n  },\n\n  setup(props, {\n    attrs,\n    slots\n  }) {\n    const prefix = getPrefixCls(\"auto-tooltip\");\n    const containerRef = ref();\n    const contentRef = ref();\n    const text = ref(\"\");\n    const showTooltip = ref(false);\n\n    const calTooltip = () => {\n      if (containerRef.value && contentRef.value) {\n        const _show = contentRef.value.offsetWidth > containerRef.value.offsetWidth;\n\n        if (_show !== showTooltip.value) {\n          showTooltip.value = _show;\n        }\n      }\n    };\n\n    const getText = () => {\n      var _a;\n\n      if (((_a = contentRef.value) == null ? void 0 : _a.textContent) && contentRef.value.textContent !== text.value) {\n        text.value = contentRef.value.textContent;\n      }\n    };\n\n    const onResize = () => {\n      getText();\n      calTooltip();\n    };\n\n    onMounted(() => {\n      getText();\n      calTooltip();\n    });\n    onUpdated(() => {\n      getText();\n    });\n\n    const renderContent = () => {\n      return createVNode(\"span\", mergeProps({\n        \"ref\": containerRef,\n        \"class\": prefix\n      }, attrs), [createVNode(ResizeObserver, {\n        \"onResize\": onResize\n      }, {\n        default: () => {\n          var _a;\n\n          return [createVNode(\"span\", {\n            \"ref\": contentRef,\n            \"class\": `${prefix}-content`\n          }, [(_a = slots.default) == null ? void 0 : _a.call(slots)])];\n        }\n      })]);\n    };\n\n    return () => {\n      let _slot2;\n\n      if (showTooltip.value) {\n        let _slot;\n\n        return createVNode(Tooltip, mergeProps({\n          \"content\": text.value,\n          \"onResize\": onResize\n        }, props.tooltipProps), _isSlot(_slot = renderContent()) ? _slot : {\n          default: () => [_slot]\n        });\n      }\n\n      return createVNode(ResizeObserver, {\n        \"onResize\": onResize\n      }, _isSlot(_slot2 = renderContent()) ? _slot2 : {\n        default: () => [_slot2]\n      });\n    };\n  }\n\n});\nexport { AutoTooltip as default };","map":{"version":3,"names":["defineComponent","ref","onMounted","onUpdated","createVNode","mergeProps","isVNode","Tooltip","ResizeObserver","getPrefixCls","_isSlot","s","Object","prototype","toString","call","AutoTooltip","name","inheritAttrs","props","tooltipProps","type","setup","attrs","slots","prefix","containerRef","contentRef","text","showTooltip","calTooltip","value","_show","offsetWidth","getText","_a","textContent","onResize","renderContent","default","_slot2","_slot"],"sources":["/www/wwwroot/admin/node_modules/@arco-design/web-vue/es/_components/auto-tooltip/auto-tooltip.js"],"sourcesContent":["import { defineComponent, ref, onMounted, onUpdated, createVNode, mergeProps, isVNode } from \"vue\";\nimport Tooltip from \"../../tooltip/index.js\";\nimport ResizeObserver from \"../resize-observer-v2.js\";\nimport { getPrefixCls } from \"../../_utils/global-config.js\";\nfunction _isSlot(s) {\n  return typeof s === \"function\" || Object.prototype.toString.call(s) === \"[object Object]\" && !isVNode(s);\n}\nvar AutoTooltip = defineComponent({\n  name: \"AutoTooltip\",\n  inheritAttrs: false,\n  props: {\n    tooltipProps: {\n      type: Object\n    }\n  },\n  setup(props, {\n    attrs,\n    slots\n  }) {\n    const prefix = getPrefixCls(\"auto-tooltip\");\n    const containerRef = ref();\n    const contentRef = ref();\n    const text = ref(\"\");\n    const showTooltip = ref(false);\n    const calTooltip = () => {\n      if (containerRef.value && contentRef.value) {\n        const _show = contentRef.value.offsetWidth > containerRef.value.offsetWidth;\n        if (_show !== showTooltip.value) {\n          showTooltip.value = _show;\n        }\n      }\n    };\n    const getText = () => {\n      var _a;\n      if (((_a = contentRef.value) == null ? void 0 : _a.textContent) && contentRef.value.textContent !== text.value) {\n        text.value = contentRef.value.textContent;\n      }\n    };\n    const onResize = () => {\n      getText();\n      calTooltip();\n    };\n    onMounted(() => {\n      getText();\n      calTooltip();\n    });\n    onUpdated(() => {\n      getText();\n    });\n    const renderContent = () => {\n      return createVNode(\"span\", mergeProps({\n        \"ref\": containerRef,\n        \"class\": prefix\n      }, attrs), [createVNode(ResizeObserver, {\n        \"onResize\": onResize\n      }, {\n        default: () => {\n          var _a;\n          return [createVNode(\"span\", {\n            \"ref\": contentRef,\n            \"class\": `${prefix}-content`\n          }, [(_a = slots.default) == null ? void 0 : _a.call(slots)])];\n        }\n      })]);\n    };\n    return () => {\n      let _slot2;\n      if (showTooltip.value) {\n        let _slot;\n        return createVNode(Tooltip, mergeProps({\n          \"content\": text.value,\n          \"onResize\": onResize\n        }, props.tooltipProps), _isSlot(_slot = renderContent()) ? _slot : {\n          default: () => [_slot]\n        });\n      }\n      return createVNode(ResizeObserver, {\n        \"onResize\": onResize\n      }, _isSlot(_slot2 = renderContent()) ? _slot2 : {\n        default: () => [_slot2]\n      });\n    };\n  }\n});\nexport { AutoTooltip as default };\n"],"mappings":"AAAA,SAASA,eAAT,EAA0BC,GAA1B,EAA+BC,SAA/B,EAA0CC,SAA1C,EAAqDC,WAArD,EAAkEC,UAAlE,EAA8EC,OAA9E,QAA6F,KAA7F;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAOC,cAAP,MAA2B,0BAA3B;AACA,SAASC,YAAT,QAA6B,+BAA7B;;AACA,SAASC,OAAT,CAAiBC,CAAjB,EAAoB;EAClB,OAAO,OAAOA,CAAP,KAAa,UAAb,IAA2BC,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BJ,CAA/B,MAAsC,iBAAtC,IAA2D,CAACL,OAAO,CAACK,CAAD,CAArG;AACD;;AACD,IAAIK,WAAW,GAAGhB,eAAe,CAAC;EAChCiB,IAAI,EAAE,aAD0B;EAEhCC,YAAY,EAAE,KAFkB;EAGhCC,KAAK,EAAE;IACLC,YAAY,EAAE;MACZC,IAAI,EAAET;IADM;EADT,CAHyB;;EAQhCU,KAAK,CAACH,KAAD,EAAQ;IACXI,KADW;IAEXC;EAFW,CAAR,EAGF;IACD,MAAMC,MAAM,GAAGhB,YAAY,CAAC,cAAD,CAA3B;IACA,MAAMiB,YAAY,GAAGzB,GAAG,EAAxB;IACA,MAAM0B,UAAU,GAAG1B,GAAG,EAAtB;IACA,MAAM2B,IAAI,GAAG3B,GAAG,CAAC,EAAD,CAAhB;IACA,MAAM4B,WAAW,GAAG5B,GAAG,CAAC,KAAD,CAAvB;;IACA,MAAM6B,UAAU,GAAG,MAAM;MACvB,IAAIJ,YAAY,CAACK,KAAb,IAAsBJ,UAAU,CAACI,KAArC,EAA4C;QAC1C,MAAMC,KAAK,GAAGL,UAAU,CAACI,KAAX,CAAiBE,WAAjB,GAA+BP,YAAY,CAACK,KAAb,CAAmBE,WAAhE;;QACA,IAAID,KAAK,KAAKH,WAAW,CAACE,KAA1B,EAAiC;UAC/BF,WAAW,CAACE,KAAZ,GAAoBC,KAApB;QACD;MACF;IACF,CAPD;;IAQA,MAAME,OAAO,GAAG,MAAM;MACpB,IAAIC,EAAJ;;MACA,IAAI,CAAC,CAACA,EAAE,GAAGR,UAAU,CAACI,KAAjB,KAA2B,IAA3B,GAAkC,KAAK,CAAvC,GAA2CI,EAAE,CAACC,WAA/C,KAA+DT,UAAU,CAACI,KAAX,CAAiBK,WAAjB,KAAiCR,IAAI,CAACG,KAAzG,EAAgH;QAC9GH,IAAI,CAACG,KAAL,GAAaJ,UAAU,CAACI,KAAX,CAAiBK,WAA9B;MACD;IACF,CALD;;IAMA,MAAMC,QAAQ,GAAG,MAAM;MACrBH,OAAO;MACPJ,UAAU;IACX,CAHD;;IAIA5B,SAAS,CAAC,MAAM;MACdgC,OAAO;MACPJ,UAAU;IACX,CAHQ,CAAT;IAIA3B,SAAS,CAAC,MAAM;MACd+B,OAAO;IACR,CAFQ,CAAT;;IAGA,MAAMI,aAAa,GAAG,MAAM;MAC1B,OAAOlC,WAAW,CAAC,MAAD,EAASC,UAAU,CAAC;QACpC,OAAOqB,YAD6B;QAEpC,SAASD;MAF2B,CAAD,EAGlCF,KAHkC,CAAnB,EAGP,CAACnB,WAAW,CAACI,cAAD,EAAiB;QACtC,YAAY6B;MAD0B,CAAjB,EAEpB;QACDE,OAAO,EAAE,MAAM;UACb,IAAIJ,EAAJ;;UACA,OAAO,CAAC/B,WAAW,CAAC,MAAD,EAAS;YAC1B,OAAOuB,UADmB;YAE1B,SAAU,GAAEF,MAAO;UAFO,CAAT,EAGhB,CAAC,CAACU,EAAE,GAAGX,KAAK,CAACe,OAAZ,KAAwB,IAAxB,GAA+B,KAAK,CAApC,GAAwCJ,EAAE,CAACpB,IAAH,CAAQS,KAAR,CAAzC,CAHgB,CAAZ,CAAP;QAID;MAPA,CAFoB,CAAZ,CAHO,CAAlB;IAcD,CAfD;;IAgBA,OAAO,MAAM;MACX,IAAIgB,MAAJ;;MACA,IAAIX,WAAW,CAACE,KAAhB,EAAuB;QACrB,IAAIU,KAAJ;;QACA,OAAOrC,WAAW,CAACG,OAAD,EAAUF,UAAU,CAAC;UACrC,WAAWuB,IAAI,CAACG,KADqB;UAErC,YAAYM;QAFyB,CAAD,EAGnClB,KAAK,CAACC,YAH6B,CAApB,EAGMV,OAAO,CAAC+B,KAAK,GAAGH,aAAa,EAAtB,CAAP,GAAmCG,KAAnC,GAA2C;UACjEF,OAAO,EAAE,MAAM,CAACE,KAAD;QADkD,CAHjD,CAAlB;MAMD;;MACD,OAAOrC,WAAW,CAACI,cAAD,EAAiB;QACjC,YAAY6B;MADqB,CAAjB,EAEf3B,OAAO,CAAC8B,MAAM,GAAGF,aAAa,EAAvB,CAAP,GAAoCE,MAApC,GAA6C;QAC9CD,OAAO,EAAE,MAAM,CAACC,MAAD;MAD+B,CAF9B,CAAlB;IAKD,CAhBD;EAiBD;;AA3E+B,CAAD,CAAjC;AA6EA,SAASxB,WAAW,IAAIuB,OAAxB"},"metadata":{},"sourceType":"module"}