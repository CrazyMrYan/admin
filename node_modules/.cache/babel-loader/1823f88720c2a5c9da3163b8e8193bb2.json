{"ast":null,"code":"import { ref, computed, nextTick, watch } from \"vue\";\nimport { Enter } from \"../_utils/keycode.js\";\n\nconst useInput = ({\n  defaultValue,\n  modelValue,\n  emit,\n  eventName = \"input\",\n  updateEventName = \"update:modelValue\",\n  eventHandlers\n}) => {\n  var _a;\n\n  const inputRef = ref();\n\n  const _value = ref((_a = defaultValue == null ? void 0 : defaultValue.value) != null ? _a : \"\");\n\n  const _focused = ref(false);\n\n  const isComposition = ref(false);\n  const compositionValue = ref(\"\");\n  let initialValue;\n  const computedValue = computed(() => {\n    var _a2;\n\n    return (_a2 = modelValue == null ? void 0 : modelValue.value) != null ? _a2 : _value.value;\n  });\n\n  const updateValue = (value, ev) => {\n    _value.value = value;\n    emit(updateEventName, value);\n    emit(eventName, value, ev);\n  };\n\n  const handleInput = ev => {\n    const {\n      value\n    } = ev.target;\n\n    if (!isComposition.value) {\n      updateValue(value, ev);\n      nextTick(() => {\n        if (inputRef.value && computedValue.value !== inputRef.value.value) {\n          inputRef.value.value = computedValue.value;\n        }\n      });\n    }\n  };\n\n  const handleChange = ev => {\n    if (eventName === \"input\" && computedValue.value !== initialValue) {\n      initialValue = computedValue.value;\n      emit(\"change\", computedValue.value, ev);\n    }\n  };\n\n  const handleComposition = ev => {\n    var _a2;\n\n    const {\n      value\n    } = ev.target;\n\n    if (ev.type === \"compositionend\") {\n      isComposition.value = false;\n      compositionValue.value = \"\";\n      updateValue(value, ev);\n      nextTick(() => {\n        if (inputRef.value && computedValue.value !== inputRef.value.value) {\n          inputRef.value.value = computedValue.value;\n        }\n      });\n    } else {\n      isComposition.value = true;\n      compositionValue.value = computedValue.value + ((_a2 = ev.data) != null ? _a2 : \"\");\n    }\n  };\n\n  const handleFocus = ev => {\n    var _a2, _b;\n\n    _focused.value = true;\n    initialValue = computedValue.value;\n    emit(\"focus\", ev);\n    (_b = (_a2 = eventHandlers == null ? void 0 : eventHandlers.value) == null ? void 0 : _a2.onFocus) == null ? void 0 : _b.call(_a2, ev);\n  };\n\n  const handleBlur = ev => {\n    var _a2, _b;\n\n    _focused.value = false;\n    emit(\"blur\", ev);\n    (_b = (_a2 = eventHandlers == null ? void 0 : eventHandlers.value) == null ? void 0 : _a2.onBlur) == null ? void 0 : _b.call(_a2, ev);\n    handleChange(ev);\n  };\n\n  const handleKeyDown = ev => {\n    const keyCode = ev.key || ev.code;\n\n    if (!isComposition.value && keyCode === Enter.key) {\n      emit(\"pressEnter\", ev);\n      handleChange(ev);\n    }\n  };\n\n  const handleMousedown = ev => {\n    if (inputRef.value && ev.target !== inputRef.value) {\n      ev.preventDefault();\n      inputRef.value.focus();\n    }\n  };\n\n  watch(computedValue, value => {\n    if (inputRef.value && value !== inputRef.value.value) {\n      inputRef.value.value = value;\n    }\n  });\n  return {\n    inputRef,\n    _value,\n    _focused,\n    isComposition,\n    compositionValue,\n    computedValue,\n    handleInput,\n    handleComposition,\n    handleFocus,\n    handleBlur,\n    handleKeyDown,\n    handleMousedown\n  };\n};\n\nexport { useInput };","map":{"version":3,"names":["ref","computed","nextTick","watch","Enter","useInput","defaultValue","modelValue","emit","eventName","updateEventName","eventHandlers","_a","inputRef","_value","value","_focused","isComposition","compositionValue","initialValue","computedValue","_a2","updateValue","ev","handleInput","target","handleChange","handleComposition","type","data","handleFocus","_b","onFocus","call","handleBlur","onBlur","handleKeyDown","keyCode","key","code","handleMousedown","preventDefault","focus"],"sources":["/www/wwwroot/admin/node_modules/@arco-design/web-vue/es/_hooks/use-input.js"],"sourcesContent":["import { ref, computed, nextTick, watch } from \"vue\";\nimport { Enter } from \"../_utils/keycode.js\";\nconst useInput = ({\n  defaultValue,\n  modelValue,\n  emit,\n  eventName = \"input\",\n  updateEventName = \"update:modelValue\",\n  eventHandlers\n}) => {\n  var _a;\n  const inputRef = ref();\n  const _value = ref((_a = defaultValue == null ? void 0 : defaultValue.value) != null ? _a : \"\");\n  const _focused = ref(false);\n  const isComposition = ref(false);\n  const compositionValue = ref(\"\");\n  let initialValue;\n  const computedValue = computed(() => {\n    var _a2;\n    return (_a2 = modelValue == null ? void 0 : modelValue.value) != null ? _a2 : _value.value;\n  });\n  const updateValue = (value, ev) => {\n    _value.value = value;\n    emit(updateEventName, value);\n    emit(eventName, value, ev);\n  };\n  const handleInput = (ev) => {\n    const { value } = ev.target;\n    if (!isComposition.value) {\n      updateValue(value, ev);\n      nextTick(() => {\n        if (inputRef.value && computedValue.value !== inputRef.value.value) {\n          inputRef.value.value = computedValue.value;\n        }\n      });\n    }\n  };\n  const handleChange = (ev) => {\n    if (eventName === \"input\" && computedValue.value !== initialValue) {\n      initialValue = computedValue.value;\n      emit(\"change\", computedValue.value, ev);\n    }\n  };\n  const handleComposition = (ev) => {\n    var _a2;\n    const { value } = ev.target;\n    if (ev.type === \"compositionend\") {\n      isComposition.value = false;\n      compositionValue.value = \"\";\n      updateValue(value, ev);\n      nextTick(() => {\n        if (inputRef.value && computedValue.value !== inputRef.value.value) {\n          inputRef.value.value = computedValue.value;\n        }\n      });\n    } else {\n      isComposition.value = true;\n      compositionValue.value = computedValue.value + ((_a2 = ev.data) != null ? _a2 : \"\");\n    }\n  };\n  const handleFocus = (ev) => {\n    var _a2, _b;\n    _focused.value = true;\n    initialValue = computedValue.value;\n    emit(\"focus\", ev);\n    (_b = (_a2 = eventHandlers == null ? void 0 : eventHandlers.value) == null ? void 0 : _a2.onFocus) == null ? void 0 : _b.call(_a2, ev);\n  };\n  const handleBlur = (ev) => {\n    var _a2, _b;\n    _focused.value = false;\n    emit(\"blur\", ev);\n    (_b = (_a2 = eventHandlers == null ? void 0 : eventHandlers.value) == null ? void 0 : _a2.onBlur) == null ? void 0 : _b.call(_a2, ev);\n    handleChange(ev);\n  };\n  const handleKeyDown = (ev) => {\n    const keyCode = ev.key || ev.code;\n    if (!isComposition.value && keyCode === Enter.key) {\n      emit(\"pressEnter\", ev);\n      handleChange(ev);\n    }\n  };\n  const handleMousedown = (ev) => {\n    if (inputRef.value && ev.target !== inputRef.value) {\n      ev.preventDefault();\n      inputRef.value.focus();\n    }\n  };\n  watch(computedValue, (value) => {\n    if (inputRef.value && value !== inputRef.value.value) {\n      inputRef.value.value = value;\n    }\n  });\n  return {\n    inputRef,\n    _value,\n    _focused,\n    isComposition,\n    compositionValue,\n    computedValue,\n    handleInput,\n    handleComposition,\n    handleFocus,\n    handleBlur,\n    handleKeyDown,\n    handleMousedown\n  };\n};\nexport { useInput };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}