{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nvar opt = Object.prototype.toString;\n\nfunction isArray(obj) {\n  return opt.call(obj) === '[object Array]';\n}\n\nfunction isObject(obj) {\n  return opt.call(obj) === '[object Object]';\n}\n\nfunction isString(obj) {\n  return opt.call(obj) === '[object String]';\n}\n\nfunction isNumber(obj) {\n  return opt.call(obj) === '[object Number]' && obj === obj; // eslint-disable-line\n}\n\nfunction isBoolean(obj) {\n  return opt.call(obj) === '[object Boolean]';\n}\n\nfunction isFunction(obj) {\n  return opt.call(obj) === '[object Function]';\n}\n\nfunction isEmptyObject(obj) {\n  return isObject(obj) && Object.keys(obj).length === 0;\n}\n\nfunction isEmptyValue(obj) {\n  return obj === undefined || obj === null || obj === '';\n}\n\nfunction isEmptyArray(obj) {\n  return isArray(obj) && !obj.length;\n}\n\nvar isEqual = function (obj, other) {\n  if (typeof obj !== 'object' || typeof other !== 'object') {\n    return obj === other;\n  }\n\n  if (isFunction(obj) && isFunction(other)) {\n    return obj === other || obj.toString() === other.toString();\n  }\n\n  if (Object.keys(obj).length !== Object.keys(other).length) {\n    return false;\n  }\n\n  for (var key in obj) {\n    var result = isEqual(obj[key], other[key]);\n\n    if (!result) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nvar mergeTemplate = function (defaultValidateMessages, validateMessages) {\n  var result = {};\n  Object.keys(defaultValidateMessages).forEach(function (key) {\n    var defaultValue = defaultValidateMessages[key];\n    var propsValue = validateMessages && validateMessages[key];\n    result[key] = isObject(defaultValue) ? Object.assign(Object.assign({}, defaultValue), propsValue) : propsValue || defaultValue;\n  });\n  return result;\n};\n\nvar getTemplate = function (validateMessages, keyPath) {\n  var keys = keyPath.split('.');\n  var result = validateMessages;\n\n  for (var i = 0; i < keys.length; i++) {\n    result = result && result[keys[i]];\n\n    if (result === undefined) {\n      return result;\n    }\n  }\n\n  return result;\n};\n\nvar defaultTypeTemplate = '`#{value}` is not a #{type} type';\nvar validateMessages = {\n  required: '#{field} is required',\n  type: {\n    ip: defaultTypeTemplate,\n    email: defaultTypeTemplate,\n    url: defaultTypeTemplate,\n    string: defaultTypeTemplate,\n    number: defaultTypeTemplate,\n    array: defaultTypeTemplate,\n    object: defaultTypeTemplate,\n    boolean: defaultTypeTemplate\n  },\n  number: {\n    min: '`#{value}` is not greater than `#{min}`',\n    max: '`#{value}` is not less than `#{max}`',\n    equal: '`#{value}` is not equal to `#{equal}`',\n    range: '`#{value}` is not in range `#{min} ~ #{max}`',\n    positive: '`#{value}` is not a positive number',\n    negative: '`#{value}` is not a negative number'\n  },\n  array: {\n    length: 'The `#{value}` length is not equal to #{length}',\n    minLength: 'The `#{value}` length is not greater than #{minLength}',\n    maxLength: 'The `#{value}` length is not less than #{maxLength}',\n    includes: '#{value} is not includes #{includes}',\n    deepEqual: '#{value} is not deep equal with #{deepEqual}',\n    empty: '`#{value}` is not an empty array'\n  },\n  string: {\n    maxLength: 'The `#{value}` length is not greater than #{maxLength}',\n    minLength: 'The `#{value}` length is not less than #{minLength}',\n    length: 'The `#{value}` length is not equal to #{length}',\n    match: '`#{value}` is not match pattern #{pattern}',\n    uppercase: 'Expect `#{value}` to be uppercased',\n    lowercase: 'Expect `#{value}` to be lowercased'\n  },\n  object: {\n    deepEqual: '`#{value}` is not deep equal with #{deepEqual}',\n    hasKeys: '`#{value}` is not has keys #{keys}',\n    empty: '`#{value}` is not an empty object'\n  },\n  boolean: {\n    true: 'Expect true but got `#{value}`',\n    false: 'Expect false but got `#{value}`'\n  }\n};\n/**\n * @param options.trim trim string value\n * @param options.ignoreEmptyString used form type\n * @param options.message\n * @param options.type\n */\n\nvar Base = function Base(obj, options) {\n  var this$1 = this;\n\n  this.getValidateMsg = function (keyPath, info) {\n    if (info === void 0) info = {};\n    var data = Object.assign(Object.assign({}, info), {\n      value: this$1.obj,\n      field: this$1.field,\n      type: this$1.type\n    });\n    var template = getTemplate(this$1.validateMessages, keyPath);\n\n    if (isFunction(template)) {\n      return template(data);\n    }\n\n    if (isString(template)) {\n      return template.replace(/\\#\\{.+?\\}/g, function (variable) {\n        var key = variable.slice(2, -1);\n\n        if (key in data) {\n          if (isObject(data[key]) || isArray(data[key])) {\n            return JSON.stringify(data[key]);\n          }\n\n          return String(data[key]);\n        }\n\n        return variable;\n      });\n    }\n\n    return template;\n  };\n\n  if (isObject(options) && isString(obj) && options.trim) {\n    this.obj = obj.trim();\n  } else if (isObject(options) && options.ignoreEmptyString && obj === '') {\n    this.obj = undefined;\n  } else {\n    this.obj = obj;\n  }\n\n  this.message = options.message;\n  this.type = options.type;\n  this.error = null;\n  this.field = options.field || options.type;\n  this.validateMessages = mergeTemplate(validateMessages, options.validateMessages);\n};\n\nvar prototypeAccessors = {\n  not: {\n    configurable: true\n  },\n  isRequired: {\n    configurable: true\n  },\n  end: {\n    configurable: true\n  }\n};\n\nprototypeAccessors.not.get = function () {\n  this._not = !this._not;\n  return this;\n};\n\nprototypeAccessors.isRequired.get = function () {\n  if (isEmptyValue(this.obj) || isEmptyArray(this.obj)) {\n    this.error = {\n      value: this.obj,\n      type: this.type,\n      requiredError: true,\n      message: this.message || \"\" + (this._not ? '[NOT MODE]:' : '') + this.getValidateMsg('required')\n    };\n  }\n\n  return this;\n};\n\nprototypeAccessors.end.get = function () {\n  return this.error;\n};\n\nBase.prototype.addError = function addError(message) {\n  if (!this.error && message) {\n    this.error = {\n      value: this.obj,\n      type: this.type,\n      message: this.message || (isObject(message) ? message : \"\" + (this._not ? '[NOT MODE]:' : '') + message)\n    };\n  }\n};\n\nBase.prototype.validate = function validate(expression, errorMessage) {\n  var _expression = this._not ? expression : !expression;\n\n  if (_expression) {\n    this.addError(errorMessage);\n  }\n\n  return this;\n};\n\nBase.prototype.collect = function collect(callback) {\n  callback && callback(this.error);\n};\n\nObject.defineProperties(Base.prototype, prototypeAccessors);\n\nvar StringValidator = /*@__PURE__*/function (Base) {\n  function StringValidator(obj, options) {\n    Base.call(this, obj, Object.assign(Object.assign({}, options), {\n      type: 'string'\n    }));\n    this.validate(options && options.strict ? isString(this.obj) : true, this.getValidateMsg('type.string'));\n  }\n\n  if (Base) StringValidator.__proto__ = Base;\n  StringValidator.prototype = Object.create(Base && Base.prototype);\n  StringValidator.prototype.constructor = StringValidator;\n  var prototypeAccessors = {\n    uppercase: {\n      configurable: true\n    },\n    lowercase: {\n      configurable: true\n    }\n  };\n\n  StringValidator.prototype.maxLength = function maxLength(length) {\n    return this.obj ? this.validate(this.obj.length <= length, this.getValidateMsg('string.maxLength', {\n      maxLength: length\n    })) : this;\n  };\n\n  StringValidator.prototype.minLength = function minLength(length) {\n    return this.obj ? this.validate(this.obj.length >= length, this.getValidateMsg('string.minLength', {\n      minLength: length\n    })) : this;\n  };\n\n  StringValidator.prototype.length = function length(length$1) {\n    return this.obj ? this.validate(this.obj.length === length$1, this.getValidateMsg('string.length', {\n      length: length$1\n    })) : this;\n  };\n\n  StringValidator.prototype.match = function match(pattern) {\n    var isRegex = pattern instanceof RegExp;\n\n    if (isRegex) {\n      pattern.lastIndex = 0;\n    }\n\n    return this.validate(this.obj === undefined || isRegex && pattern.test(this.obj), this.getValidateMsg('string.match', {\n      pattern: pattern\n    }));\n  };\n\n  prototypeAccessors.uppercase.get = function () {\n    return this.obj ? this.validate(this.obj.toUpperCase() === this.obj, this.getValidateMsg('string.uppercase')) : this;\n  };\n\n  prototypeAccessors.lowercase.get = function () {\n    return this.obj ? this.validate(this.obj.toLowerCase() === this.obj, this.getValidateMsg('string.lowercase')) : this;\n  };\n\n  Object.defineProperties(StringValidator.prototype, prototypeAccessors);\n  return StringValidator;\n}(Base);\n\nvar NumberValidator = /*@__PURE__*/function (Base) {\n  function NumberValidator(obj, options) {\n    Base.call(this, obj, Object.assign(Object.assign({}, options), {\n      type: 'number'\n    }));\n    this.validate(options && options.strict ? isNumber(this.obj) : true, this.getValidateMsg('type.number'));\n  }\n\n  if (Base) NumberValidator.__proto__ = Base;\n  NumberValidator.prototype = Object.create(Base && Base.prototype);\n  NumberValidator.prototype.constructor = NumberValidator;\n  var prototypeAccessors = {\n    positive: {\n      configurable: true\n    },\n    negative: {\n      configurable: true\n    }\n  };\n\n  NumberValidator.prototype.min = function min(num) {\n    return !isEmptyValue(this.obj) ? this.validate(this.obj >= num, this.getValidateMsg('number.min', {\n      min: num\n    })) : this;\n  };\n\n  NumberValidator.prototype.max = function max(num) {\n    return !isEmptyValue(this.obj) ? this.validate(this.obj <= num, this.getValidateMsg('number.max', {\n      max: num\n    })) : this;\n  };\n\n  NumberValidator.prototype.equal = function equal(num) {\n    return !isEmptyValue(this.obj) ? this.validate(this.obj === num, this.getValidateMsg('number.equal', {\n      equal: num\n    })) : this;\n  };\n\n  NumberValidator.prototype.range = function range(min, max) {\n    return !isEmptyValue(this.obj) ? this.validate(this.obj >= min && this.obj <= max, this.getValidateMsg('number.range', {\n      min: min,\n      max: max\n    })) : this;\n  };\n\n  prototypeAccessors.positive.get = function () {\n    return !isEmptyValue(this.obj) ? this.validate(this.obj > 0, this.getValidateMsg('number.positive')) : this;\n  };\n\n  prototypeAccessors.negative.get = function () {\n    return !isEmptyValue(this.obj) ? this.validate(this.obj < 0, this.getValidateMsg('number.negative')) : this;\n  };\n\n  Object.defineProperties(NumberValidator.prototype, prototypeAccessors);\n  return NumberValidator;\n}(Base);\n\nvar ArrayValidator = /*@__PURE__*/function (Base) {\n  function ArrayValidator(obj, options) {\n    Base.call(this, obj, Object.assign(Object.assign({}, options), {\n      type: 'array'\n    }));\n    this.validate(options && options.strict ? isArray(this.obj) : true, this.getValidateMsg('type.array', {\n      value: this.obj,\n      type: this.type\n    }));\n  }\n\n  if (Base) ArrayValidator.__proto__ = Base;\n  ArrayValidator.prototype = Object.create(Base && Base.prototype);\n  ArrayValidator.prototype.constructor = ArrayValidator;\n  var prototypeAccessors = {\n    empty: {\n      configurable: true\n    }\n  };\n\n  ArrayValidator.prototype.length = function length(num) {\n    return this.obj ? this.validate(this.obj.length === num, this.getValidateMsg('array.length', {\n      value: this.obj,\n      length: num\n    })) : this;\n  };\n\n  ArrayValidator.prototype.minLength = function minLength(num) {\n    return this.obj ? this.validate(this.obj.length >= num, this.getValidateMsg('array.minLength', {\n      value: this.obj,\n      minLength: num\n    })) : this;\n  };\n\n  ArrayValidator.prototype.maxLength = function maxLength(num) {\n    return this.obj ? this.validate(this.obj.length <= num, this.getValidateMsg('array.maxLength', {\n      value: this.obj,\n      maxLength: num\n    })) : this;\n  };\n\n  ArrayValidator.prototype.includes = function includes(arrays) {\n    var this$1 = this;\n    return this.obj ? this.validate(arrays.every(function (el) {\n      return this$1.obj.indexOf(el) !== -1;\n    }), this.getValidateMsg('array.includes', {\n      value: this.obj,\n      includes: arrays\n    })) : this;\n  };\n\n  ArrayValidator.prototype.deepEqual = function deepEqual(other) {\n    return this.obj ? this.validate(isEqual(this.obj, other), this.getValidateMsg('array.deepEqual', {\n      value: this.obj,\n      deepEqual: other\n    })) : this;\n  };\n\n  prototypeAccessors.empty.get = function () {\n    return this.validate(isEmptyArray(this.obj), this.getValidateMsg('array.empty', {\n      value: this.obj\n    }));\n  };\n\n  Object.defineProperties(ArrayValidator.prototype, prototypeAccessors);\n  return ArrayValidator;\n}(Base);\n\nvar ObjectValidator = /*@__PURE__*/function (Base) {\n  function ObjectValidator(obj, options) {\n    Base.call(this, obj, Object.assign(Object.assign({}, options), {\n      type: 'object'\n    }));\n    this.validate(options && options.strict ? isObject(this.obj) : true, this.getValidateMsg('type.object'));\n  }\n\n  if (Base) ObjectValidator.__proto__ = Base;\n  ObjectValidator.prototype = Object.create(Base && Base.prototype);\n  ObjectValidator.prototype.constructor = ObjectValidator;\n  var prototypeAccessors = {\n    empty: {\n      configurable: true\n    }\n  };\n\n  ObjectValidator.prototype.deepEqual = function deepEqual(other) {\n    return this.obj ? this.validate(isEqual(this.obj, other), this.getValidateMsg('object.deepEqual', {\n      deepEqual: other\n    })) : this;\n  };\n\n  ObjectValidator.prototype.hasKeys = function hasKeys(keys) {\n    var this$1 = this;\n    return this.obj ? this.validate(keys.every(function (el) {\n      return this$1.obj[el];\n    }), this.getValidateMsg('object.hasKeys', {\n      keys: keys\n    })) : this;\n  };\n\n  prototypeAccessors.empty.get = function () {\n    return this.validate(isEmptyObject(this.obj), this.getValidateMsg('object.empty'));\n  };\n\n  Object.defineProperties(ObjectValidator.prototype, prototypeAccessors);\n  return ObjectValidator;\n}(Base);\n\nvar BooleanValidator = /*@__PURE__*/function (Base) {\n  function BooleanValidator(obj, options) {\n    Base.call(this, obj, Object.assign(Object.assign({}, options), {\n      type: 'boolean'\n    }));\n    this.validate(options && options.strict ? isBoolean(this.obj) : true, this.getValidateMsg('type.boolean'));\n  }\n\n  if (Base) BooleanValidator.__proto__ = Base;\n  BooleanValidator.prototype = Object.create(Base && Base.prototype);\n  BooleanValidator.prototype.constructor = BooleanValidator;\n  var prototypeAccessors = {\n    true: {\n      configurable: true\n    },\n    false: {\n      configurable: true\n    }\n  };\n\n  prototypeAccessors.true.get = function () {\n    return this.validate(this.obj === true, this.getValidateMsg('boolean.true'));\n  };\n\n  prototypeAccessors.false.get = function () {\n    return this.validate(this.obj === false, this.getValidateMsg('boolean.false'));\n  };\n\n  Object.defineProperties(BooleanValidator.prototype, prototypeAccessors);\n  return BooleanValidator;\n}(Base);\n\nvar regexEmail = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\nvar regexUrl = new RegExp('^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\\\S+(?::\\\\S*)?@)?(?:(?:(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}(?:\\\\.(?:[0-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,})))|localhost)(?::\\\\d{2,5})?(?:(/|\\\\?|#)[^\\\\s]*)?$', 'i');\nvar regexIp = /^(2(5[0-5]{1}|[0-4]\\d{1})|[0-1]?\\d{1,2})(\\.(2(5[0-5]{1}|[0-4]\\d{1})|[0-1]?\\d{1,2})){3}$/;\n\nvar TypeValidator = /*@__PURE__*/function (Base) {\n  function TypeValidator(obj, options) {\n    Base.call(this, obj, Object.assign(Object.assign({}, options), {\n      type: 'type'\n    }));\n  }\n\n  if (Base) TypeValidator.__proto__ = Base;\n  TypeValidator.prototype = Object.create(Base && Base.prototype);\n  TypeValidator.prototype.constructor = TypeValidator;\n  var prototypeAccessors = {\n    email: {\n      configurable: true\n    },\n    url: {\n      configurable: true\n    },\n    ip: {\n      configurable: true\n    }\n  };\n\n  prototypeAccessors.email.get = function () {\n    this.type = 'email';\n    return this.validate(this.obj === undefined || regexEmail.test(this.obj), this.getValidateMsg('type.email'));\n  };\n\n  prototypeAccessors.url.get = function () {\n    this.type = 'url';\n    return this.validate(this.obj === undefined || regexUrl.test(this.obj), this.getValidateMsg('type.url'));\n  };\n\n  prototypeAccessors.ip.get = function () {\n    this.type = 'ip';\n    return this.validate(this.obj === undefined || regexIp.test(this.obj), this.getValidateMsg('type.ip'));\n  };\n\n  Object.defineProperties(TypeValidator.prototype, prototypeAccessors);\n  return TypeValidator;\n}(Base);\n\nvar CustomValidator = /*@__PURE__*/function (Base) {\n  function CustomValidator(obj, options) {\n    Base.call(this, obj, Object.assign(Object.assign({}, options), {\n      type: 'custom'\n    }));\n  }\n\n  if (Base) CustomValidator.__proto__ = Base;\n  CustomValidator.prototype = Object.create(Base && Base.prototype);\n  CustomValidator.prototype.constructor = CustomValidator;\n  var prototypeAccessors = {\n    validate: {\n      configurable: true\n    }\n  }; // @ts-ignore\n\n  prototypeAccessors.validate.get = function () {\n    var _this = this;\n\n    return function (validator, callback) {\n      var ret;\n\n      if (validator) {\n        ret = validator(_this.obj, _this.addError.bind(_this));\n\n        if (ret && ret.then) {\n          if (callback) {\n            ret.then(function () {\n              callback && callback(_this.error);\n            }, function (e) {\n              console.error(e);\n            });\n          }\n\n          return [ret, _this];\n        } else {\n          callback && callback(_this.error);\n          return _this.error;\n        }\n      }\n    };\n  };\n\n  Object.defineProperties(CustomValidator.prototype, prototypeAccessors);\n  return CustomValidator;\n}(Base);\n\nvar Validate = function Validate(obj, options) {\n  this.string = new StringValidator(obj, options);\n  this.number = new NumberValidator(obj, options);\n  this.array = new ArrayValidator(obj, options);\n  this.object = new ObjectValidator(obj, options);\n  this.boolean = new BooleanValidator(obj, options);\n  this.type = new TypeValidator(obj, options);\n  this.custom = new CustomValidator(obj, options);\n};\n\nfunction index(obj, options) {\n  return new Validate(obj, options);\n}\n\nvar Schema = function Schema(schema, options) {\n  if (options === void 0) options = {};\n  this.schema = schema;\n  this.options = options;\n};\n\nSchema.prototype.validate = function validate(values, callback) {\n  var this$1 = this;\n\n  if (!isObject(values)) {\n    return;\n  }\n\n  var promises = [];\n  var errors = null;\n\n  function setError(key, error) {\n    if (!errors) {\n      errors = {};\n    }\n\n    if (!errors[key] || error.requiredError) {\n      errors[key] = error;\n    }\n  }\n\n  if (this.schema) {\n    Object.keys(this.schema).forEach(function (key) {\n      if (isArray(this$1.schema[key])) {\n        var loop = function (i) {\n          var rule = this$1.schema[key][i];\n          var type = rule.type;\n          var message = rule.message;\n\n          if (!type && !rule.validator) {\n            throw \"You must specify a type to field \" + key + \"!\";\n          }\n\n          var validator = new Validate(values[key], Object.assign(Object.assign({}, this$1.options), {\n            message: message,\n            field: key\n          }));\n          var bv = validator.type[type] || null;\n\n          if (!bv) {\n            if (rule.validator) {\n              bv = validator.custom.validate(rule.validator);\n\n              if (Object.prototype.toString.call(bv) === '[object Array]' && bv[0].then) {\n                promises.push({\n                  function: bv[0],\n                  _this: bv[1],\n                  key: key\n                });\n              } else if (bv) {\n                setError(key, bv);\n              }\n\n              return;\n            } else {\n              bv = validator[type];\n            }\n          }\n\n          Object.keys(rule).forEach(function (r) {\n            if (rule.required) {\n              bv = bv.isRequired;\n            }\n\n            if (r !== 'message' && bv[r] && rule[r] && typeof bv[r] === 'object') {\n              bv = bv[r];\n            }\n\n            if (bv[r] && rule[r] !== undefined && typeof bv[r] === 'function') {\n              bv = bv[r](rule[r]);\n            }\n          });\n          bv.collect(function (error) {\n            if (error) {\n              setError(key, error);\n            }\n          });\n\n          if (errors) {\n            return 'break';\n          }\n        };\n\n        for (var i = 0; i < this$1.schema[key].length; i++) {\n          var returned = loop(i);\n          if (returned === 'break') break;\n        }\n      }\n    });\n  }\n\n  if (promises.length > 0) {\n    Promise.all(promises.map(function (a) {\n      return a.function;\n    })).then(function () {\n      promises.forEach(function (promise) {\n        if (promise._this.error) {\n          setError(promise.key, promise._this.error);\n        }\n      });\n      callback && callback(errors);\n    });\n  } else {\n    callback && callback(errors);\n  }\n};\n\nexport default index;\nexport { Schema };","map":{"version":3,"names":["opt","Object","prototype","toString","isArray","obj","call","isObject","isString","isNumber","isBoolean","isFunction","isEmptyObject","keys","length","isEmptyValue","undefined","isEmptyArray","isEqual","other","key","result","mergeTemplate","defaultValidateMessages","validateMessages","forEach","defaultValue","propsValue","assign","getTemplate","keyPath","split","i","defaultTypeTemplate","required","type","ip","email","url","string","number","array","object","boolean","min","max","equal","range","positive","negative","minLength","maxLength","includes","deepEqual","empty","match","uppercase","lowercase","hasKeys","true","false","Base","options","this$1","getValidateMsg","info","data","value","field","template","replace","variable","slice","JSON","stringify","String","trim","ignoreEmptyString","message","error","prototypeAccessors","not","configurable","isRequired","end","get","_not","requiredError","addError","validate","expression","errorMessage","_expression","collect","callback","defineProperties","StringValidator","strict","__proto__","create","constructor","length$1","pattern","isRegex","RegExp","lastIndex","test","toUpperCase","toLowerCase","NumberValidator","num","ArrayValidator","arrays","every","el","indexOf","ObjectValidator","BooleanValidator","regexEmail","regexUrl","regexIp","TypeValidator","CustomValidator","_this","validator","ret","bind","then","e","console","Validate","custom","index","Schema","schema","values","promises","errors","setError","loop","rule","bv","push","function","r","returned","Promise","all","map","a","promise"],"sources":["/www/wwwroot/admin/node_modules/b-validate/es/index.js"],"sourcesContent":["var opt = Object.prototype.toString;\nfunction isArray(obj) {\n    return opt.call(obj) === '[object Array]';\n}\nfunction isObject(obj) {\n    return opt.call(obj) === '[object Object]';\n}\nfunction isString(obj) {\n    return opt.call(obj) === '[object String]';\n}\nfunction isNumber(obj) {\n    return opt.call(obj) === '[object Number]' && obj === obj; // eslint-disable-line\n}\nfunction isBoolean(obj) {\n    return opt.call(obj) === '[object Boolean]';\n}\nfunction isFunction(obj) {\n    return opt.call(obj) === '[object Function]';\n}\nfunction isEmptyObject(obj) {\n    return isObject(obj) && Object.keys(obj).length === 0;\n}\nfunction isEmptyValue(obj) {\n    return obj === undefined || obj === null || obj === '';\n}\nfunction isEmptyArray(obj) {\n    return isArray(obj) && !obj.length;\n}\nvar isEqual = function (obj, other) {\n    if (typeof obj !== 'object' || typeof other !== 'object') {\n        return obj === other;\n    }\n    if (isFunction(obj) && isFunction(other)) {\n        return obj === other || (obj.toString() === other.toString());\n    }\n    if (Object.keys(obj).length !== Object.keys(other).length) {\n        return false;\n    }\n    for (var key in obj) {\n        var result = isEqual(obj[key], other[key]);\n        if (!result)\n            { return false; }\n    }\n    return true;\n};\n\nvar mergeTemplate = function (defaultValidateMessages, validateMessages) {\n    var result = {};\n    Object.keys(defaultValidateMessages).forEach(function (key) {\n        var defaultValue = defaultValidateMessages[key];\n        var propsValue = validateMessages && validateMessages[key];\n        result[key] = isObject(defaultValue)\n            ? Object.assign(Object.assign({}, defaultValue), propsValue) : propsValue || defaultValue;\n    });\n    return result;\n};\nvar getTemplate = function (validateMessages, keyPath) {\n    var keys = keyPath.split('.');\n    var result = validateMessages;\n    for (var i = 0; i < keys.length; i++) {\n        result = result && result[keys[i]];\n        if (result === undefined) {\n            return result;\n        }\n    }\n    return result;\n};\n\nvar defaultTypeTemplate = '`#{value}` is not a #{type} type';\nvar validateMessages = {\n    required: '#{field} is required',\n    type: {\n        ip: defaultTypeTemplate,\n        email: defaultTypeTemplate,\n        url: defaultTypeTemplate,\n        string: defaultTypeTemplate,\n        number: defaultTypeTemplate,\n        array: defaultTypeTemplate,\n        object: defaultTypeTemplate,\n        boolean: defaultTypeTemplate,\n    },\n    number: {\n        min: '`#{value}` is not greater than `#{min}`',\n        max: '`#{value}` is not less than `#{max}`',\n        equal: '`#{value}` is not equal to `#{equal}`',\n        range: '`#{value}` is not in range `#{min} ~ #{max}`',\n        positive: '`#{value}` is not a positive number',\n        negative: '`#{value}` is not a negative number',\n    },\n    array: {\n        length: 'The `#{value}` length is not equal to #{length}',\n        minLength: 'The `#{value}` length is not greater than #{minLength}',\n        maxLength: 'The `#{value}` length is not less than #{maxLength}',\n        includes: '#{value} is not includes #{includes}',\n        deepEqual: '#{value} is not deep equal with #{deepEqual}',\n        empty: '`#{value}` is not an empty array',\n    },\n    string: {\n        maxLength: 'The `#{value}` length is not greater than #{maxLength}',\n        minLength: 'The `#{value}` length is not less than #{minLength}',\n        length: 'The `#{value}` length is not equal to #{length}',\n        match: '`#{value}` is not match pattern #{pattern}',\n        uppercase: 'Expect `#{value}` to be uppercased',\n        lowercase: 'Expect `#{value}` to be lowercased',\n    },\n    object: {\n        deepEqual: '`#{value}` is not deep equal with #{deepEqual}',\n        hasKeys: '`#{value}` is not has keys #{keys}',\n        empty: '`#{value}` is not an empty object',\n    },\n    boolean: {\n        true: 'Expect true but got `#{value}`',\n        false: 'Expect false but got `#{value}`',\n    },\n};\n\n/**\n * @param options.trim trim string value\n * @param options.ignoreEmptyString used form type\n * @param options.message\n * @param options.type\n */\nvar Base = function Base(obj, options) {\n    var this$1 = this;\n\n    this.getValidateMsg = function (keyPath, info) {\n        if ( info === void 0 ) info = {};\n\n        var data = Object.assign(Object.assign({}, info), { value: this$1.obj, field: this$1.field, type: this$1.type });\n        var template = getTemplate(this$1.validateMessages, keyPath);\n        if (isFunction(template)) {\n            return template(data);\n        }\n        if (isString(template)) {\n            return template.replace(/\\#\\{.+?\\}/g, function (variable) {\n                var key = variable.slice(2, -1);\n                if (key in data) {\n                    if (isObject(data[key]) || isArray(data[key])) {\n                        return JSON.stringify(data[key]);\n                    }\n                    return String(data[key]);\n                }\n                return variable;\n            });\n        }\n        return template;\n    };\n    if (isObject(options) && isString(obj) && options.trim) {\n        this.obj = obj.trim();\n    }\n    else if (isObject(options) && options.ignoreEmptyString && obj === '') {\n        this.obj = undefined;\n    }\n    else {\n        this.obj = obj;\n    }\n    this.message = options.message;\n    this.type = options.type;\n    this.error = null;\n    this.field = options.field || options.type;\n    this.validateMessages = mergeTemplate(validateMessages, options.validateMessages);\n};\n\nvar prototypeAccessors = { not: { configurable: true },isRequired: { configurable: true },end: { configurable: true } };\nprototypeAccessors.not.get = function () {\n    this._not = !this._not;\n    return this;\n};\nprototypeAccessors.isRequired.get = function () {\n    if (isEmptyValue(this.obj) || isEmptyArray(this.obj)) {\n        this.error = {\n            value: this.obj,\n            type: this.type,\n            requiredError: true,\n            message: this.message || (\"\" + (this._not ? '[NOT MODE]:' : '') + (this.getValidateMsg('required'))),\n        };\n    }\n    return this;\n};\nprototypeAccessors.end.get = function () {\n    return this.error;\n};\nBase.prototype.addError = function addError (message) {\n    if (!this.error && message) {\n        this.error = {\n            value: this.obj,\n            type: this.type,\n            message: this.message || (isObject(message) ? message : (\"\" + (this._not ? '[NOT MODE]:' : '') + message)),\n        };\n    }\n};\nBase.prototype.validate = function validate (expression, errorMessage) {\n    var _expression = this._not ? expression : !expression;\n    if (_expression) {\n        this.addError(errorMessage);\n    }\n    return this;\n};\nBase.prototype.collect = function collect (callback) {\n    callback && callback(this.error);\n};\n\nObject.defineProperties( Base.prototype, prototypeAccessors );\n\nvar StringValidator = /*@__PURE__*/(function (Base) {\n    function StringValidator(obj, options) {\n        Base.call(this, obj, Object.assign(Object.assign({}, options), { type: 'string' }));\n        this.validate(options && options.strict ? isString(this.obj) : true, this.getValidateMsg('type.string'));\n    }\n\n    if ( Base ) StringValidator.__proto__ = Base;\n    StringValidator.prototype = Object.create( Base && Base.prototype );\n    StringValidator.prototype.constructor = StringValidator;\n\n    var prototypeAccessors = { uppercase: { configurable: true },lowercase: { configurable: true } };\n    StringValidator.prototype.maxLength = function maxLength (length) {\n        return this.obj\n            ? this.validate(this.obj.length <= length, this.getValidateMsg('string.maxLength', { maxLength: length }))\n            : this;\n    };\n    StringValidator.prototype.minLength = function minLength (length) {\n        return this.obj\n            ? this.validate(this.obj.length >= length, this.getValidateMsg('string.minLength', { minLength: length }))\n            : this;\n    };\n    StringValidator.prototype.length = function length (length$1) {\n        return this.obj\n            ? this.validate(this.obj.length === length$1, this.getValidateMsg('string.length', { length: length$1 }))\n            : this;\n    };\n    StringValidator.prototype.match = function match (pattern) {\n        var isRegex = pattern instanceof RegExp;\n        if (isRegex) {\n            pattern.lastIndex = 0;\n        }\n        return this.validate(this.obj === undefined || (isRegex && pattern.test(this.obj)), this.getValidateMsg('string.match', { pattern: pattern }));\n    };\n    prototypeAccessors.uppercase.get = function () {\n        return this.obj\n            ? this.validate(this.obj.toUpperCase() === this.obj, this.getValidateMsg('string.uppercase'))\n            : this;\n    };\n    prototypeAccessors.lowercase.get = function () {\n        return this.obj\n            ? this.validate(this.obj.toLowerCase() === this.obj, this.getValidateMsg('string.lowercase'))\n            : this;\n    };\n\n    Object.defineProperties( StringValidator.prototype, prototypeAccessors );\n\n    return StringValidator;\n}(Base));\n\nvar NumberValidator = /*@__PURE__*/(function (Base) {\n    function NumberValidator(obj, options) {\n        Base.call(this, obj, Object.assign(Object.assign({}, options), { type: 'number' }));\n        this.validate(options && options.strict ? isNumber(this.obj) : true, this.getValidateMsg('type.number'));\n    }\n\n    if ( Base ) NumberValidator.__proto__ = Base;\n    NumberValidator.prototype = Object.create( Base && Base.prototype );\n    NumberValidator.prototype.constructor = NumberValidator;\n\n    var prototypeAccessors = { positive: { configurable: true },negative: { configurable: true } };\n    NumberValidator.prototype.min = function min (num) {\n        return !isEmptyValue(this.obj)\n            ? this.validate(this.obj >= num, this.getValidateMsg('number.min', { min: num }))\n            : this;\n    };\n    NumberValidator.prototype.max = function max (num) {\n        return !isEmptyValue(this.obj)\n            ? this.validate(this.obj <= num, this.getValidateMsg('number.max', { max: num }))\n            : this;\n    };\n    NumberValidator.prototype.equal = function equal (num) {\n        return !isEmptyValue(this.obj)\n            ? this.validate(this.obj === num, this.getValidateMsg('number.equal', { equal: num }))\n            : this;\n    };\n    NumberValidator.prototype.range = function range (min, max) {\n        return !isEmptyValue(this.obj)\n            ? this.validate(this.obj >= min && this.obj <= max, this.getValidateMsg('number.range', { min: min, max: max }))\n            : this;\n    };\n    prototypeAccessors.positive.get = function () {\n        return !isEmptyValue(this.obj) ? this.validate(this.obj > 0, this.getValidateMsg('number.positive')) : this;\n    };\n    prototypeAccessors.negative.get = function () {\n        return !isEmptyValue(this.obj) ? this.validate(this.obj < 0, this.getValidateMsg('number.negative')) : this;\n    };\n\n    Object.defineProperties( NumberValidator.prototype, prototypeAccessors );\n\n    return NumberValidator;\n}(Base));\n\nvar ArrayValidator = /*@__PURE__*/(function (Base) {\n    function ArrayValidator(obj, options) {\n        Base.call(this, obj, Object.assign(Object.assign({}, options), { type: 'array' }));\n        this.validate(options && options.strict ? isArray(this.obj) : true, this.getValidateMsg('type.array', { value: this.obj, type: this.type }));\n    }\n\n    if ( Base ) ArrayValidator.__proto__ = Base;\n    ArrayValidator.prototype = Object.create( Base && Base.prototype );\n    ArrayValidator.prototype.constructor = ArrayValidator;\n\n    var prototypeAccessors = { empty: { configurable: true } };\n    ArrayValidator.prototype.length = function length (num) {\n        return this.obj ? this.validate(this.obj.length === num, this.getValidateMsg('array.length', { value: this.obj, length: num })) : this;\n    };\n    ArrayValidator.prototype.minLength = function minLength (num) {\n        return this.obj ? this.validate(this.obj.length >= num, this.getValidateMsg('array.minLength', { value: this.obj, minLength: num })) : this;\n    };\n    ArrayValidator.prototype.maxLength = function maxLength (num) {\n        return this.obj ? this.validate(this.obj.length <= num, this.getValidateMsg('array.maxLength', { value: this.obj, maxLength: num })) : this;\n    };\n    ArrayValidator.prototype.includes = function includes (arrays) {\n        var this$1 = this;\n\n        return this.obj\n            ? this.validate(arrays.every(function (el) { return this$1.obj.indexOf(el) !== -1; }), this.getValidateMsg('array.includes', {\n                value: this.obj,\n                includes: arrays,\n            }))\n            : this;\n    };\n    ArrayValidator.prototype.deepEqual = function deepEqual (other) {\n        return this.obj\n            ? this.validate(isEqual(this.obj, other), this.getValidateMsg('array.deepEqual', { value: this.obj, deepEqual: other }))\n            : this;\n    };\n    prototypeAccessors.empty.get = function () {\n        return this.validate(isEmptyArray(this.obj), this.getValidateMsg('array.empty', { value: this.obj }));\n    };\n\n    Object.defineProperties( ArrayValidator.prototype, prototypeAccessors );\n\n    return ArrayValidator;\n}(Base));\n\nvar ObjectValidator = /*@__PURE__*/(function (Base) {\n    function ObjectValidator(obj, options) {\n        Base.call(this, obj, Object.assign(Object.assign({}, options), { type: 'object' }));\n        this.validate(options && options.strict ? isObject(this.obj) : true, this.getValidateMsg('type.object'));\n    }\n\n    if ( Base ) ObjectValidator.__proto__ = Base;\n    ObjectValidator.prototype = Object.create( Base && Base.prototype );\n    ObjectValidator.prototype.constructor = ObjectValidator;\n\n    var prototypeAccessors = { empty: { configurable: true } };\n    ObjectValidator.prototype.deepEqual = function deepEqual (other) {\n        return this.obj ? this.validate(isEqual(this.obj, other), this.getValidateMsg('object.deepEqual', { deepEqual: other })) : this;\n    };\n    ObjectValidator.prototype.hasKeys = function hasKeys (keys) {\n        var this$1 = this;\n\n        return this.obj\n            ? this.validate(keys.every(function (el) { return this$1.obj[el]; }), this.getValidateMsg('object.hasKeys', { keys: keys }))\n            : this;\n    };\n    prototypeAccessors.empty.get = function () {\n        return this.validate(isEmptyObject(this.obj), this.getValidateMsg('object.empty'));\n    };\n\n    Object.defineProperties( ObjectValidator.prototype, prototypeAccessors );\n\n    return ObjectValidator;\n}(Base));\n\nvar BooleanValidator = /*@__PURE__*/(function (Base) {\n    function BooleanValidator(obj, options) {\n        Base.call(this, obj, Object.assign(Object.assign({}, options), { type: 'boolean' }));\n        this.validate(options && options.strict ? isBoolean(this.obj) : true, this.getValidateMsg('type.boolean'));\n    }\n\n    if ( Base ) BooleanValidator.__proto__ = Base;\n    BooleanValidator.prototype = Object.create( Base && Base.prototype );\n    BooleanValidator.prototype.constructor = BooleanValidator;\n\n    var prototypeAccessors = { true: { configurable: true },false: { configurable: true } };\n    prototypeAccessors.true.get = function () {\n        return this.validate(this.obj === true, this.getValidateMsg('boolean.true'));\n    };\n    prototypeAccessors.false.get = function () {\n        return this.validate(this.obj === false, this.getValidateMsg('boolean.false'));\n    };\n\n    Object.defineProperties( BooleanValidator.prototype, prototypeAccessors );\n\n    return BooleanValidator;\n}(Base));\n\nvar regexEmail = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\nvar regexUrl = new RegExp('^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\\\S+(?::\\\\S*)?@)?(?:(?:(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}(?:\\\\.(?:[0-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]+-?)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,})))|localhost)(?::\\\\d{2,5})?(?:(/|\\\\?|#)[^\\\\s]*)?$', 'i');\nvar regexIp = /^(2(5[0-5]{1}|[0-4]\\d{1})|[0-1]?\\d{1,2})(\\.(2(5[0-5]{1}|[0-4]\\d{1})|[0-1]?\\d{1,2})){3}$/;\nvar TypeValidator = /*@__PURE__*/(function (Base) {\n    function TypeValidator(obj, options) {\n        Base.call(this, obj, Object.assign(Object.assign({}, options), { type: 'type' }));\n    }\n\n    if ( Base ) TypeValidator.__proto__ = Base;\n    TypeValidator.prototype = Object.create( Base && Base.prototype );\n    TypeValidator.prototype.constructor = TypeValidator;\n\n    var prototypeAccessors = { email: { configurable: true },url: { configurable: true },ip: { configurable: true } };\n    prototypeAccessors.email.get = function () {\n        this.type = 'email';\n        return this.validate(this.obj === undefined || regexEmail.test(this.obj), this.getValidateMsg('type.email'));\n    };\n    prototypeAccessors.url.get = function () {\n        this.type = 'url';\n        return this.validate(this.obj === undefined || regexUrl.test(this.obj), this.getValidateMsg('type.url'));\n    };\n    prototypeAccessors.ip.get = function () {\n        this.type = 'ip';\n        return this.validate(this.obj === undefined || regexIp.test(this.obj), this.getValidateMsg('type.ip'));\n    };\n\n    Object.defineProperties( TypeValidator.prototype, prototypeAccessors );\n\n    return TypeValidator;\n}(Base));\n\nvar CustomValidator = /*@__PURE__*/(function (Base) {\n    function CustomValidator(obj, options) {\n        Base.call(this, obj, Object.assign(Object.assign({}, options), { type: 'custom' }));\n    }\n\n    if ( Base ) CustomValidator.__proto__ = Base;\n    CustomValidator.prototype = Object.create( Base && Base.prototype );\n    CustomValidator.prototype.constructor = CustomValidator;\n\n    var prototypeAccessors = { validate: { configurable: true } };\n    // @ts-ignore\n    prototypeAccessors.validate.get = function () {\n        var _this = this;\n        return function (validator, callback) {\n            var ret;\n            if (validator) {\n                ret = validator(_this.obj, _this.addError.bind(_this));\n                if (ret && ret.then) {\n                    if (callback) {\n                        ret.then(function () {\n                            callback && callback(_this.error);\n                        }, function (e) {\n                            console.error(e);\n                        });\n                    }\n                    return [ret, _this];\n                }\n                else {\n                    callback && callback(_this.error);\n                    return _this.error;\n                }\n            }\n        };\n    };\n\n    Object.defineProperties( CustomValidator.prototype, prototypeAccessors );\n\n    return CustomValidator;\n}(Base));\n\nvar Validate = function Validate(obj, options) {\n    this.string = new StringValidator(obj, options);\n    this.number = new NumberValidator(obj, options);\n    this.array = new ArrayValidator(obj, options);\n    this.object = new ObjectValidator(obj, options);\n    this.boolean = new BooleanValidator(obj, options);\n    this.type = new TypeValidator(obj, options);\n    this.custom = new CustomValidator(obj, options);\n};\nfunction index (obj, options) {\n    return new Validate(obj, options);\n}var Schema = function Schema(schema, options) {\n    if ( options === void 0 ) options = {};\n\n    this.schema = schema;\n    this.options = options;\n};\nSchema.prototype.validate = function validate (values, callback) {\n        var this$1 = this;\n\n    if (!isObject(values)) {\n        return;\n    }\n    var promises = [];\n    var errors = null;\n    function setError(key, error) {\n        if (!errors) {\n            errors = {};\n        }\n        if (!errors[key] || error.requiredError) {\n            errors[key] = error;\n        }\n    }\n    if (this.schema) {\n        Object.keys(this.schema).forEach(function (key) {\n            if (isArray(this$1.schema[key])) {\n                var loop = function ( i ) {\n                    var rule = this$1.schema[key][i];\n                    var type = rule.type;\n                    var message = rule.message;\n                    if (!type && !rule.validator) {\n                        throw (\"You must specify a type to field \" + key + \"!\");\n                    }\n                    var validator = new Validate(values[key], Object.assign(Object.assign({}, this$1.options), { message: message, field: key }));\n                    var bv = validator.type[type] || null;\n                    if (!bv) {\n                        if (rule.validator) {\n                            bv = validator.custom.validate(rule.validator);\n                            if (Object.prototype.toString.call(bv) === '[object Array]' && bv[0].then) {\n                                promises.push({\n                                    function: bv[0],\n                                    _this: bv[1],\n                                    key: key,\n                                });\n                            }\n                            else if (bv) {\n                                setError(key, bv);\n                            }\n                            return;\n                        }\n                        else {\n                            bv = validator[type];\n                        }\n                    }\n                    Object.keys(rule).forEach(function (r) {\n                        if (rule.required) {\n                            bv = bv.isRequired;\n                        }\n                        if (r !== 'message' && bv[r] && rule[r] && typeof bv[r] === 'object') {\n                            bv = bv[r];\n                        }\n                        if (bv[r] && rule[r] !== undefined && typeof bv[r] === 'function') {\n                            bv = bv[r](rule[r]);\n                        }\n                    });\n                    bv.collect(function (error) {\n                        if (error) {\n                            setError(key, error);\n                        }\n                    });\n                    if (errors) {\n                        return 'break';\n                    }\n                };\n\n                    for (var i = 0; i < this$1.schema[key].length; i++) {\n                        var returned = loop( i );\n\n                        if ( returned === 'break' ) break;\n                    }\n            }\n        });\n    }\n    if (promises.length > 0) {\n        Promise.all(promises.map(function (a) { return a.function; })).then(function () {\n            promises.forEach(function (promise) {\n                if (promise._this.error) {\n                    setError(promise.key, promise._this.error);\n                }\n            });\n            callback && callback(errors);\n        });\n    }\n    else {\n        callback && callback(errors);\n    }\n};\n\nexport default index;\nexport { Schema };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}