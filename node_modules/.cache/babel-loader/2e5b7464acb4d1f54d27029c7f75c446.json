{"ast":null,"code":"import { toRefs, watchEffect } from \"vue\";\n\nfunction usePopupOverflowHidden(props) {\n  const {\n    container,\n    hidden\n  } = toRefs(props);\n  let needResetContainerStyle = false;\n  let originContainerStyle = {};\n\n  const getScrollBarWidth = element => {\n    return element.tagName === \"BODY\" ? window.innerWidth - (document.body.clientWidth || document.documentElement.clientWidth) : element.offsetWidth - element.clientWidth;\n  };\n\n  const setContainerStyle = () => {\n    if (container.value && container.value.style.overflow !== \"hidden\") {\n      const originStyle = container.value.style;\n      needResetContainerStyle = true;\n      const containerScrollBarWidth = getScrollBarWidth(container.value);\n\n      if (containerScrollBarWidth) {\n        originContainerStyle.width = originStyle.width;\n        container.value.style.width = `calc(${container.value.style.width || \"100%\"} - ${containerScrollBarWidth}px)`;\n      }\n\n      originContainerStyle.overflow = originStyle.overflow;\n      container.value.style.overflow = \"hidden\";\n    }\n  };\n\n  const resetContainerStyle = () => {\n    if (container.value && needResetContainerStyle) {\n      const originStyle = originContainerStyle;\n      Object.keys(originStyle).forEach(i => {\n        container.value.style[i] = originStyle[i];\n      });\n    }\n\n    needResetContainerStyle = false;\n    originContainerStyle = {};\n  };\n\n  watchEffect(onInvalidate => {\n    hidden.value ? setContainerStyle() : resetContainerStyle();\n    onInvalidate(() => {\n      resetContainerStyle();\n    });\n  });\n  return [resetContainerStyle, setContainerStyle];\n}\n\nexport { usePopupOverflowHidden as default };","map":{"version":3,"names":["toRefs","watchEffect","usePopupOverflowHidden","props","container","hidden","needResetContainerStyle","originContainerStyle","getScrollBarWidth","element","tagName","window","innerWidth","document","body","clientWidth","documentElement","offsetWidth","setContainerStyle","value","style","overflow","originStyle","containerScrollBarWidth","width","resetContainerStyle","Object","keys","forEach","i","onInvalidate","default"],"sources":["/www/wwwroot/admin/node_modules/@arco-design/web-vue/es/_hooks/use-popup-overflow-hidden.js"],"sourcesContent":["import { toRefs, watchEffect } from \"vue\";\nfunction usePopupOverflowHidden(props) {\n  const { container, hidden } = toRefs(props);\n  let needResetContainerStyle = false;\n  let originContainerStyle = {};\n  const getScrollBarWidth = (element) => {\n    return element.tagName === \"BODY\" ? window.innerWidth - (document.body.clientWidth || document.documentElement.clientWidth) : element.offsetWidth - element.clientWidth;\n  };\n  const setContainerStyle = () => {\n    if (container.value && container.value.style.overflow !== \"hidden\") {\n      const originStyle = container.value.style;\n      needResetContainerStyle = true;\n      const containerScrollBarWidth = getScrollBarWidth(container.value);\n      if (containerScrollBarWidth) {\n        originContainerStyle.width = originStyle.width;\n        container.value.style.width = `calc(${container.value.style.width || \"100%\"} - ${containerScrollBarWidth}px)`;\n      }\n      originContainerStyle.overflow = originStyle.overflow;\n      container.value.style.overflow = \"hidden\";\n    }\n  };\n  const resetContainerStyle = () => {\n    if (container.value && needResetContainerStyle) {\n      const originStyle = originContainerStyle;\n      Object.keys(originStyle).forEach((i) => {\n        container.value.style[i] = originStyle[i];\n      });\n    }\n    needResetContainerStyle = false;\n    originContainerStyle = {};\n  };\n  watchEffect((onInvalidate) => {\n    hidden.value ? setContainerStyle() : resetContainerStyle();\n    onInvalidate(() => {\n      resetContainerStyle();\n    });\n  });\n  return [resetContainerStyle, setContainerStyle];\n}\nexport { usePopupOverflowHidden as default };\n"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,WAAjB,QAAoC,KAApC;;AACA,SAASC,sBAAT,CAAgCC,KAAhC,EAAuC;EACrC,MAAM;IAAEC,SAAF;IAAaC;EAAb,IAAwBL,MAAM,CAACG,KAAD,CAApC;EACA,IAAIG,uBAAuB,GAAG,KAA9B;EACA,IAAIC,oBAAoB,GAAG,EAA3B;;EACA,MAAMC,iBAAiB,GAAIC,OAAD,IAAa;IACrC,OAAOA,OAAO,CAACC,OAAR,KAAoB,MAApB,GAA6BC,MAAM,CAACC,UAAP,IAAqBC,QAAQ,CAACC,IAAT,CAAcC,WAAd,IAA6BF,QAAQ,CAACG,eAAT,CAAyBD,WAA3E,CAA7B,GAAuHN,OAAO,CAACQ,WAAR,GAAsBR,OAAO,CAACM,WAA5J;EACD,CAFD;;EAGA,MAAMG,iBAAiB,GAAG,MAAM;IAC9B,IAAId,SAAS,CAACe,KAAV,IAAmBf,SAAS,CAACe,KAAV,CAAgBC,KAAhB,CAAsBC,QAAtB,KAAmC,QAA1D,EAAoE;MAClE,MAAMC,WAAW,GAAGlB,SAAS,CAACe,KAAV,CAAgBC,KAApC;MACAd,uBAAuB,GAAG,IAA1B;MACA,MAAMiB,uBAAuB,GAAGf,iBAAiB,CAACJ,SAAS,CAACe,KAAX,CAAjD;;MACA,IAAII,uBAAJ,EAA6B;QAC3BhB,oBAAoB,CAACiB,KAArB,GAA6BF,WAAW,CAACE,KAAzC;QACApB,SAAS,CAACe,KAAV,CAAgBC,KAAhB,CAAsBI,KAAtB,GAA+B,QAAOpB,SAAS,CAACe,KAAV,CAAgBC,KAAhB,CAAsBI,KAAtB,IAA+B,MAAO,MAAKD,uBAAwB,KAAzG;MACD;;MACDhB,oBAAoB,CAACc,QAArB,GAAgCC,WAAW,CAACD,QAA5C;MACAjB,SAAS,CAACe,KAAV,CAAgBC,KAAhB,CAAsBC,QAAtB,GAAiC,QAAjC;IACD;EACF,CAZD;;EAaA,MAAMI,mBAAmB,GAAG,MAAM;IAChC,IAAIrB,SAAS,CAACe,KAAV,IAAmBb,uBAAvB,EAAgD;MAC9C,MAAMgB,WAAW,GAAGf,oBAApB;MACAmB,MAAM,CAACC,IAAP,CAAYL,WAAZ,EAAyBM,OAAzB,CAAkCC,CAAD,IAAO;QACtCzB,SAAS,CAACe,KAAV,CAAgBC,KAAhB,CAAsBS,CAAtB,IAA2BP,WAAW,CAACO,CAAD,CAAtC;MACD,CAFD;IAGD;;IACDvB,uBAAuB,GAAG,KAA1B;IACAC,oBAAoB,GAAG,EAAvB;EACD,CATD;;EAUAN,WAAW,CAAE6B,YAAD,IAAkB;IAC5BzB,MAAM,CAACc,KAAP,GAAeD,iBAAiB,EAAhC,GAAqCO,mBAAmB,EAAxD;IACAK,YAAY,CAAC,MAAM;MACjBL,mBAAmB;IACpB,CAFW,CAAZ;EAGD,CALU,CAAX;EAMA,OAAO,CAACA,mBAAD,EAAsBP,iBAAtB,CAAP;AACD;;AACD,SAAShB,sBAAsB,IAAI6B,OAAnC"},"metadata":{},"sourceType":"module"}