{"ast":null,"code":"var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\n\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\n\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\n\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\n\nimport { reactive, render, ref, createVNode } from \"vue\";\nimport { MESSAGE_TYPES } from \"../_utils/constant.js\";\nimport { getOverlay } from \"../_utils/dom.js\";\nimport { isString, isUndefined, isFunction } from \"../_utils/is.js\";\nimport MessageList from \"./message-list.js\";\n\nclass MessageManger {\n  constructor(config, appContext) {\n    this.messageCount = 0;\n\n    this.add = config2 => {\n      var _a;\n\n      this.messageCount++;\n      const id = (_a = config2.id) != null ? _a : `__arco_message_${this.messageCount}`;\n\n      if (this.messageIds.has(id)) {\n        return this.update(id, config2);\n      }\n\n      const message2 = reactive(__spreadValues({\n        id\n      }, config2));\n      this.messages.value.push(message2);\n      this.messageIds.add(id);\n      return {\n        close: () => this.remove(id)\n      };\n    };\n\n    this.update = (id, config2) => {\n      for (let i = 0; i < this.messages.value.length; i++) {\n        if (this.messages.value[i].id === id) {\n          const resetOnUpdate = !isUndefined(config2.duration);\n          Object.assign(this.messages.value[i], __spreadProps(__spreadValues({}, config2), {\n            id,\n            resetOnUpdate\n          }));\n          break;\n        }\n      }\n\n      return {\n        close: () => this.remove(id)\n      };\n    };\n\n    this.remove = id => {\n      for (let i = 0; i < this.messages.value.length; i++) {\n        const item = this.messages.value[i];\n\n        if (item.id === id) {\n          if (isFunction(item.onClose)) {\n            item.onClose(id);\n          }\n\n          this.messages.value.splice(i, 1);\n          this.messageIds.delete(id);\n          break;\n        }\n      }\n    };\n\n    this.clear = () => {\n      this.messages.value.splice(0);\n    };\n\n    this.destroy = () => {\n      if (this.messages.value.length === 0 && this.container) {\n        render(null, this.container);\n        document.body.removeChild(this.container);\n        this.container = null;\n        messageInstance[this.position] = void 0;\n      }\n    };\n\n    const {\n      position = \"top\"\n    } = config;\n    this.container = getOverlay(\"message\");\n    this.messageIds = new Set();\n    this.messages = ref([]);\n    this.position = position;\n    const vm = createVNode(MessageList, {\n      messages: this.messages.value,\n      position,\n      onClose: this.remove,\n      onAfterClose: this.destroy\n    });\n\n    if (appContext != null ? appContext : Message._context) {\n      vm.appContext = appContext != null ? appContext : Message._context;\n    }\n\n    render(vm, this.container);\n    document.body.appendChild(this.container);\n  }\n\n}\n\nconst messageInstance = {};\nconst types = [...MESSAGE_TYPES, \"loading\"];\nconst message = types.reduce((pre, value) => {\n  pre[value] = (config, appContext) => {\n    if (isString(config)) {\n      config = {\n        content: config\n      };\n    }\n\n    const _config = __spreadValues({\n      type: value\n    }, config);\n\n    const {\n      position = \"top\"\n    } = _config;\n\n    if (!messageInstance[position]) {\n      messageInstance[position] = new MessageManger(_config, appContext);\n    }\n\n    return messageInstance[position].add(_config);\n  };\n\n  return pre;\n}, {});\n\nmessage.clear = position => {\n  var _a;\n\n  if (position) {\n    (_a = messageInstance[position]) == null ? void 0 : _a.clear();\n  } else {\n    Object.values(messageInstance).forEach(item => item == null ? void 0 : item.clear());\n  }\n};\n\nconst Message = __spreadProps(__spreadValues({}, message), {\n  install: app => {\n    const _message = {\n      clear: message.clear\n    };\n\n    for (const key of types) {\n      _message[key] = (config, appContext = app._context) => message[key](config, appContext);\n    }\n\n    app.config.globalProperties.$message = _message;\n  },\n  _context: null\n});\n\nexport { Message as default };","map":{"version":3,"names":["__defProp","Object","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","__spreadProps","reactive","render","ref","createVNode","MESSAGE_TYPES","getOverlay","isString","isUndefined","isFunction","MessageList","MessageManger","constructor","config","appContext","messageCount","add","config2","_a","id","messageIds","has","update","message2","messages","push","close","remove","i","length","resetOnUpdate","duration","assign","item","onClose","splice","delete","clear","destroy","container","document","body","removeChild","messageInstance","position","Set","vm","onAfterClose","Message","_context","appendChild","types","message","reduce","pre","content","_config","type","values","forEach","install","app","_message","globalProperties","$message","default"],"sources":["/www/wwwroot/admin/node_modules/@arco-design/web-vue/es/message/index.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nimport { reactive, render, ref, createVNode } from \"vue\";\nimport { MESSAGE_TYPES } from \"../_utils/constant.js\";\nimport { getOverlay } from \"../_utils/dom.js\";\nimport { isString, isUndefined, isFunction } from \"../_utils/is.js\";\nimport MessageList from \"./message-list.js\";\nclass MessageManger {\n  constructor(config, appContext) {\n    this.messageCount = 0;\n    this.add = (config2) => {\n      var _a;\n      this.messageCount++;\n      const id = (_a = config2.id) != null ? _a : `__arco_message_${this.messageCount}`;\n      if (this.messageIds.has(id)) {\n        return this.update(id, config2);\n      }\n      const message2 = reactive(__spreadValues({ id }, config2));\n      this.messages.value.push(message2);\n      this.messageIds.add(id);\n      return {\n        close: () => this.remove(id)\n      };\n    };\n    this.update = (id, config2) => {\n      for (let i = 0; i < this.messages.value.length; i++) {\n        if (this.messages.value[i].id === id) {\n          const resetOnUpdate = !isUndefined(config2.duration);\n          Object.assign(this.messages.value[i], __spreadProps(__spreadValues({}, config2), { id, resetOnUpdate }));\n          break;\n        }\n      }\n      return {\n        close: () => this.remove(id)\n      };\n    };\n    this.remove = (id) => {\n      for (let i = 0; i < this.messages.value.length; i++) {\n        const item = this.messages.value[i];\n        if (item.id === id) {\n          if (isFunction(item.onClose)) {\n            item.onClose(id);\n          }\n          this.messages.value.splice(i, 1);\n          this.messageIds.delete(id);\n          break;\n        }\n      }\n    };\n    this.clear = () => {\n      this.messages.value.splice(0);\n    };\n    this.destroy = () => {\n      if (this.messages.value.length === 0 && this.container) {\n        render(null, this.container);\n        document.body.removeChild(this.container);\n        this.container = null;\n        messageInstance[this.position] = void 0;\n      }\n    };\n    const { position = \"top\" } = config;\n    this.container = getOverlay(\"message\");\n    this.messageIds = new Set();\n    this.messages = ref([]);\n    this.position = position;\n    const vm = createVNode(MessageList, {\n      messages: this.messages.value,\n      position,\n      onClose: this.remove,\n      onAfterClose: this.destroy\n    });\n    if (appContext != null ? appContext : Message._context) {\n      vm.appContext = appContext != null ? appContext : Message._context;\n    }\n    render(vm, this.container);\n    document.body.appendChild(this.container);\n  }\n}\nconst messageInstance = {};\nconst types = [...MESSAGE_TYPES, \"loading\"];\nconst message = types.reduce((pre, value) => {\n  pre[value] = (config, appContext) => {\n    if (isString(config)) {\n      config = { content: config };\n    }\n    const _config = __spreadValues({ type: value }, config);\n    const { position = \"top\" } = _config;\n    if (!messageInstance[position]) {\n      messageInstance[position] = new MessageManger(_config, appContext);\n    }\n    return messageInstance[position].add(_config);\n  };\n  return pre;\n}, {});\nmessage.clear = (position) => {\n  var _a;\n  if (position) {\n    (_a = messageInstance[position]) == null ? void 0 : _a.clear();\n  } else {\n    Object.values(messageInstance).forEach((item) => item == null ? void 0 : item.clear());\n  }\n};\nconst Message = __spreadProps(__spreadValues({}, message), {\n  install: (app) => {\n    const _message = {\n      clear: message.clear\n    };\n    for (const key of types) {\n      _message[key] = (config, appContext = app._context) => message[key](config, appContext);\n    }\n    app.config.globalProperties.$message = _message;\n  },\n  _context: null\n});\nexport { Message as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}