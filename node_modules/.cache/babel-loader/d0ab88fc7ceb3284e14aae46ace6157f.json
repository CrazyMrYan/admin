{"ast":null,"code":"import { ref } from \"vue\";\nimport { on, off } from \"../../_utils/dom.js\";\n\nconst useDraggable = ({\n  modalRef,\n  wrapperRef,\n  draggable\n}) => {\n  const isDragging = ref(false);\n  const startMouse = ref([0, 0]);\n  const diffMouse = ref([0, 0]);\n  const initialPosition = ref([0, 0]);\n  const position = ref();\n  const maxPosition = ref([0, 0]);\n\n  const getInitialPosition = () => {\n    var _a, _b;\n\n    if (wrapperRef.value && modalRef.value) {\n      const {\n        top: wrapperTop,\n        left: wrapperLeft\n      } = wrapperRef.value.getBoundingClientRect();\n      const {\n        clientWidth: wrapperWidth,\n        clientHeight: wrapperHeight\n      } = wrapperRef.value;\n      const {\n        top,\n        left,\n        width,\n        height\n      } = modalRef.value.getBoundingClientRect();\n      const initialX = left - wrapperLeft;\n      const initialY = top - wrapperTop;\n\n      if (initialX !== ((_a = initialPosition.value) == null ? void 0 : _a[0]) || initialY !== ((_b = initialPosition.value) == null ? void 0 : _b[1])) {\n        initialPosition.value = [initialX, initialY];\n      }\n\n      const maxX = wrapperWidth > width ? wrapperWidth - width : 0;\n      const maxY = wrapperHeight > height ? wrapperHeight - height : 0;\n\n      if (maxX !== maxPosition.value[0] || maxY !== maxPosition.value[1]) {\n        maxPosition.value = [maxX, maxY];\n      }\n    }\n  };\n\n  const handleMoveDown = ev => {\n    if (draggable.value) {\n      ev.preventDefault();\n      isDragging.value = true;\n      getInitialPosition();\n      startMouse.value = [ev.x, ev.y];\n      diffMouse.value = [0, 0];\n      on(window, \"mousemove\", handleMouseMove);\n      on(window, \"mouseup\", handleMouseUp);\n      on(window, \"contextmenu\", handleMouseUp);\n    }\n  };\n\n  const handleMouseMove = ev => {\n    if (isDragging.value) {\n      const diffX = ev.x - startMouse.value[0];\n      const diffY = ev.y - startMouse.value[1];\n      let x = initialPosition.value[0] + diffX;\n      let y = initialPosition.value[1] + diffY;\n      if (x < 0) x = 0;\n      if (x > maxPosition.value[0]) x = maxPosition.value[0];\n      if (y < 0) y = 0;\n      if (y > maxPosition.value[1]) y = maxPosition.value[1];\n      position.value = [x, y];\n    }\n  };\n\n  const handleMouseUp = () => {\n    isDragging.value = false;\n    off(window, \"mousemove\", handleMouseMove);\n    off(window, \"mouseup\", handleMouseUp);\n  };\n\n  return {\n    position,\n    handleMoveDown\n  };\n};\n\nexport { useDraggable };","map":{"version":3,"names":["ref","on","off","useDraggable","modalRef","wrapperRef","draggable","isDragging","startMouse","diffMouse","initialPosition","position","maxPosition","getInitialPosition","_a","_b","value","top","wrapperTop","left","wrapperLeft","getBoundingClientRect","clientWidth","wrapperWidth","clientHeight","wrapperHeight","width","height","initialX","initialY","maxX","maxY","handleMoveDown","ev","preventDefault","x","y","window","handleMouseMove","handleMouseUp","diffX","diffY"],"sources":["/www/wwwroot/admin/node_modules/@arco-design/web-vue/es/modal/hooks/use-draggable.js"],"sourcesContent":["import { ref } from \"vue\";\nimport { on, off } from \"../../_utils/dom.js\";\nconst useDraggable = ({\n  modalRef,\n  wrapperRef,\n  draggable\n}) => {\n  const isDragging = ref(false);\n  const startMouse = ref([0, 0]);\n  const diffMouse = ref([0, 0]);\n  const initialPosition = ref([0, 0]);\n  const position = ref();\n  const maxPosition = ref([0, 0]);\n  const getInitialPosition = () => {\n    var _a, _b;\n    if (wrapperRef.value && modalRef.value) {\n      const { top: wrapperTop, left: wrapperLeft } = wrapperRef.value.getBoundingClientRect();\n      const { clientWidth: wrapperWidth, clientHeight: wrapperHeight } = wrapperRef.value;\n      const { top, left, width, height } = modalRef.value.getBoundingClientRect();\n      const initialX = left - wrapperLeft;\n      const initialY = top - wrapperTop;\n      if (initialX !== ((_a = initialPosition.value) == null ? void 0 : _a[0]) || initialY !== ((_b = initialPosition.value) == null ? void 0 : _b[1])) {\n        initialPosition.value = [initialX, initialY];\n      }\n      const maxX = wrapperWidth > width ? wrapperWidth - width : 0;\n      const maxY = wrapperHeight > height ? wrapperHeight - height : 0;\n      if (maxX !== maxPosition.value[0] || maxY !== maxPosition.value[1]) {\n        maxPosition.value = [maxX, maxY];\n      }\n    }\n  };\n  const handleMoveDown = (ev) => {\n    if (draggable.value) {\n      ev.preventDefault();\n      isDragging.value = true;\n      getInitialPosition();\n      startMouse.value = [ev.x, ev.y];\n      diffMouse.value = [0, 0];\n      on(window, \"mousemove\", handleMouseMove);\n      on(window, \"mouseup\", handleMouseUp);\n      on(window, \"contextmenu\", handleMouseUp);\n    }\n  };\n  const handleMouseMove = (ev) => {\n    if (isDragging.value) {\n      const diffX = ev.x - startMouse.value[0];\n      const diffY = ev.y - startMouse.value[1];\n      let x = initialPosition.value[0] + diffX;\n      let y = initialPosition.value[1] + diffY;\n      if (x < 0)\n        x = 0;\n      if (x > maxPosition.value[0])\n        x = maxPosition.value[0];\n      if (y < 0)\n        y = 0;\n      if (y > maxPosition.value[1])\n        y = maxPosition.value[1];\n      position.value = [x, y];\n    }\n  };\n  const handleMouseUp = () => {\n    isDragging.value = false;\n    off(window, \"mousemove\", handleMouseMove);\n    off(window, \"mouseup\", handleMouseUp);\n  };\n  return {\n    position,\n    handleMoveDown\n  };\n};\nexport { useDraggable };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}