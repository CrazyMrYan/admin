{"ast":null,"code":"import { toRefs, ref, computed, watch } from \"vue\";\nconst DEFAULT_ITEM_HEIGHT = 32;\n\nfunction useItemHeight(props) {\n  const {\n    estimatedItemHeight: propEstimatedItemHeight,\n    data\n  } = toRefs(props);\n  const itemHeightCacheMap = ref(new Map());\n  const estimatedItemHeight = ref(propEstimatedItemHeight == null ? void 0 : propEstimatedItemHeight.value);\n  const itemLength = computed(() => itemHeightCacheMap.value.size);\n  watch(itemLength, () => {\n    if (itemLength.value && !estimatedItemHeight.value) {\n      estimatedItemHeight.value = [...itemHeightCacheMap.value.entries()].reduce((sum, [, height]) => sum + height, 0) / itemLength.value;\n    }\n  });\n  const itemHeight = computed(() => estimatedItemHeight.value || DEFAULT_ITEM_HEIGHT);\n  const minItemHeight = computed(() => Math.min(itemHeight.value, DEFAULT_ITEM_HEIGHT));\n  const totalHeight = computed(() => itemHeight.value * data.value.length);\n\n  function setItemHeight(key, height) {\n    itemHeightCacheMap.value.set(key, height);\n  }\n\n  function getItemHeight(key) {\n    return itemHeightCacheMap.value.get(key);\n  }\n\n  function getItemHeightOrDefault(key) {\n    return itemHeightCacheMap.value.get(key) || itemHeight.value;\n  }\n\n  function getItemHeightByIndex(index) {\n    const {\n      key\n    } = data.value[index];\n    return itemHeightCacheMap.value.get(key);\n  }\n\n  function getItemHeightOrDefaultByIndex(index) {\n    return getItemHeightByIndex(index) || itemHeight.value;\n  }\n\n  return {\n    itemHeight,\n    minItemHeight,\n    estimatedItemHeight,\n    totalHeight,\n    setItemHeight,\n    getItemHeight,\n    getItemHeightOrDefault,\n    getItemHeightByIndex,\n    getItemHeightOrDefaultByIndex\n  };\n}\n\nexport { useItemHeight };","map":{"version":3,"names":["toRefs","ref","computed","watch","DEFAULT_ITEM_HEIGHT","useItemHeight","props","estimatedItemHeight","propEstimatedItemHeight","data","itemHeightCacheMap","Map","value","itemLength","size","entries","reduce","sum","height","itemHeight","minItemHeight","Math","min","totalHeight","length","setItemHeight","key","set","getItemHeight","get","getItemHeightOrDefault","getItemHeightByIndex","index","getItemHeightOrDefaultByIndex"],"sources":["/www/wwwroot/admin/node_modules/@arco-design/web-vue/es/_components/virtual-list/hooks/use-item-height.js"],"sourcesContent":["import { toRefs, ref, computed, watch } from \"vue\";\nconst DEFAULT_ITEM_HEIGHT = 32;\nfunction useItemHeight(props) {\n  const { estimatedItemHeight: propEstimatedItemHeight, data } = toRefs(props);\n  const itemHeightCacheMap = ref(new Map());\n  const estimatedItemHeight = ref(propEstimatedItemHeight == null ? void 0 : propEstimatedItemHeight.value);\n  const itemLength = computed(() => itemHeightCacheMap.value.size);\n  watch(itemLength, () => {\n    if (itemLength.value && !estimatedItemHeight.value) {\n      estimatedItemHeight.value = [...itemHeightCacheMap.value.entries()].reduce((sum, [, height]) => sum + height, 0) / itemLength.value;\n    }\n  });\n  const itemHeight = computed(() => estimatedItemHeight.value || DEFAULT_ITEM_HEIGHT);\n  const minItemHeight = computed(() => Math.min(itemHeight.value, DEFAULT_ITEM_HEIGHT));\n  const totalHeight = computed(() => itemHeight.value * data.value.length);\n  function setItemHeight(key, height) {\n    itemHeightCacheMap.value.set(key, height);\n  }\n  function getItemHeight(key) {\n    return itemHeightCacheMap.value.get(key);\n  }\n  function getItemHeightOrDefault(key) {\n    return itemHeightCacheMap.value.get(key) || itemHeight.value;\n  }\n  function getItemHeightByIndex(index) {\n    const { key } = data.value[index];\n    return itemHeightCacheMap.value.get(key);\n  }\n  function getItemHeightOrDefaultByIndex(index) {\n    return getItemHeightByIndex(index) || itemHeight.value;\n  }\n  return {\n    itemHeight,\n    minItemHeight,\n    estimatedItemHeight,\n    totalHeight,\n    setItemHeight,\n    getItemHeight,\n    getItemHeightOrDefault,\n    getItemHeightByIndex,\n    getItemHeightOrDefaultByIndex\n  };\n}\nexport { useItemHeight };\n"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,GAAjB,EAAsBC,QAAtB,EAAgCC,KAAhC,QAA6C,KAA7C;AACA,MAAMC,mBAAmB,GAAG,EAA5B;;AACA,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;EAC5B,MAAM;IAAEC,mBAAmB,EAAEC,uBAAvB;IAAgDC;EAAhD,IAAyDT,MAAM,CAACM,KAAD,CAArE;EACA,MAAMI,kBAAkB,GAAGT,GAAG,CAAC,IAAIU,GAAJ,EAAD,CAA9B;EACA,MAAMJ,mBAAmB,GAAGN,GAAG,CAACO,uBAAuB,IAAI,IAA3B,GAAkC,KAAK,CAAvC,GAA2CA,uBAAuB,CAACI,KAApE,CAA/B;EACA,MAAMC,UAAU,GAAGX,QAAQ,CAAC,MAAMQ,kBAAkB,CAACE,KAAnB,CAAyBE,IAAhC,CAA3B;EACAX,KAAK,CAACU,UAAD,EAAa,MAAM;IACtB,IAAIA,UAAU,CAACD,KAAX,IAAoB,CAACL,mBAAmB,CAACK,KAA7C,EAAoD;MAClDL,mBAAmB,CAACK,KAApB,GAA4B,CAAC,GAAGF,kBAAkB,CAACE,KAAnB,CAAyBG,OAAzB,EAAJ,EAAwCC,MAAxC,CAA+C,CAACC,GAAD,EAAM,GAAGC,MAAH,CAAN,KAAqBD,GAAG,GAAGC,MAA1E,EAAkF,CAAlF,IAAuFL,UAAU,CAACD,KAA9H;IACD;EACF,CAJI,CAAL;EAKA,MAAMO,UAAU,GAAGjB,QAAQ,CAAC,MAAMK,mBAAmB,CAACK,KAApB,IAA6BR,mBAApC,CAA3B;EACA,MAAMgB,aAAa,GAAGlB,QAAQ,CAAC,MAAMmB,IAAI,CAACC,GAAL,CAASH,UAAU,CAACP,KAApB,EAA2BR,mBAA3B,CAAP,CAA9B;EACA,MAAMmB,WAAW,GAAGrB,QAAQ,CAAC,MAAMiB,UAAU,CAACP,KAAX,GAAmBH,IAAI,CAACG,KAAL,CAAWY,MAArC,CAA5B;;EACA,SAASC,aAAT,CAAuBC,GAAvB,EAA4BR,MAA5B,EAAoC;IAClCR,kBAAkB,CAACE,KAAnB,CAAyBe,GAAzB,CAA6BD,GAA7B,EAAkCR,MAAlC;EACD;;EACD,SAASU,aAAT,CAAuBF,GAAvB,EAA4B;IAC1B,OAAOhB,kBAAkB,CAACE,KAAnB,CAAyBiB,GAAzB,CAA6BH,GAA7B,CAAP;EACD;;EACD,SAASI,sBAAT,CAAgCJ,GAAhC,EAAqC;IACnC,OAAOhB,kBAAkB,CAACE,KAAnB,CAAyBiB,GAAzB,CAA6BH,GAA7B,KAAqCP,UAAU,CAACP,KAAvD;EACD;;EACD,SAASmB,oBAAT,CAA8BC,KAA9B,EAAqC;IACnC,MAAM;MAAEN;IAAF,IAAUjB,IAAI,CAACG,KAAL,CAAWoB,KAAX,CAAhB;IACA,OAAOtB,kBAAkB,CAACE,KAAnB,CAAyBiB,GAAzB,CAA6BH,GAA7B,CAAP;EACD;;EACD,SAASO,6BAAT,CAAuCD,KAAvC,EAA8C;IAC5C,OAAOD,oBAAoB,CAACC,KAAD,CAApB,IAA+Bb,UAAU,CAACP,KAAjD;EACD;;EACD,OAAO;IACLO,UADK;IAELC,aAFK;IAGLb,mBAHK;IAILgB,WAJK;IAKLE,aALK;IAMLG,aANK;IAOLE,sBAPK;IAQLC,oBARK;IASLE;EATK,CAAP;AAWD;;AACD,SAAS5B,aAAT"},"metadata":{},"sourceType":"module"}