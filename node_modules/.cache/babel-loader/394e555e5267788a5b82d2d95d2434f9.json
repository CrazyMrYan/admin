{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { defineComponent, inject, computed, createVNode } from \"vue\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport { getOperationStyle, getOperationFixedCls, getLeafKeys, getSelectionStatus } from \"./utils.js\";\nimport Checkbox from \"../checkbox/index.js\";\nimport Radio from \"../radio/index.js\";\nimport IconPlus from \"../icon/icon-plus/index.js\";\nimport IconMinus from \"../icon/icon-minus/index.js\";\nimport IconDragDotVertical from \"../icon/icon-drag-dot-vertical/index.js\";\nimport { tableInjectionKey } from \"./context.js\";\nvar OperationTd = defineComponent({\n  name: \"OperationTd\",\n  components: {\n    Checkbox,\n    Radio,\n    IconPlus,\n    IconMinus\n  },\n  props: {\n    operationColumn: {\n      type: Object,\n      required: true\n    },\n    operations: {\n      type: Array,\n      required: true\n    },\n    record: {\n      type: Object,\n      required: true\n    },\n    hasExpand: {\n      type: Boolean,\n      default: false\n    },\n    selectedRowKeys: {\n      type: Array\n    },\n    renderExpandBtn: {\n      type: Function\n    },\n    colSpan: {\n      type: Number,\n      default: 1\n    },\n    rowSpan: {\n      type: Number,\n      default: 1\n    },\n    summary: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"select\"],\n\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const prefixCls = getPrefixCls(\"table\");\n    const tableCtx = inject(tableInjectionKey, {});\n    const style = computed(() => getOperationStyle(props.operationColumn, props.operations));\n    const cls = computed(() => [`${prefixCls}-td`, `${prefixCls}-operation`, {\n      [`${prefixCls}-checkbox`]: props.operationColumn.name === \"selection-checkbox\",\n      [`${prefixCls}-radio`]: props.operationColumn.name === \"selection-radio\",\n      [`${prefixCls}-expand`]: props.operationColumn.name === \"expand\",\n      [`${prefixCls}-drag-handle`]: props.operationColumn.name === \"drag-handle\"\n    }, ...getOperationFixedCls(prefixCls, props.operationColumn)]);\n    const leafKeys = computed(() => getLeafKeys(props.record));\n    const selectionStatus = computed(() => {\n      var _a;\n\n      return getSelectionStatus((_a = tableCtx.currentSelectedRowKeys) != null ? _a : [], leafKeys.value);\n    });\n\n    const renderContent = () => {\n      var _a, _b, _c, _d, _e, _f;\n\n      if (props.summary) {\n        return null;\n      }\n\n      if (props.operationColumn.render) {\n        return props.operationColumn.render(props.record.raw);\n      }\n\n      if (props.operationColumn.name === \"selection-checkbox\") {\n        const value = props.record.key;\n\n        if (!tableCtx.checkStrictly && !props.record.isLeaf) {\n          return createVNode(Checkbox, {\n            \"modelValue\": selectionStatus.value.checked,\n            \"indeterminate\": selectionStatus.value.indeterminate,\n            \"disabled\": Boolean(props.record.disabled),\n            \"uninjectGroupContext\": true,\n            \"onChange\": checked => {\n              var _a2;\n\n              return (_a2 = tableCtx.onSelectAllLeafs) == null ? void 0 : _a2.call(tableCtx, props.record, checked);\n            },\n            \"onClick\": ev => ev.stopPropagation()\n          }, null);\n        }\n\n        return createVNode(Checkbox, {\n          \"modelValue\": (_b = (_a = props.selectedRowKeys) == null ? void 0 : _a.includes(value)) != null ? _b : false,\n          \"disabled\": Boolean(props.record.disabled),\n          \"uninjectGroupContext\": true,\n          \"onChange\": checked => {\n            var _a2;\n\n            return (_a2 = tableCtx.onSelect) == null ? void 0 : _a2.call(tableCtx, checked, props.record);\n          },\n          \"onClick\": ev => ev.stopPropagation()\n        }, null);\n      }\n\n      if (props.operationColumn.name === \"selection-radio\") {\n        const value = props.record.key;\n        return createVNode(Radio, {\n          \"modelValue\": (_d = (_c = props.selectedRowKeys) == null ? void 0 : _c.includes(value)) != null ? _d : false,\n          \"disabled\": Boolean(props.record.disabled),\n          \"uninjectGroupContext\": true,\n          \"onChange\": checked => {\n            var _a2;\n\n            return (_a2 = tableCtx.onSelect) == null ? void 0 : _a2.call(tableCtx, checked, props.record);\n          },\n          \"onClick\": ev => ev.stopPropagation()\n        }, null);\n      }\n\n      if (props.operationColumn.name === \"expand\") {\n        if (props.hasExpand && props.renderExpandBtn) {\n          return props.renderExpandBtn(props.record);\n        }\n\n        return null;\n      }\n\n      if (props.operationColumn.name === \"drag-handle\") {\n        return (_f = (_e = slots[\"drag-handle-icon\"]) == null ? void 0 : _e.call(slots)) != null ? _f : createVNode(IconDragDotVertical, null, null);\n      }\n\n      return null;\n    };\n\n    return () => createVNode(\"td\", {\n      \"class\": cls.value,\n      \"style\": style.value,\n      \"rowspan\": props.rowSpan > 1 ? props.rowSpan : void 0,\n      \"colspan\": props.colSpan > 1 ? props.colSpan : void 0\n    }, [createVNode(\"span\", {\n      \"class\": `${prefixCls}-cell`\n    }, [renderContent()])]);\n  }\n\n});\nexport { OperationTd as default };","map":{"version":3,"names":["defineComponent","inject","computed","createVNode","getPrefixCls","getOperationStyle","getOperationFixedCls","getLeafKeys","getSelectionStatus","Checkbox","Radio","IconPlus","IconMinus","IconDragDotVertical","tableInjectionKey","OperationTd","name","components","props","operationColumn","type","Object","required","operations","Array","record","hasExpand","Boolean","default","selectedRowKeys","renderExpandBtn","Function","colSpan","Number","rowSpan","summary","emits","setup","emit","slots","prefixCls","tableCtx","style","cls","leafKeys","selectionStatus","_a","currentSelectedRowKeys","value","renderContent","_b","_c","_d","_e","_f","render","raw","key","checkStrictly","isLeaf","checked","indeterminate","disabled","_a2","onSelectAllLeafs","call","ev","stopPropagation","includes","onSelect"],"sources":["/www/wwwroot/admin/node_modules/@arco-design/web-vue/es/table/table-operation-td.js"],"sourcesContent":["import { defineComponent, inject, computed, createVNode } from \"vue\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport { getOperationStyle, getOperationFixedCls, getLeafKeys, getSelectionStatus } from \"./utils.js\";\nimport Checkbox from \"../checkbox/index.js\";\nimport Radio from \"../radio/index.js\";\nimport IconPlus from \"../icon/icon-plus/index.js\";\nimport IconMinus from \"../icon/icon-minus/index.js\";\nimport IconDragDotVertical from \"../icon/icon-drag-dot-vertical/index.js\";\nimport { tableInjectionKey } from \"./context.js\";\nvar OperationTd = defineComponent({\n  name: \"OperationTd\",\n  components: {\n    Checkbox,\n    Radio,\n    IconPlus,\n    IconMinus\n  },\n  props: {\n    operationColumn: {\n      type: Object,\n      required: true\n    },\n    operations: {\n      type: Array,\n      required: true\n    },\n    record: {\n      type: Object,\n      required: true\n    },\n    hasExpand: {\n      type: Boolean,\n      default: false\n    },\n    selectedRowKeys: {\n      type: Array\n    },\n    renderExpandBtn: {\n      type: Function\n    },\n    colSpan: {\n      type: Number,\n      default: 1\n    },\n    rowSpan: {\n      type: Number,\n      default: 1\n    },\n    summary: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"select\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const prefixCls = getPrefixCls(\"table\");\n    const tableCtx = inject(tableInjectionKey, {});\n    const style = computed(() => getOperationStyle(props.operationColumn, props.operations));\n    const cls = computed(() => [`${prefixCls}-td`, `${prefixCls}-operation`, {\n      [`${prefixCls}-checkbox`]: props.operationColumn.name === \"selection-checkbox\",\n      [`${prefixCls}-radio`]: props.operationColumn.name === \"selection-radio\",\n      [`${prefixCls}-expand`]: props.operationColumn.name === \"expand\",\n      [`${prefixCls}-drag-handle`]: props.operationColumn.name === \"drag-handle\"\n    }, ...getOperationFixedCls(prefixCls, props.operationColumn)]);\n    const leafKeys = computed(() => getLeafKeys(props.record));\n    const selectionStatus = computed(() => {\n      var _a;\n      return getSelectionStatus((_a = tableCtx.currentSelectedRowKeys) != null ? _a : [], leafKeys.value);\n    });\n    const renderContent = () => {\n      var _a, _b, _c, _d, _e, _f;\n      if (props.summary) {\n        return null;\n      }\n      if (props.operationColumn.render) {\n        return props.operationColumn.render(props.record.raw);\n      }\n      if (props.operationColumn.name === \"selection-checkbox\") {\n        const value = props.record.key;\n        if (!tableCtx.checkStrictly && !props.record.isLeaf) {\n          return createVNode(Checkbox, {\n            \"modelValue\": selectionStatus.value.checked,\n            \"indeterminate\": selectionStatus.value.indeterminate,\n            \"disabled\": Boolean(props.record.disabled),\n            \"uninjectGroupContext\": true,\n            \"onChange\": (checked) => {\n              var _a2;\n              return (_a2 = tableCtx.onSelectAllLeafs) == null ? void 0 : _a2.call(tableCtx, props.record, checked);\n            },\n            \"onClick\": (ev) => ev.stopPropagation()\n          }, null);\n        }\n        return createVNode(Checkbox, {\n          \"modelValue\": (_b = (_a = props.selectedRowKeys) == null ? void 0 : _a.includes(value)) != null ? _b : false,\n          \"disabled\": Boolean(props.record.disabled),\n          \"uninjectGroupContext\": true,\n          \"onChange\": (checked) => {\n            var _a2;\n            return (_a2 = tableCtx.onSelect) == null ? void 0 : _a2.call(tableCtx, checked, props.record);\n          },\n          \"onClick\": (ev) => ev.stopPropagation()\n        }, null);\n      }\n      if (props.operationColumn.name === \"selection-radio\") {\n        const value = props.record.key;\n        return createVNode(Radio, {\n          \"modelValue\": (_d = (_c = props.selectedRowKeys) == null ? void 0 : _c.includes(value)) != null ? _d : false,\n          \"disabled\": Boolean(props.record.disabled),\n          \"uninjectGroupContext\": true,\n          \"onChange\": (checked) => {\n            var _a2;\n            return (_a2 = tableCtx.onSelect) == null ? void 0 : _a2.call(tableCtx, checked, props.record);\n          },\n          \"onClick\": (ev) => ev.stopPropagation()\n        }, null);\n      }\n      if (props.operationColumn.name === \"expand\") {\n        if (props.hasExpand && props.renderExpandBtn) {\n          return props.renderExpandBtn(props.record);\n        }\n        return null;\n      }\n      if (props.operationColumn.name === \"drag-handle\") {\n        return (_f = (_e = slots[\"drag-handle-icon\"]) == null ? void 0 : _e.call(slots)) != null ? _f : createVNode(IconDragDotVertical, null, null);\n      }\n      return null;\n    };\n    return () => createVNode(\"td\", {\n      \"class\": cls.value,\n      \"style\": style.value,\n      \"rowspan\": props.rowSpan > 1 ? props.rowSpan : void 0,\n      \"colspan\": props.colSpan > 1 ? props.colSpan : void 0\n    }, [createVNode(\"span\", {\n      \"class\": `${prefixCls}-cell`\n    }, [renderContent()])]);\n  }\n});\nexport { OperationTd as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}