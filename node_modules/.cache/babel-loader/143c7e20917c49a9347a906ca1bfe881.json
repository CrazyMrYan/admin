{"ast":null,"code":"import { defineComponent, toRefs, ref, watch, onMounted, onBeforeUnmount, openBlock, createElementBlock, normalizeClass, renderSlot, createTextVNode, toDisplayString, createCommentVNode, createElementVNode, normalizeStyle } from \"vue\";\nimport originDayjs from \"dayjs\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport { getDateString } from \"./utils.js\";\nimport _export_sfc from \"../_virtual/plugin-vue_export-helper.js\";\n\nconst _sfc_main = defineComponent({\n  name: \"Countdown\",\n  props: {\n    title: String,\n    value: {\n      type: Number,\n      default: () => Date.now() + 3e5\n    },\n    now: {\n      type: Number,\n      default: () => Date.now()\n    },\n    format: {\n      type: String,\n      default: \"HH:mm:ss\"\n    },\n    start: {\n      type: Boolean,\n      default: true\n    },\n    valueStyle: {\n      type: Object\n    }\n  },\n  emits: {\n    finish: () => true\n  },\n\n  setup(props, {\n    emit\n  }) {\n    const prefixCls = getPrefixCls(\"statistic\");\n    const {\n      start,\n      value,\n      now,\n      format\n    } = toRefs(props);\n    const displayValue = ref(getDateString(Math.max(originDayjs(props.value).diff(originDayjs(props.now), \"millisecond\"), 0), props.format));\n    watch([value, now, format], () => {\n      const _value = getDateString(Math.max(originDayjs(props.value).diff(originDayjs(props.now), \"millisecond\"), 0), props.format);\n\n      if (_value !== displayValue.value) {\n        displayValue.value = _value;\n      }\n    });\n    const timer = ref(0);\n\n    const stopTimer = () => {\n      if (timer.value) {\n        window.clearInterval(timer.value);\n        timer.value = 0;\n      }\n    };\n\n    const startTimer = () => {\n      if (originDayjs(props.value).valueOf() < Date.now()) {\n        return;\n      }\n\n      timer.value = window.setInterval(() => {\n        const _value = originDayjs(props.value).diff(originDayjs(), \"millisecond\");\n\n        if (_value <= 0) {\n          stopTimer();\n          emit(\"finish\");\n        }\n\n        displayValue.value = getDateString(Math.max(_value, 0), props.format);\n      }, 1e3 / 30);\n    };\n\n    onMounted(() => {\n      if (props.start) {\n        startTimer();\n      }\n    });\n    onBeforeUnmount(() => {\n      stopTimer();\n    });\n    watch(start, value2 => {\n      if (value2 && !timer.value) {\n        startTimer();\n      }\n    });\n    return {\n      prefixCls,\n      displayValue\n    };\n  }\n\n});\n\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass([`${_ctx.prefixCls}`, `${_ctx.prefixCls}-countdown`])\n  }, [_ctx.title || _ctx.$slots.title ? (openBlock(), createElementBlock(\"div\", {\n    key: 0,\n    class: normalizeClass(`${_ctx.prefixCls}-title`)\n  }, [renderSlot(_ctx.$slots, \"title\", {}, () => [createTextVNode(toDisplayString(_ctx.title), 1)])], 2)) : createCommentVNode(\"v-if\", true), createElementVNode(\"div\", {\n    class: normalizeClass(`${_ctx.prefixCls}-content`)\n  }, [createElementVNode(\"div\", {\n    class: normalizeClass(`${_ctx.prefixCls}-value`),\n    style: normalizeStyle(_ctx.valueStyle)\n  }, toDisplayString(_ctx.displayValue), 7)], 2)], 2);\n}\n\nvar Countdown = /* @__PURE__ */_export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\n\nexport { Countdown as default };","map":{"version":3,"names":["defineComponent","toRefs","ref","watch","onMounted","onBeforeUnmount","openBlock","createElementBlock","normalizeClass","renderSlot","createTextVNode","toDisplayString","createCommentVNode","createElementVNode","normalizeStyle","originDayjs","getPrefixCls","getDateString","_export_sfc","_sfc_main","name","props","title","String","value","type","Number","default","Date","now","format","start","Boolean","valueStyle","Object","emits","finish","setup","emit","prefixCls","displayValue","Math","max","diff","_value","timer","stopTimer","window","clearInterval","startTimer","valueOf","setInterval","value2","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","class","$slots","key","style","Countdown"],"sources":["/www/wwwroot/admin/node_modules/@arco-design/web-vue/es/statistic/countdown.js"],"sourcesContent":["import { defineComponent, toRefs, ref, watch, onMounted, onBeforeUnmount, openBlock, createElementBlock, normalizeClass, renderSlot, createTextVNode, toDisplayString, createCommentVNode, createElementVNode, normalizeStyle } from \"vue\";\nimport originDayjs from \"dayjs\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport { getDateString } from \"./utils.js\";\nimport _export_sfc from \"../_virtual/plugin-vue_export-helper.js\";\nconst _sfc_main = defineComponent({\n  name: \"Countdown\",\n  props: {\n    title: String,\n    value: {\n      type: Number,\n      default: () => Date.now() + 3e5\n    },\n    now: {\n      type: Number,\n      default: () => Date.now()\n    },\n    format: {\n      type: String,\n      default: \"HH:mm:ss\"\n    },\n    start: {\n      type: Boolean,\n      default: true\n    },\n    valueStyle: {\n      type: Object\n    }\n  },\n  emits: {\n    finish: () => true\n  },\n  setup(props, { emit }) {\n    const prefixCls = getPrefixCls(\"statistic\");\n    const { start, value, now, format } = toRefs(props);\n    const displayValue = ref(getDateString(Math.max(originDayjs(props.value).diff(originDayjs(props.now), \"millisecond\"), 0), props.format));\n    watch([value, now, format], () => {\n      const _value = getDateString(Math.max(originDayjs(props.value).diff(originDayjs(props.now), \"millisecond\"), 0), props.format);\n      if (_value !== displayValue.value) {\n        displayValue.value = _value;\n      }\n    });\n    const timer = ref(0);\n    const stopTimer = () => {\n      if (timer.value) {\n        window.clearInterval(timer.value);\n        timer.value = 0;\n      }\n    };\n    const startTimer = () => {\n      if (originDayjs(props.value).valueOf() < Date.now()) {\n        return;\n      }\n      timer.value = window.setInterval(() => {\n        const _value = originDayjs(props.value).diff(originDayjs(), \"millisecond\");\n        if (_value <= 0) {\n          stopTimer();\n          emit(\"finish\");\n        }\n        displayValue.value = getDateString(Math.max(_value, 0), props.format);\n      }, 1e3 / 30);\n    };\n    onMounted(() => {\n      if (props.start) {\n        startTimer();\n      }\n    });\n    onBeforeUnmount(() => {\n      stopTimer();\n    });\n    watch(start, (value2) => {\n      if (value2 && !timer.value) {\n        startTimer();\n      }\n    });\n    return {\n      prefixCls,\n      displayValue\n    };\n  }\n});\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\n  return openBlock(), createElementBlock(\"div\", {\n    class: normalizeClass([`${_ctx.prefixCls}`, `${_ctx.prefixCls}-countdown`])\n  }, [\n    _ctx.title || _ctx.$slots.title ? (openBlock(), createElementBlock(\"div\", {\n      key: 0,\n      class: normalizeClass(`${_ctx.prefixCls}-title`)\n    }, [\n      renderSlot(_ctx.$slots, \"title\", {}, () => [\n        createTextVNode(toDisplayString(_ctx.title), 1)\n      ])\n    ], 2)) : createCommentVNode(\"v-if\", true),\n    createElementVNode(\"div\", {\n      class: normalizeClass(`${_ctx.prefixCls}-content`)\n    }, [\n      createElementVNode(\"div\", {\n        class: normalizeClass(`${_ctx.prefixCls}-value`),\n        style: normalizeStyle(_ctx.valueStyle)\n      }, toDisplayString(_ctx.displayValue), 7)\n    ], 2)\n  ], 2);\n}\nvar Countdown = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\nexport { Countdown as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}