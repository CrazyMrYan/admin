{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\n\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\n\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\n\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\n\nimport { defineComponent, inject, toRefs, computed, ref, watch, reactive, watchEffect, provide, onMounted, createVNode, Fragment, mergeProps, isVNode } from \"vue\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport { isObject, isFunction, isNumber, isUndefined, isNull, isString, isArray } from \"../_utils/is.js\";\nimport { getGroupColumns, spliceFromPath } from \"./utils.js\";\nimport { useRowSelection } from \"./hooks/use-row-selection.js\";\nimport { useExpand } from \"./hooks/use-expand.js\";\nimport { usePagination } from \"./hooks/use-pagination.js\";\nimport IconPlus from \"../icon/icon-plus/index.js\";\nimport IconMinus from \"../icon/icon-minus/index.js\";\nimport Spin from \"../spin/index.js\";\nimport Pagination from \"../pagination/index.js\";\nimport Empty from \"../empty/index.js\";\nimport ColGroup from \"./table-col-group.js\";\nimport Thead from \"./table-thead.js\";\nimport Tbody from \"./table-tbody.js\";\nimport Tr from \"./table-tr.js\";\nimport Th from \"./table-th.js\";\nimport Td from \"./table-td.js\";\nimport OperationTh from \"./table-operation-th.js\";\nimport OperationTd from \"./table-operation-td.js\";\nimport VirtualList from \"../_components/virtual-list/virtual-list.js\";\nimport ResizeObserver from \"../_components/resize-observer.js\";\nimport { omit } from \"../_utils/omit.js\";\nimport { configProviderInjectionKey } from \"../config-provider/context.js\";\nimport { useDrag } from \"./hooks/use-drag.js\";\nimport { useColumnResize } from \"./hooks/use-column-resize.js\";\nimport { tableInjectionKey } from \"./context.js\";\nimport { useFilter } from \"./hooks/use-filter.js\";\nimport { useSorter } from \"./hooks/use-sorter.js\";\nimport ClientOnly from \"../_components/client-only.js\";\nimport { useSpan } from \"./hooks/use-span.js\";\nimport { useChildrenComponents } from \"../_hooks/use-children-components.js\";\n\nfunction _isSlot(s) {\n  return typeof s === \"function\" || Object.prototype.toString.call(s) === \"[object Object]\" && !isVNode(s);\n}\n\nconst DEFAULT_BORDERED = {\n  wrapper: true,\n  cell: false,\n  headerCell: false,\n  bodyCell: false\n};\n\nvar _Table = defineComponent({\n  name: \"Table\",\n  props: {\n    columns: {\n      type: Array,\n      default: () => []\n    },\n    data: {\n      type: Array,\n      default: () => []\n    },\n    bordered: {\n      type: [Boolean, Object],\n      default: true\n    },\n    hoverable: {\n      type: Boolean,\n      default: true\n    },\n    stripe: {\n      type: Boolean,\n      default: false\n    },\n    size: {\n      type: String,\n      default: () => {\n        var _a, _b;\n\n        return (_b = (_a = inject(configProviderInjectionKey, void 0)) == null ? void 0 : _a.size) != null ? _b : \"large\";\n      }\n    },\n    tableLayoutFixed: {\n      type: Boolean,\n      default: false\n    },\n    loading: {\n      type: [Boolean, Object],\n      default: false\n    },\n    rowSelection: {\n      type: Object\n    },\n    expandable: {\n      type: Object\n    },\n    scroll: {\n      type: Object\n    },\n    pagination: {\n      type: [Boolean, Object],\n      default: true\n    },\n    pagePosition: {\n      type: String,\n      default: \"br\"\n    },\n    indentSize: {\n      type: Number,\n      default: 16\n    },\n    rowKey: {\n      type: String,\n      default: \"key\"\n    },\n    showHeader: {\n      type: Boolean,\n      default: true\n    },\n    virtualListProps: {\n      type: Object\n    },\n    spanMethod: {\n      type: Function\n    },\n    spanAll: {\n      type: Boolean,\n      default: false\n    },\n    components: {\n      type: Object\n    },\n    loadMore: {\n      type: Function\n    },\n    filterIconAlignLeft: {\n      type: Boolean,\n      default: false\n    },\n    hideExpandButtonOnEmpty: {\n      type: Boolean,\n      default: false\n    },\n    rowClass: {\n      type: [String, Array, Object]\n    },\n    draggable: {\n      type: Object\n    },\n    rowNumber: {\n      type: [Boolean, Object]\n    },\n    columnResizable: {\n      type: Boolean\n    },\n    summary: {\n      type: [Boolean, Function]\n    },\n    summaryText: {\n      type: String,\n      default: \"Summary\"\n    },\n    summarySpanMethod: {\n      type: Function\n    },\n    selectedKeys: {\n      type: Array\n    },\n    defaultSelectedKeys: {\n      type: Array\n    },\n    expandedKeys: {\n      type: Array\n    },\n    defaultExpandedKeys: {\n      type: Array\n    },\n    defaultExpandAllRows: {\n      type: Boolean,\n      default: false\n    },\n    stickyHeader: {\n      type: [Boolean, Number],\n      default: false\n    }\n  },\n  emits: {\n    \"update:selectedKeys\": rowKeys => true,\n    \"update:expandedKeys\": rowKeys => true,\n    \"expand\": (rowKey, record) => true,\n    \"expandedChange\": rowKeys => true,\n    \"select\": (rowKeys, rowKey, record) => true,\n    \"selectAll\": checked => true,\n    \"selectionChange\": rowKeys => true,\n    \"sorterChange\": (dataIndex, direction) => true,\n    \"filterChange\": (dataIndex, filteredValues) => true,\n    \"pageChange\": page => true,\n    \"pageSizeChange\": pageSize => true,\n    \"change\": (data, extra) => true,\n    \"cellClick\": (record, column, ev) => true,\n    \"rowClick\": (record, ev) => true,\n    \"headerClick\": (column, ev) => true,\n    \"columnResize\": (dataIndex, width) => true\n  },\n\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const {\n      columns,\n      rowKey,\n      rowSelection,\n      expandable,\n      loadMore,\n      filterIconAlignLeft,\n      selectedKeys,\n      defaultSelectedKeys,\n      expandedKeys,\n      defaultExpandedKeys,\n      defaultExpandAllRows,\n      spanMethod,\n      draggable,\n      summarySpanMethod\n    } = toRefs(props);\n    const prefixCls = getPrefixCls(\"table\");\n    const bordered = computed(() => {\n      if (isObject(props.bordered)) {\n        return __spreadValues(__spreadValues({}, DEFAULT_BORDERED), props.bordered);\n      }\n\n      return __spreadProps(__spreadValues({}, DEFAULT_BORDERED), {\n        wrapper: props.bordered\n      });\n    });\n    const {\n      children,\n      components\n    } = useChildrenComponents(\"TableColumn\");\n    const checkStrictly = computed(() => {\n      var _a, _b;\n\n      return (_b = (_a = rowSelection.value) == null ? void 0 : _a.checkStrictly) != null ? _b : true;\n    });\n    const isScroll = computed(() => {\n      var _a, _b, _c, _d;\n\n      const x = Boolean(((_a = props.scroll) == null ? void 0 : _a.x) || ((_b = props.scroll) == null ? void 0 : _b.minWidth));\n      const y = Boolean(((_c = props.scroll) == null ? void 0 : _c.y) || ((_d = props.scroll) == null ? void 0 : _d.maxHeight));\n      return {\n        x,\n        y\n      };\n    });\n    const theadRef = ref();\n    const tbodyRef = ref();\n    const summaryRef = ref();\n    const thRefs = ref({});\n    const virtualListRef = ref();\n    watch(virtualListRef, instance => {\n      tbodyRef.value = instance.$el;\n    });\n    const splitTable = computed(() => isScroll.value.y || props.stickyHeader || isVirtualList.value || isScroll.value.x && flattenData.value.length === 0);\n    const slotColumnMap = reactive(new Map());\n    const slotColumns = ref();\n    watch([components, slotColumnMap], ([components2, slotColumnMap2]) => {\n      if (components2.length > 0) {\n        const columns2 = [];\n        components2.forEach(id => {\n          const column = slotColumnMap2.get(id);\n          if (column) columns2.push(column);\n        });\n        slotColumns.value = columns2;\n      } else {\n        slotColumns.value = void 0;\n      }\n    });\n    const dataColumnMap = new Map();\n    const dataColumns = ref([]);\n    const groupColumns = ref([]);\n    watch([columns, slotColumns], ([columns2, slotColumns2]) => {\n      var _a;\n\n      const result = getGroupColumns((_a = slotColumns2 != null ? slotColumns2 : columns2) != null ? _a : [], dataColumnMap);\n      dataColumns.value = result.dataColumns;\n      groupColumns.value = result.groupColumns;\n    }, {\n      immediate: true\n    });\n    const isPaginationTop = computed(() => [\"tl\", \"top\", \"tr\"].includes(props.pagePosition));\n    const hasLeftFixedColumn = ref(false);\n    const hasRightFixedColumn = ref(false);\n    watchEffect(() => {\n      var _a, _b, _c;\n\n      let _hasLeftFixedColumn = false;\n      let _hasRightFixedColumn = false;\n\n      if (((_a = props.rowSelection) == null ? void 0 : _a.fixed) || ((_b = props.expandable) == null ? void 0 : _b.fixed) || ((_c = props.draggable) == null ? void 0 : _c.fixed)) {\n        _hasLeftFixedColumn = true;\n      }\n\n      for (const column of dataColumns.value) {\n        if (column.fixed === \"left\") {\n          _hasLeftFixedColumn = true;\n        } else if (column.fixed === \"right\") {\n          _hasRightFixedColumn = true;\n        }\n      }\n\n      if (_hasLeftFixedColumn !== hasLeftFixedColumn.value) {\n        hasLeftFixedColumn.value = _hasLeftFixedColumn;\n      }\n\n      if (_hasRightFixedColumn !== hasRightFixedColumn.value) {\n        hasRightFixedColumn.value = _hasRightFixedColumn;\n      }\n    });\n    const hasEllipsis = computed(() => {\n      for (const col of dataColumns.value) {\n        if (col.ellipsis) {\n          return true;\n        }\n      }\n\n      return false;\n    });\n\n    const handleChange = type => {\n      const extra = {\n        type,\n        page: page.value,\n        pageSize: pageSize.value,\n        sorter: computedSorter.value,\n        filters: computedFilters.value,\n        dragTarget: type === \"drag\" ? dragState.data : void 0\n      };\n      emit(\"change\", flattenRawData.value, extra);\n    };\n\n    const handleFilterChange = (dataIndex, filteredValues) => {\n      _filters.value = __spreadProps(__spreadValues({}, computedFilters.value), {\n        [dataIndex]: filteredValues\n      });\n      emit(\"filterChange\", dataIndex, filteredValues);\n      handleChange(\"filter\");\n    };\n\n    const handleSorterChange = (dataIndex, direction) => {\n      _sorter.value = direction ? {\n        field: dataIndex,\n        direction\n      } : void 0;\n      emit(\"sorterChange\", dataIndex, direction);\n      handleChange(\"sorter\");\n    };\n\n    const {\n      _filters,\n      computedFilters,\n      resetFilters,\n      clearFilters\n    } = useFilter({\n      columns: dataColumns,\n      onFilterChange: handleFilterChange\n    });\n    const {\n      _sorter,\n      computedSorter,\n      resetSorters,\n      clearSorters\n    } = useSorter({\n      columns: dataColumns,\n      onSorterChange: handleSorterChange\n    });\n    const disabledKeys = new Set();\n    const allRowKeys = computed(() => {\n      const allRowKeys2 = [];\n      disabledKeys.clear();\n\n      const travelData = data => {\n        if (isArray(data) && data.length > 0) {\n          for (const record of data) {\n            allRowKeys2.push(record[rowKey.value]);\n\n            if (record.disabled) {\n              disabledKeys.add(record[rowKey.value]);\n            }\n\n            if (record.children) {\n              travelData(record.children);\n            }\n          }\n        }\n      };\n\n      travelData(props.data);\n      return allRowKeys2;\n    });\n    const currentAllRowKeys = computed(() => {\n      const keys = [];\n\n      const travel = data => {\n        for (const record of data) {\n          keys.push(record.key);\n\n          if (record.children) {\n            travel(record.children);\n          }\n        }\n      };\n\n      travel(flattenData.value);\n      return keys;\n    });\n    const currentAllEnabledRowKeys = computed(() => {\n      const keys = [];\n\n      const travel = data => {\n        for (const record of data) {\n          if (!record.disabled) {\n            keys.push(record.key);\n          }\n\n          if (record.children) {\n            travel(record.children);\n          }\n        }\n      };\n\n      travel(flattenData.value);\n      return keys;\n    });\n    const {\n      isRadio,\n      selectedRowKeys,\n      currentSelectedRowKeys,\n      handleSelect,\n      handleSelectAllLeafs,\n      handleSelectAll,\n      select,\n      selectAll,\n      clearSelected\n    } = useRowSelection({\n      selectedKeys,\n      defaultSelectedKeys,\n      rowSelection,\n      currentAllRowKeys,\n      currentAllEnabledRowKeys,\n      emit\n    });\n    const {\n      expandedRowKeys,\n      handleExpand,\n      expand,\n      expandAll\n    } = useExpand({\n      expandedKeys,\n      defaultExpandedKeys,\n      defaultExpandAllRows,\n      expandable,\n      allRowKeys,\n      emit\n    });\n    const lazyLoadData = reactive({});\n\n    const addLazyLoadData = (children2, record) => {\n      if (children2) {\n        lazyLoadData[record.key] = children2;\n      }\n    };\n\n    const isValidRecord = record => {\n      var _a, _b;\n\n      for (const field of Object.keys(computedFilters.value)) {\n        const filteredValues = computedFilters.value[field];\n        const column = dataColumnMap.get(field);\n\n        if (column && ((_a = column.filterable) == null ? void 0 : _a.filter) && filteredValues.length > 0) {\n          const result = (_b = column.filterable) == null ? void 0 : _b.filter(filteredValues, record.raw);\n\n          if (!result) {\n            return result;\n          }\n        }\n      }\n\n      return true;\n    };\n\n    const {\n      dragType,\n      dragState,\n      handleDragStart,\n      handleDragEnter,\n      handleDragLeave,\n      handleDragover,\n      handleDragEnd,\n      handleDrop\n    } = useDrag(draggable);\n    const {\n      resizingColumn,\n      columnWidth,\n      handleThMouseDown\n    } = useColumnResize(thRefs, emit);\n    const processedData = computed(() => {\n      var _a;\n\n      const travel = data => {\n        const result = [];\n\n        for (const _record of data) {\n          const record = {\n            raw: _record,\n            key: _record[props.rowKey],\n            disabled: _record.disabled,\n            expand: _record.expand,\n            isLeaf: _record.isLeaf\n          };\n\n          if (_record.children) {\n            record.isLeaf = false;\n            record.children = travel(_record.children);\n          } else if (props.loadMore && !_record.isLeaf) {\n            record.isLeaf = false;\n\n            if (lazyLoadData[record.key]) {\n              record.children = travel(lazyLoadData[record.key]);\n            }\n          } else {\n            record.isLeaf = true;\n          }\n\n          record.hasSubtree = Boolean(record.children ? props.hideExpandButtonOnEmpty ? record.children.length > 0 : true : props.loadMore && !record.isLeaf);\n          result.push(record);\n        }\n\n        return result;\n      };\n\n      return travel((_a = props.data) != null ? _a : []);\n    });\n    const validData = computed(() => {\n      const travel = data => data.filter(record => {\n        if (isValidRecord(record)) {\n          if (record.children) {\n            record.children = travel(record.children);\n          }\n\n          return true;\n        }\n\n        return false;\n      });\n\n      return Object.keys(computedFilters.value).length > 0 ? travel(processedData.value) : processedData.value;\n    });\n    const sortedData = computed(() => {\n      var _a, _b;\n\n      const data = [...validData.value];\n\n      if (data.length > 0) {\n        if ((_a = computedSorter.value) == null ? void 0 : _a.field) {\n          const column = dataColumnMap.get(computedSorter.value.field);\n\n          if (column && ((_b = column.sortable) == null ? void 0 : _b.sorter) !== true) {\n            const {\n              field,\n              direction\n            } = computedSorter.value;\n            data.sort((a, b) => {\n              var _a2;\n\n              const valueA = a.raw[field];\n              const valueB = b.raw[field];\n\n              if (((_a2 = column.sortable) == null ? void 0 : _a2.sorter) && isFunction(column.sortable.sorter)) {\n                return column.sortable.sorter(a.raw, b.raw, {\n                  dataIndex: field,\n                  direction\n                });\n              }\n\n              const result = valueA > valueB ? 1 : -1;\n              return direction === \"descend\" ? -result : result;\n            });\n          }\n        }\n\n        if (dragState.dragging && dragState.targetPath.length > 0) {\n          const target = spliceFromPath(data, dragState.sourcePath);\n          spliceFromPath(data, dragState.targetPath, target);\n        }\n      }\n\n      return data;\n    });\n    const {\n      page,\n      pageSize,\n      handlePageChange,\n      handlePageSizeChange\n    } = usePagination(props, emit);\n    const onlyCurrent = computed(() => {\n      var _a, _b;\n\n      return (_b = (_a = rowSelection.value) == null ? void 0 : _a.onlyCurrent) != null ? _b : false;\n    });\n    watch(page, (cur, pre) => {\n      if (cur !== pre && onlyCurrent.value) {\n        clearSelected();\n      }\n    });\n    const flattenData = computed(() => {\n      if (props.pagination && sortedData.value.length > pageSize.value) {\n        return sortedData.value.slice((page.value - 1) * pageSize.value, page.value * pageSize.value);\n      }\n\n      return sortedData.value;\n    });\n    const flattenRawData = computed(() => flattenData.value.map(item => item.raw));\n\n    const getSummaryData = () => {\n      return dataColumns.value.reduce((per, column, index) => {\n        if (column.dataIndex) {\n          if (index === 0) {\n            per[column.dataIndex] = props.summaryText;\n          } else {\n            let count = 0;\n            let isNotNumber = false;\n            flattenData.value.forEach(data => {\n              if (column.dataIndex) {\n                if (isNumber(data.raw[column.dataIndex])) {\n                  count += data.raw[column.dataIndex];\n                } else if (!isUndefined(data.raw[column.dataIndex]) && !isNull(data.raw[column.dataIndex])) {\n                  isNotNumber = true;\n                }\n              }\n            });\n            per[column.dataIndex] = isNotNumber ? \"\" : count;\n          }\n        }\n\n        return per;\n      }, {});\n    };\n\n    const getTableDataWithRaw = data => {\n      if (data && data.length > 0) {\n        return data.map(raw => {\n          return {\n            raw,\n            key: raw[props.rowKey]\n          };\n        });\n      }\n\n      return void 0;\n    };\n\n    const summaryData = computed(() => {\n      if (props.summary) {\n        if (isFunction(props.summary)) {\n          return getTableDataWithRaw(props.summary({\n            columns: dataColumns.value,\n            data: flattenRawData.value\n          }));\n        }\n\n        return getTableDataWithRaw([getSummaryData()]);\n      }\n\n      return void 0;\n    });\n    const containerRef = ref();\n    const containerScrollLeft = ref(0);\n    const alignLeft = ref(true);\n    const alignRight = ref(true);\n\n    const setAlignPosition = () => {\n      let _alignLeft = true;\n      let _alignRight = true;\n      const scrollContainer = splitTable.value ? tbodyRef.value : containerRef.value;\n\n      if (scrollContainer) {\n        _alignLeft = containerScrollLeft.value === 0;\n        _alignRight = Math.ceil(containerScrollLeft.value + scrollContainer.offsetWidth) >= scrollContainer.scrollWidth;\n      }\n\n      if (_alignLeft !== alignLeft.value) {\n        alignLeft.value = _alignLeft;\n      }\n\n      if (_alignRight !== alignRight.value) {\n        alignRight.value = _alignRight;\n      }\n    };\n\n    const getTableScrollCls = () => {\n      if (alignLeft.value && alignRight.value) {\n        return `${prefixCls}-scroll-position-both`;\n      }\n\n      if (alignLeft.value) {\n        return `${prefixCls}-scroll-position-left`;\n      }\n\n      if (alignRight.value) {\n        return `${prefixCls}-scroll-position-right`;\n      }\n\n      return `${prefixCls}-scroll-position-middle`;\n    };\n\n    const getTableFixedCls = () => {\n      const cls2 = [];\n\n      if (hasLeftFixedColumn.value) {\n        cls2.push(`${prefixCls}-has-fixed-col-left`);\n      }\n\n      if (hasRightFixedColumn.value) {\n        cls2.push(`${prefixCls}-has-fixed-col-right`);\n      }\n\n      return cls2;\n    };\n\n    const handleScroll = e => {\n      if (e.target.scrollLeft !== containerScrollLeft.value) {\n        containerScrollLeft.value = e.target.scrollLeft;\n      }\n\n      setAlignPosition();\n    };\n\n    const onTbodyScroll = e => {\n      handleScroll(e);\n      const {\n        scrollLeft\n      } = e.target;\n\n      if (theadRef.value) {\n        theadRef.value.scrollLeft = scrollLeft;\n      }\n\n      if (summaryRef.value) {\n        summaryRef.value.scrollLeft = scrollLeft;\n      }\n    };\n\n    const handleRowClick = (record, ev) => {\n      emit(\"rowClick\", record.raw, ev);\n    };\n\n    const handleCellClick = (record, column, ev) => {\n      emit(\"cellClick\", record.raw, column, ev);\n    };\n\n    const handleHeaderClick = (column, ev) => {\n      emit(\"headerClick\", column, ev);\n    };\n\n    const operations = computed(() => {\n      var _a, _b;\n\n      const operations2 = [];\n      const hasFixedColumn = hasLeftFixedColumn.value || hasRightFixedColumn.value;\n      let dragHandle;\n      let expand2;\n      let selection;\n\n      if (((_a = props.draggable) == null ? void 0 : _a.type) === \"handle\") {\n        dragHandle = {\n          name: \"drag-handle\",\n          title: props.draggable.title,\n          width: props.draggable.width,\n          fixed: props.draggable.fixed || hasFixedColumn\n        };\n        operations2.push(dragHandle);\n      }\n\n      if (props.expandable) {\n        expand2 = {\n          name: \"expand\",\n          title: props.expandable.title,\n          width: props.expandable.width,\n          fixed: props.expandable.fixed || hasFixedColumn\n        };\n        operations2.push(expand2);\n      }\n\n      if (props.rowSelection) {\n        selection = {\n          name: props.rowSelection.type === \"radio\" ? \"selection-radio\" : \"selection-checkbox\",\n          title: props.rowSelection.title,\n          width: props.rowSelection.width,\n          fixed: props.rowSelection.fixed || hasFixedColumn\n        };\n        operations2.push(selection);\n      }\n\n      const operationsFn = (_b = props.components) == null ? void 0 : _b.operations;\n      return isFunction(operationsFn) ? operationsFn({\n        dragHandle,\n        expand: expand2,\n        selection\n      }) : operations2;\n    });\n    const headerStyle = computed(() => {\n      var _a, _b, _c, _d;\n\n      if (isScroll.value.x) {\n        const style2 = {\n          width: isNumber((_a = props.scroll) == null ? void 0 : _a.x) ? `${(_b = props.scroll) == null ? void 0 : _b.x}px` : (_c = props.scroll) == null ? void 0 : _c.x\n        };\n\n        if ((_d = props.scroll) == null ? void 0 : _d.minWidth) {\n          style2.minWidth = isNumber(props.scroll.minWidth) ? `${props.scroll.minWidth}px` : props.scroll.minWidth;\n        }\n\n        return style2;\n      }\n\n      return void 0;\n    });\n    const contentStyle = computed(() => {\n      var _a, _b, _c, _d;\n\n      if (isScroll.value.x && flattenData.value.length > 0) {\n        const style2 = {\n          width: isNumber((_a = props.scroll) == null ? void 0 : _a.x) ? `${(_b = props.scroll) == null ? void 0 : _b.x}px` : (_c = props.scroll) == null ? void 0 : _c.x\n        };\n\n        if ((_d = props.scroll) == null ? void 0 : _d.minWidth) {\n          style2.minWidth = isNumber(props.scroll.minWidth) ? `${props.scroll.minWidth}px` : props.scroll.minWidth;\n        }\n\n        return style2;\n      }\n\n      return void 0;\n    });\n\n    const addColumn = (id, column) => {\n      slotColumnMap.set(id, column);\n    };\n\n    const removeColumn = id => {\n      slotColumnMap.delete(id);\n    };\n\n    provide(tableInjectionKey, reactive({\n      loadMore,\n      addLazyLoadData,\n      slots,\n      sorter: computedSorter,\n      filters: computedFilters,\n      filterIconAlignLeft,\n      resizingColumn,\n      checkStrictly,\n      currentAllEnabledRowKeys,\n      currentSelectedRowKeys,\n      addColumn,\n      removeColumn,\n      onSelectAll: handleSelectAll,\n      onSelect: handleSelect,\n      onSelectAllLeafs: handleSelectAllLeafs,\n      onSorterChange: handleSorterChange,\n      onFilterChange: handleFilterChange,\n      onThMouseDown: handleThMouseDown\n    }));\n    const cls = computed(() => [prefixCls, `${prefixCls}-size-${props.size}`, {\n      [`${prefixCls}-border`]: bordered.value.wrapper,\n      [`${prefixCls}-border-cell`]: bordered.value.cell,\n      [`${prefixCls}-border-header-cell`]: !bordered.value.cell && bordered.value.headerCell,\n      [`${prefixCls}-border-body-cell`]: !bordered.value.cell && bordered.value.bodyCell,\n      [`${prefixCls}-stripe`]: props.stripe,\n      [`${prefixCls}-hover`]: props.hoverable,\n      [`${prefixCls}-dragging`]: dragState.dragging,\n      [`${prefixCls}-type-selection`]: Boolean(props.rowSelection),\n      [`${prefixCls}-empty`]: props.data && flattenData.value.length === 0,\n      [`${prefixCls}-layout-fixed`]: props.tableLayoutFixed || isScroll.value.x || splitTable.value || hasEllipsis.value\n    }]);\n    const paginationCls = computed(() => [`${prefixCls}-pagination`, {\n      [`${prefixCls}-pagination-left`]: props.pagePosition === \"tl\" || props.pagePosition === \"bl\",\n      [`${prefixCls}-pagination-center`]: props.pagePosition === \"top\" || props.pagePosition === \"bottom\",\n      [`${prefixCls}-pagination-right`]: props.pagePosition === \"tr\" || props.pagePosition === \"br\",\n      [`${prefixCls}-pagination-top`]: isPaginationTop.value\n    }]);\n    const tableCls = computed(() => {\n      const cls2 = getTableFixedCls();\n\n      if (isScroll.value.x) {\n        cls2.push(getTableScrollCls());\n      }\n\n      if (splitTable.value) {\n        cls2.push(`${prefixCls}-scroll-y`);\n      }\n\n      return cls2;\n    });\n    const isVirtualList = computed(() => Boolean(props.virtualListProps));\n    const thWidth = ref({});\n\n    const getThWidth = () => {\n      const width = {};\n\n      for (const key of Object.keys(thRefs.value)) {\n        width[key] = thRefs.value[key].offsetWidth;\n      }\n\n      thWidth.value = width;\n    };\n\n    const hasScrollBar = ref(false);\n\n    const isTbodyHasScrollBar = () => {\n      if (tbodyRef.value) {\n        return tbodyRef.value.offsetWidth > tbodyRef.value.clientWidth;\n      }\n\n      return false;\n    };\n\n    const handleTbodyResize = () => {\n      const _hasScrollBar = isTbodyHasScrollBar();\n\n      if (hasScrollBar.value !== _hasScrollBar) {\n        hasScrollBar.value = _hasScrollBar;\n      }\n\n      setAlignPosition();\n      getThWidth();\n    };\n\n    onMounted(() => {\n      hasScrollBar.value = isTbodyHasScrollBar();\n      getThWidth();\n    });\n    const spinProps = computed(() => isObject(props.loading) ? props.loading : {\n      loading: props.loading\n    });\n\n    const renderEmpty = () => {\n      return createVNode(Tr, {\n        \"empty\": true\n      }, {\n        default: () => [createVNode(Td, {\n          \"colSpan\": dataColumns.value.length + operations.value.length\n        }, {\n          default: () => {\n            var _a, _b;\n\n            return [(_b = (_a = slots.empty) == null ? void 0 : _a.call(slots)) != null ? _b : createVNode(Empty, null, null)];\n          }\n        })]\n      });\n    };\n\n    const renderExpandContent = record => {\n      var _a;\n\n      if (record.expand) {\n        return isFunction(record.expand) ? record.expand() : record.expand;\n      }\n\n      if (slots[\"expand-row\"]) {\n        return slots[\"expand-row\"]({\n          record: record.raw\n        });\n      }\n\n      if ((_a = props.expandable) == null ? void 0 : _a.expandedRowRender) {\n        return props.expandable.expandedRowRender(record.raw);\n      }\n\n      return void 0;\n    };\n\n    const allColumns = computed(() => [].concat(operations.value, dataColumns.value));\n    const spanColumns = computed(() => props.spanAll ? allColumns.value : dataColumns.value);\n    const {\n      tableSpan,\n      removedCells\n    } = useSpan({\n      spanMethod,\n      data: flattenData,\n      columns: spanColumns\n    });\n    const {\n      tableSpan: tableSummarySpan,\n      removedCells: removedSummaryCells\n    } = useSpan({\n      spanMethod: summarySpanMethod,\n      data: flattenData,\n      columns: allColumns\n    });\n\n    const getVirtualColumnStyle = name => {\n      if (!isVirtualList.value || !name || !thWidth.value[name]) {\n        return void 0;\n      }\n\n      return {\n        width: `${thWidth.value[name]}px`\n      };\n    };\n\n    const renderSummaryRow = (record, rowIndex) => {\n      return createVNode(Tr, {\n        \"key\": `table-summary-${rowIndex}`,\n        \"class\": [`${prefixCls}-tr-summary`, props.rowClass],\n        \"onClick\": ev => handleRowClick(record, ev)\n      }, {\n        default: () => [operations.value.map((operation, index) => {\n          var _a;\n\n          const cellId = `${rowIndex}-${index}`;\n          const [rowspan, colspan] = (_a = tableSummarySpan.value[cellId]) != null ? _a : [1, 1];\n\n          if (removedSummaryCells.value.includes(cellId)) {\n            return null;\n          }\n\n          const style2 = getVirtualColumnStyle(operation.name);\n          return createVNode(OperationTd, {\n            \"style\": style2,\n            \"operationColumn\": operation,\n            \"operations\": operations.value,\n            \"record\": record,\n            \"rowSpan\": rowspan,\n            \"colSpan\": colspan,\n            \"summary\": true\n          }, null);\n        }), dataColumns.value.map((column, index) => {\n          var _a;\n\n          const cellId = `${rowIndex}-${operations.value.length + index}`;\n          const [rowspan, colspan] = (_a = tableSummarySpan.value[cellId]) != null ? _a : [1, 1];\n\n          if (removedSummaryCells.value.includes(cellId)) {\n            return null;\n          }\n\n          const style2 = getVirtualColumnStyle(column.dataIndex);\n          return createVNode(Td, {\n            \"key\": `td-${cellId}`,\n            \"style\": style2,\n            \"rowIndex\": rowIndex,\n            \"record\": record,\n            \"column\": column,\n            \"operations\": operations.value,\n            \"dataColumns\": dataColumns.value,\n            \"rowSpan\": rowspan,\n            \"colSpan\": colspan,\n            \"summary\": true,\n            \"onClick\": ev => handleCellClick(record, column, ev)\n          }, {\n            td: slots.td,\n            cell: slots[\"summary-cell\"]\n          });\n        })],\n        tr: slots.tr\n      });\n    };\n\n    const renderSummary = () => {\n      if (summaryData.value) {\n        return createVNode(\"tfoot\", null, [summaryData.value.map((data, index) => renderSummaryRow(data, index))]);\n      }\n\n      return null;\n    };\n\n    const renderVirtualListBody = () => {\n      return createVNode(ClientOnly, null, {\n        default: () => [createVNode(VirtualList, mergeProps({\n          \"ref\": virtualListRef,\n          \"class\": `${prefixCls}-body`,\n          \"data\": flattenData.value,\n          \"itemKey\": \"_key\",\n          \"type\": \"table\",\n          \"outerAttrs\": {\n            class: `${prefixCls}-element`,\n            style: contentStyle.value\n          }\n        }, props.virtualListProps, {\n          \"onResize\": handleTbodyResize,\n          \"onScroll\": handleScroll\n        }), {\n          item: ({\n            item,\n            index\n          }) => renderRecord(item, index)\n        })]\n      });\n    };\n\n    const renderExpandBtn = (record, stopPropagation = true) => {\n      var _a, _b, _c, _d, _e;\n\n      const currentKey = record.key;\n      const expanded = expandedRowKeys.value.includes(currentKey);\n      return createVNode(\"button\", {\n        \"type\": \"button\",\n        \"class\": `${prefixCls}-expand-btn`,\n        \"onClick\": ev => {\n          handleExpand(currentKey, record.raw);\n\n          if (stopPropagation) {\n            ev.stopPropagation();\n          }\n        }\n      }, [(_e = (_d = (_a = slots[\"expand-icon\"]) == null ? void 0 : _a.call(slots, {\n        expanded,\n        record: record.raw\n      })) != null ? _d : (_c = (_b = props.expandable) == null ? void 0 : _b.icon) == null ? void 0 : _c.call(_b, expanded, record.raw)) != null ? _e : expanded ? createVNode(IconMinus, null, null) : createVNode(IconPlus, null, null)]);\n    };\n\n    const renderExpand = (record, {\n      indentSize,\n      indexPath,\n      allowDrag,\n      expandContent\n    }) => {\n      var _a;\n\n      if (record.hasSubtree) {\n        return (_a = record.children) == null ? void 0 : _a.map((item, index) => renderRecord(item, index, {\n          indentSize,\n          indexPath,\n          allowDrag\n        }));\n      }\n\n      if (expandContent) {\n        const scrollContainer = splitTable.value ? tbodyRef.value : containerRef.value;\n        return createVNode(Tr, {\n          \"key\": `${record.key}-expand`,\n          \"expand\": true\n        }, {\n          default: () => [createVNode(Td, {\n            \"isFixedExpand\": hasLeftFixedColumn.value || hasRightFixedColumn.value,\n            \"containerWidth\": scrollContainer == null ? void 0 : scrollContainer.clientWidth,\n            \"colSpan\": dataColumns.value.length + operations.value.length\n          }, _isSlot(expandContent) ? expandContent : {\n            default: () => [expandContent]\n          })]\n        });\n      }\n\n      return null;\n    };\n\n    const renderRecord = (record, rowIndex, {\n      indentSize = 0,\n      indexPath,\n      allowDrag = true\n    } = {}) => {\n      var _a;\n\n      const currentKey = record.key;\n      const currentPath = (indexPath != null ? indexPath : []).concat(rowIndex);\n      const expandContent = renderExpandContent(record);\n      const showExpand = expandedRowKeys.value.includes(currentKey);\n      const isDragTarget = dragState.sourceKey === record.key;\n      const dragSourceEvent = dragType.value ? {\n        draggable: allowDrag,\n        onDragstart: ev => {\n          if (!allowDrag) return;\n          handleDragStart(ev, record.key, currentPath, record.raw);\n        },\n        onDragend: ev => {\n          if (!allowDrag) return;\n          handleDragEnd(ev);\n        }\n      } : {};\n      const dragTargetEvent = dragType.value ? {\n        onDragenter: ev => {\n          if (!allowDrag) return;\n          handleDragEnter(ev, currentPath);\n        },\n        onDragover: ev => {\n          if (!allowDrag) return;\n          handleDragover(ev);\n        },\n        onDrop: ev => {\n          if (!allowDrag) return;\n          handleChange(\"drag\");\n          handleDrop(ev);\n        }\n      } : {};\n      return createVNode(Fragment, null, [createVNode(Tr, mergeProps({\n        \"key\": currentKey,\n        \"class\": [{\n          [`${prefixCls}-tr-draggable`]: dragType.value === \"row\",\n          [`${prefixCls}-tr-drag`]: isDragTarget\n        }, props.rowClass],\n        \"rowIndex\": rowIndex,\n        \"record\": record,\n        \"checked\": (_a = selectedRowKeys.value) == null ? void 0 : _a.includes(currentKey),\n        \"onClick\": ev => handleRowClick(record, ev)\n      }, dragType.value === \"row\" ? dragSourceEvent : {}, dragTargetEvent), {\n        default: () => [operations.value.map((operation, index) => {\n          var _a2;\n\n          const cellId = `${rowIndex}-${index}`;\n          const [rowspan, colspan] = props.spanAll ? (_a2 = tableSpan.value[cellId]) != null ? _a2 : [1, 1] : [1, 1];\n\n          if (props.spanAll && removedCells.value.includes(cellId)) {\n            return null;\n          }\n\n          const style2 = getVirtualColumnStyle(operation.name);\n          return createVNode(OperationTd, mergeProps({\n            \"key\": `operation-td-${index}`,\n            \"style\": style2,\n            \"operationColumn\": operation,\n            \"operations\": operations.value,\n            \"record\": record,\n            \"hasExpand\": Boolean(expandContent),\n            \"selectedRowKeys\": currentSelectedRowKeys.value,\n            \"rowSpan\": rowspan,\n            \"colSpan\": colspan,\n            \"renderExpandBtn\": renderExpandBtn\n          }, dragType.value === \"handle\" ? dragSourceEvent : {}), {\n            \"drag-handle-icon\": slots[\"drag-handle-icon\"]\n          });\n        }), dataColumns.value.map((column, index) => {\n          var _a2;\n\n          const cellId = `${rowIndex}-${props.spanAll ? operations.value.length + index : index}`;\n          const [rowspan, colspan] = (_a2 = tableSpan.value[cellId]) != null ? _a2 : [1, 1];\n\n          if (removedCells.value.includes(cellId)) {\n            return null;\n          }\n\n          const extraProps = index === 0 ? {\n            showExpandBtn: record.hasSubtree,\n            indentSize: record.hasSubtree ? indentSize - 20 : indentSize\n          } : {};\n          const style2 = getVirtualColumnStyle(column.dataIndex);\n          return createVNode(Td, mergeProps({\n            \"key\": `td-${index}`,\n            \"style\": style2,\n            \"rowIndex\": rowIndex,\n            \"record\": record,\n            \"column\": column,\n            \"operations\": operations.value,\n            \"dataColumns\": dataColumns.value,\n            \"rowSpan\": rowspan,\n            \"renderExpandBtn\": renderExpandBtn,\n            \"colSpan\": colspan\n          }, extraProps, {\n            \"onClick\": ev => handleCellClick(record, column, ev)\n          }), {\n            td: slots.td\n          });\n        })],\n        tr: slots.tr\n      }), showExpand && renderExpand(record, {\n        indentSize: indentSize + props.indentSize,\n        indexPath: currentPath,\n        allowDrag: allowDrag && !isDragTarget,\n        expandContent\n      })]);\n    };\n\n    const renderBody = () => {\n      const hasSubData = flattenData.value.some(record => Boolean(record.hasSubtree));\n      return createVNode(Tbody, null, {\n        default: () => [flattenData.value.length > 0 ? flattenData.value.map((record, index) => renderRecord(record, index, {\n          indentSize: hasSubData ? 20 : 0\n        })) : renderEmpty()],\n        tbody: slots.tbody\n      });\n    };\n\n    const renderHeader = () => createVNode(Thead, null, {\n      default: () => [groupColumns.value.map((row, index) => createVNode(Tr, {\n        \"key\": `header-row-${index}`\n      }, {\n        default: () => [index === 0 && operations.value.map((operation, index2) => {\n          var _a;\n\n          return createVNode(OperationTh, {\n            \"key\": `operation-th-${index2}`,\n            \"ref\": ins => {\n              if ((ins == null ? void 0 : ins.$el) && operation.name) {\n                thRefs.value[operation.name] = ins.$el;\n              }\n            },\n            \"operationColumn\": operation,\n            \"operations\": operations.value,\n            \"selectAll\": Boolean(operation.name === \"selection-checkbox\" && ((_a = props.rowSelection) == null ? void 0 : _a.showCheckedAll)),\n            \"rowSpan\": groupColumns.value.length\n          }, null);\n        }), row.map((column, index2) => {\n          const resizable = props.columnResizable && Boolean(column.dataIndex) && index2 < row.length - 1;\n          return createVNode(Th, {\n            \"key\": `th-${index2}`,\n            \"ref\": ins => {\n              if ((ins == null ? void 0 : ins.$el) && column.dataIndex) {\n                thRefs.value[column.dataIndex] = ins.$el;\n              }\n            },\n            \"column\": column,\n            \"operations\": operations.value,\n            \"dataColumns\": dataColumns.value,\n            \"resizable\": resizable,\n            \"onClick\": ev => handleHeaderClick(column, ev)\n          }, {\n            th: slots.th\n          });\n        })]\n      }))],\n      thead: slots.thead\n    });\n\n    const renderContent = () => {\n      if (splitTable.value) {\n        const style2 = {\n          overflowY: hasScrollBar.value ? \"scroll\" : \"hidden\"\n        };\n\n        if (isNumber(props.stickyHeader)) {\n          style2.top = `${props.stickyHeader}px`;\n        }\n\n        return createVNode(Fragment, null, [props.showHeader && createVNode(\"div\", {\n          \"ref\": theadRef,\n          \"class\": [`${prefixCls}-header`, {\n            [`${prefixCls}-header-sticky`]: props.stickyHeader\n          }],\n          \"style\": style2\n        }, [createVNode(\"table\", {\n          \"class\": `${prefixCls}-element`,\n          \"style\": headerStyle.value,\n          \"cellpadding\": 0,\n          \"cellspacing\": 0\n        }, [createVNode(ColGroup, {\n          \"dataColumns\": dataColumns.value,\n          \"operations\": operations.value,\n          \"columnWidth\": columnWidth\n        }, null), renderHeader()])]), isVirtualList.value ? renderVirtualListBody() : createVNode(ResizeObserver, {\n          \"onResize\": handleTbodyResize\n        }, {\n          default: () => {\n            var _a, _b;\n\n            return [createVNode(\"div\", {\n              \"ref\": tbodyRef,\n              \"class\": `${prefixCls}-body`,\n              \"style\": {\n                maxHeight: isNumber((_a = props.scroll) == null ? void 0 : _a.y) ? `${(_b = props.scroll) == null ? void 0 : _b.y}px` : \"100%\"\n              },\n              \"onScroll\": onTbodyScroll\n            }, [createVNode(\"table\", {\n              \"class\": `${prefixCls}-element`,\n              \"style\": contentStyle.value,\n              \"cellpadding\": 0,\n              \"cellspacing\": 0\n            }, [flattenData.value.length !== 0 && createVNode(ColGroup, {\n              \"dataColumns\": dataColumns.value,\n              \"operations\": operations.value,\n              \"columnWidth\": columnWidth\n            }, null), renderBody()])])];\n          }\n        }), summaryData.value && summaryData.value.length && createVNode(\"div\", {\n          \"ref\": summaryRef,\n          \"class\": `${prefixCls}-tfoot`,\n          \"style\": {\n            overflowY: hasScrollBar.value ? \"scroll\" : \"hidden\"\n          }\n        }, [createVNode(\"table\", {\n          \"class\": `${prefixCls}-element`,\n          \"style\": contentStyle.value,\n          \"cellpadding\": 0,\n          \"cellspacing\": 0\n        }, [createVNode(ColGroup, {\n          \"dataColumns\": dataColumns.value,\n          \"operations\": operations.value,\n          \"columnWidth\": columnWidth\n        }, null), renderSummary()])])]);\n      }\n\n      return createVNode(ResizeObserver, {\n        \"onResize\": () => setAlignPosition()\n      }, {\n        default: () => [createVNode(\"table\", {\n          \"class\": `${prefixCls}-element`,\n          \"cellpadding\": 0,\n          \"cellspacing\": 0,\n          \"style\": contentStyle.value\n        }, [createVNode(ColGroup, {\n          \"dataColumns\": dataColumns.value,\n          \"operations\": operations.value,\n          \"columnWidth\": columnWidth\n        }, null), props.showHeader && renderHeader(), renderBody(), summaryData.value && summaryData.value.length && renderSummary()])]\n      });\n    };\n\n    const renderTable = content => {\n      var _a;\n\n      const style2 = ((_a = props.scroll) == null ? void 0 : _a.maxHeight) ? {\n        maxHeight: props.scroll.maxHeight\n      } : void 0;\n      return createVNode(Fragment, null, [createVNode(\"div\", {\n        \"class\": [`${prefixCls}-container`, tableCls.value]\n      }, [createVNode(\"div\", {\n        \"ref\": containerRef,\n        \"class\": [`${prefixCls}-content`, {\n          [`${prefixCls}-content-scroll-x`]: !splitTable.value\n        }],\n        \"style\": style2,\n        \"onScroll\": handleScroll\n      }, [content ? createVNode(\"table\", {\n        \"class\": `${prefixCls}-element`,\n        \"cellpadding\": 0,\n        \"cellspacing\": 0\n      }, [content()]) : renderContent()])]), slots.footer && createVNode(\"div\", {\n        \"class\": `${prefixCls}-footer`\n      }, [slots.footer()])]);\n    };\n\n    const renderPagination = () => {\n      var _a, _b;\n\n      const paginationProps = isObject(props.pagination) ? omit(props.pagination, [\"current\", \"pageSize\", \"defaultCurrent\", \"defaultPageSize\"]) : {};\n      return createVNode(\"div\", {\n        \"class\": paginationCls.value\n      }, [(_a = slots[\"pagination-left\"]) == null ? void 0 : _a.call(slots), createVNode(Pagination, mergeProps({\n        \"total\": validData.value.length,\n        \"current\": page.value,\n        \"pageSize\": pageSize.value,\n        \"onChange\": page2 => {\n          handlePageChange(page2);\n          handleChange(\"pagination\");\n        },\n        \"onPageSizeChange\": pageSize2 => {\n          handlePageSizeChange(pageSize2);\n          handleChange(\"pagination\");\n        }\n      }, paginationProps), null), (_b = slots[\"pagination-right\"]) == null ? void 0 : _b.call(slots)]);\n    };\n\n    const style = computed(() => {\n      var _a, _b;\n\n      if (isString((_a = props.scroll) == null ? void 0 : _a.y)) {\n        return {\n          height: (_b = props.scroll) == null ? void 0 : _b.y\n        };\n      }\n\n      return void 0;\n    });\n\n    const render = () => {\n      var _a;\n\n      if (slots.default) {\n        return createVNode(\"div\", {\n          \"class\": cls.value\n        }, [renderTable(slots.default)]);\n      }\n\n      children.value = (_a = slots.columns) == null ? void 0 : _a.call(slots);\n      return createVNode(\"div\", {\n        \"class\": cls.value,\n        \"style\": style.value\n      }, [children.value, createVNode(Spin, spinProps.value, {\n        default: () => [props.pagination !== false && flattenData.value.length > 0 && isPaginationTop.value && renderPagination(), renderTable(), props.pagination !== false && flattenData.value.length > 0 && !isPaginationTop.value && renderPagination()]\n      })]);\n    };\n\n    return {\n      render,\n      selfExpand: expand,\n      selfExpandAll: expandAll,\n      selfSelect: select,\n      selfSelectAll: selectAll,\n      selfResetFilters: resetFilters,\n      selfClearFilters: clearFilters,\n      selfResetSorters: resetSorters,\n      selfClearSorters: clearSorters\n    };\n  },\n\n  methods: {\n    selectAll(checked) {\n      return this.selfSelectAll(checked);\n    },\n\n    select(rowKey, checked) {\n      return this.selfSelect(rowKey, checked);\n    },\n\n    expandAll(checked) {\n      return this.selfExpandAll(checked);\n    },\n\n    expand(rowKey, checked) {\n      return this.selfExpand(rowKey, checked);\n    },\n\n    resetFilters(dataIndex) {\n      return this.selfResetFilters(dataIndex);\n    },\n\n    clearFilters(dataIndex) {\n      return this.selfClearFilters(dataIndex);\n    },\n\n    resetSorters() {\n      return this.selfResetSorters();\n    },\n\n    clearSorters() {\n      return this.selfClearSorters();\n    }\n\n  },\n\n  render() {\n    return this.render();\n  }\n\n});\n\nexport { _Table as default };","map":{"version":3,"names":["__defProp","Object","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","__spreadProps","defineComponent","inject","toRefs","computed","ref","watch","reactive","watchEffect","provide","onMounted","createVNode","Fragment","mergeProps","isVNode","getPrefixCls","isObject","isFunction","isNumber","isUndefined","isNull","isString","isArray","getGroupColumns","spliceFromPath","useRowSelection","useExpand","usePagination","IconPlus","IconMinus","Spin","Pagination","Empty","ColGroup","Thead","Tbody","Tr","Th","Td","OperationTh","OperationTd","VirtualList","ResizeObserver","omit","configProviderInjectionKey","useDrag","useColumnResize","tableInjectionKey","useFilter","useSorter","ClientOnly","useSpan","useChildrenComponents","_isSlot","s","toString","DEFAULT_BORDERED","wrapper","cell","headerCell","bodyCell","_Table","name","props","columns","type","Array","default","data","bordered","Boolean","hoverable","stripe","size","String","_a","_b","tableLayoutFixed","loading","rowSelection","expandable","scroll","pagination","pagePosition","indentSize","Number","rowKey","showHeader","virtualListProps","spanMethod","Function","spanAll","components","loadMore","filterIconAlignLeft","hideExpandButtonOnEmpty","rowClass","draggable","rowNumber","columnResizable","summary","summaryText","summarySpanMethod","selectedKeys","defaultSelectedKeys","expandedKeys","defaultExpandedKeys","defaultExpandAllRows","stickyHeader","emits","rowKeys","record","checked","dataIndex","direction","filteredValues","page","pageSize","extra","column","ev","width","setup","emit","slots","prefixCls","children","checkStrictly","isScroll","_c","_d","x","minWidth","y","maxHeight","theadRef","tbodyRef","summaryRef","thRefs","virtualListRef","instance","$el","splitTable","isVirtualList","flattenData","length","slotColumnMap","Map","slotColumns","components2","slotColumnMap2","columns2","forEach","id","get","push","dataColumnMap","dataColumns","groupColumns","slotColumns2","result","immediate","isPaginationTop","includes","hasLeftFixedColumn","hasRightFixedColumn","_hasLeftFixedColumn","_hasRightFixedColumn","fixed","hasEllipsis","col","ellipsis","handleChange","sorter","computedSorter","filters","computedFilters","dragTarget","dragState","flattenRawData","handleFilterChange","_filters","handleSorterChange","_sorter","field","resetFilters","clearFilters","onFilterChange","resetSorters","clearSorters","onSorterChange","disabledKeys","Set","allRowKeys","allRowKeys2","clear","travelData","disabled","add","currentAllRowKeys","keys","travel","currentAllEnabledRowKeys","isRadio","selectedRowKeys","currentSelectedRowKeys","handleSelect","handleSelectAllLeafs","handleSelectAll","select","selectAll","clearSelected","expandedRowKeys","handleExpand","expand","expandAll","lazyLoadData","addLazyLoadData","children2","isValidRecord","filterable","filter","raw","dragType","handleDragStart","handleDragEnter","handleDragLeave","handleDragover","handleDragEnd","handleDrop","resizingColumn","columnWidth","handleThMouseDown","processedData","_record","isLeaf","hasSubtree","validData","sortedData","sortable","sort","_a2","valueA","valueB","dragging","targetPath","target","sourcePath","handlePageChange","handlePageSizeChange","onlyCurrent","cur","pre","slice","map","item","getSummaryData","reduce","per","index","count","isNotNumber","getTableDataWithRaw","summaryData","containerRef","containerScrollLeft","alignLeft","alignRight","setAlignPosition","_alignLeft","_alignRight","scrollContainer","Math","ceil","offsetWidth","scrollWidth","getTableScrollCls","getTableFixedCls","cls2","handleScroll","e","scrollLeft","onTbodyScroll","handleRowClick","handleCellClick","handleHeaderClick","operations","operations2","hasFixedColumn","dragHandle","expand2","selection","title","operationsFn","headerStyle","style2","contentStyle","addColumn","set","removeColumn","delete","onSelectAll","onSelect","onSelectAllLeafs","onThMouseDown","cls","paginationCls","tableCls","thWidth","getThWidth","hasScrollBar","isTbodyHasScrollBar","clientWidth","handleTbodyResize","_hasScrollBar","spinProps","renderEmpty","empty","renderExpandContent","expandedRowRender","allColumns","concat","spanColumns","tableSpan","removedCells","tableSummarySpan","removedSummaryCells","getVirtualColumnStyle","renderSummaryRow","rowIndex","operation","cellId","rowspan","colspan","td","tr","renderSummary","renderVirtualListBody","class","style","renderRecord","renderExpandBtn","stopPropagation","_e","currentKey","expanded","icon","renderExpand","indexPath","allowDrag","expandContent","currentPath","showExpand","isDragTarget","sourceKey","dragSourceEvent","onDragstart","onDragend","dragTargetEvent","onDragenter","onDragover","onDrop","extraProps","showExpandBtn","renderBody","hasSubData","some","tbody","renderHeader","row","index2","ins","showCheckedAll","resizable","th","thead","renderContent","overflowY","top","renderTable","content","footer","renderPagination","paginationProps","page2","pageSize2","height","render","selfExpand","selfExpandAll","selfSelect","selfSelectAll","selfResetFilters","selfClearFilters","selfResetSorters","selfClearSorters","methods"],"sources":["/www/wwwroot/admin/node_modules/@arco-design/web-vue/es/table/table.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nimport { defineComponent, inject, toRefs, computed, ref, watch, reactive, watchEffect, provide, onMounted, createVNode, Fragment, mergeProps, isVNode } from \"vue\";\nimport { getPrefixCls } from \"../_utils/global-config.js\";\nimport { isObject, isFunction, isNumber, isUndefined, isNull, isString, isArray } from \"../_utils/is.js\";\nimport { getGroupColumns, spliceFromPath } from \"./utils.js\";\nimport { useRowSelection } from \"./hooks/use-row-selection.js\";\nimport { useExpand } from \"./hooks/use-expand.js\";\nimport { usePagination } from \"./hooks/use-pagination.js\";\nimport IconPlus from \"../icon/icon-plus/index.js\";\nimport IconMinus from \"../icon/icon-minus/index.js\";\nimport Spin from \"../spin/index.js\";\nimport Pagination from \"../pagination/index.js\";\nimport Empty from \"../empty/index.js\";\nimport ColGroup from \"./table-col-group.js\";\nimport Thead from \"./table-thead.js\";\nimport Tbody from \"./table-tbody.js\";\nimport Tr from \"./table-tr.js\";\nimport Th from \"./table-th.js\";\nimport Td from \"./table-td.js\";\nimport OperationTh from \"./table-operation-th.js\";\nimport OperationTd from \"./table-operation-td.js\";\nimport VirtualList from \"../_components/virtual-list/virtual-list.js\";\nimport ResizeObserver from \"../_components/resize-observer.js\";\nimport { omit } from \"../_utils/omit.js\";\nimport { configProviderInjectionKey } from \"../config-provider/context.js\";\nimport { useDrag } from \"./hooks/use-drag.js\";\nimport { useColumnResize } from \"./hooks/use-column-resize.js\";\nimport { tableInjectionKey } from \"./context.js\";\nimport { useFilter } from \"./hooks/use-filter.js\";\nimport { useSorter } from \"./hooks/use-sorter.js\";\nimport ClientOnly from \"../_components/client-only.js\";\nimport { useSpan } from \"./hooks/use-span.js\";\nimport { useChildrenComponents } from \"../_hooks/use-children-components.js\";\nfunction _isSlot(s) {\n  return typeof s === \"function\" || Object.prototype.toString.call(s) === \"[object Object]\" && !isVNode(s);\n}\nconst DEFAULT_BORDERED = {\n  wrapper: true,\n  cell: false,\n  headerCell: false,\n  bodyCell: false\n};\nvar _Table = defineComponent({\n  name: \"Table\",\n  props: {\n    columns: {\n      type: Array,\n      default: () => []\n    },\n    data: {\n      type: Array,\n      default: () => []\n    },\n    bordered: {\n      type: [Boolean, Object],\n      default: true\n    },\n    hoverable: {\n      type: Boolean,\n      default: true\n    },\n    stripe: {\n      type: Boolean,\n      default: false\n    },\n    size: {\n      type: String,\n      default: () => {\n        var _a, _b;\n        return (_b = (_a = inject(configProviderInjectionKey, void 0)) == null ? void 0 : _a.size) != null ? _b : \"large\";\n      }\n    },\n    tableLayoutFixed: {\n      type: Boolean,\n      default: false\n    },\n    loading: {\n      type: [Boolean, Object],\n      default: false\n    },\n    rowSelection: {\n      type: Object\n    },\n    expandable: {\n      type: Object\n    },\n    scroll: {\n      type: Object\n    },\n    pagination: {\n      type: [Boolean, Object],\n      default: true\n    },\n    pagePosition: {\n      type: String,\n      default: \"br\"\n    },\n    indentSize: {\n      type: Number,\n      default: 16\n    },\n    rowKey: {\n      type: String,\n      default: \"key\"\n    },\n    showHeader: {\n      type: Boolean,\n      default: true\n    },\n    virtualListProps: {\n      type: Object\n    },\n    spanMethod: {\n      type: Function\n    },\n    spanAll: {\n      type: Boolean,\n      default: false\n    },\n    components: {\n      type: Object\n    },\n    loadMore: {\n      type: Function\n    },\n    filterIconAlignLeft: {\n      type: Boolean,\n      default: false\n    },\n    hideExpandButtonOnEmpty: {\n      type: Boolean,\n      default: false\n    },\n    rowClass: {\n      type: [String, Array, Object]\n    },\n    draggable: {\n      type: Object\n    },\n    rowNumber: {\n      type: [Boolean, Object]\n    },\n    columnResizable: {\n      type: Boolean\n    },\n    summary: {\n      type: [Boolean, Function]\n    },\n    summaryText: {\n      type: String,\n      default: \"Summary\"\n    },\n    summarySpanMethod: {\n      type: Function\n    },\n    selectedKeys: {\n      type: Array\n    },\n    defaultSelectedKeys: {\n      type: Array\n    },\n    expandedKeys: {\n      type: Array\n    },\n    defaultExpandedKeys: {\n      type: Array\n    },\n    defaultExpandAllRows: {\n      type: Boolean,\n      default: false\n    },\n    stickyHeader: {\n      type: [Boolean, Number],\n      default: false\n    }\n  },\n  emits: {\n    \"update:selectedKeys\": (rowKeys) => true,\n    \"update:expandedKeys\": (rowKeys) => true,\n    \"expand\": (rowKey, record) => true,\n    \"expandedChange\": (rowKeys) => true,\n    \"select\": (rowKeys, rowKey, record) => true,\n    \"selectAll\": (checked) => true,\n    \"selectionChange\": (rowKeys) => true,\n    \"sorterChange\": (dataIndex, direction) => true,\n    \"filterChange\": (dataIndex, filteredValues) => true,\n    \"pageChange\": (page) => true,\n    \"pageSizeChange\": (pageSize) => true,\n    \"change\": (data, extra) => true,\n    \"cellClick\": (record, column, ev) => true,\n    \"rowClick\": (record, ev) => true,\n    \"headerClick\": (column, ev) => true,\n    \"columnResize\": (dataIndex, width) => true\n  },\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const {\n      columns,\n      rowKey,\n      rowSelection,\n      expandable,\n      loadMore,\n      filterIconAlignLeft,\n      selectedKeys,\n      defaultSelectedKeys,\n      expandedKeys,\n      defaultExpandedKeys,\n      defaultExpandAllRows,\n      spanMethod,\n      draggable,\n      summarySpanMethod\n    } = toRefs(props);\n    const prefixCls = getPrefixCls(\"table\");\n    const bordered = computed(() => {\n      if (isObject(props.bordered)) {\n        return __spreadValues(__spreadValues({}, DEFAULT_BORDERED), props.bordered);\n      }\n      return __spreadProps(__spreadValues({}, DEFAULT_BORDERED), {\n        wrapper: props.bordered\n      });\n    });\n    const {\n      children,\n      components\n    } = useChildrenComponents(\"TableColumn\");\n    const checkStrictly = computed(() => {\n      var _a, _b;\n      return (_b = (_a = rowSelection.value) == null ? void 0 : _a.checkStrictly) != null ? _b : true;\n    });\n    const isScroll = computed(() => {\n      var _a, _b, _c, _d;\n      const x = Boolean(((_a = props.scroll) == null ? void 0 : _a.x) || ((_b = props.scroll) == null ? void 0 : _b.minWidth));\n      const y = Boolean(((_c = props.scroll) == null ? void 0 : _c.y) || ((_d = props.scroll) == null ? void 0 : _d.maxHeight));\n      return {\n        x,\n        y\n      };\n    });\n    const theadRef = ref();\n    const tbodyRef = ref();\n    const summaryRef = ref();\n    const thRefs = ref({});\n    const virtualListRef = ref();\n    watch(virtualListRef, (instance) => {\n      tbodyRef.value = instance.$el;\n    });\n    const splitTable = computed(() => isScroll.value.y || props.stickyHeader || isVirtualList.value || isScroll.value.x && flattenData.value.length === 0);\n    const slotColumnMap = reactive(new Map());\n    const slotColumns = ref();\n    watch([components, slotColumnMap], ([components2, slotColumnMap2]) => {\n      if (components2.length > 0) {\n        const columns2 = [];\n        components2.forEach((id) => {\n          const column = slotColumnMap2.get(id);\n          if (column)\n            columns2.push(column);\n        });\n        slotColumns.value = columns2;\n      } else {\n        slotColumns.value = void 0;\n      }\n    });\n    const dataColumnMap = new Map();\n    const dataColumns = ref([]);\n    const groupColumns = ref([]);\n    watch([columns, slotColumns], ([columns2, slotColumns2]) => {\n      var _a;\n      const result = getGroupColumns((_a = slotColumns2 != null ? slotColumns2 : columns2) != null ? _a : [], dataColumnMap);\n      dataColumns.value = result.dataColumns;\n      groupColumns.value = result.groupColumns;\n    }, {\n      immediate: true\n    });\n    const isPaginationTop = computed(() => [\"tl\", \"top\", \"tr\"].includes(props.pagePosition));\n    const hasLeftFixedColumn = ref(false);\n    const hasRightFixedColumn = ref(false);\n    watchEffect(() => {\n      var _a, _b, _c;\n      let _hasLeftFixedColumn = false;\n      let _hasRightFixedColumn = false;\n      if (((_a = props.rowSelection) == null ? void 0 : _a.fixed) || ((_b = props.expandable) == null ? void 0 : _b.fixed) || ((_c = props.draggable) == null ? void 0 : _c.fixed)) {\n        _hasLeftFixedColumn = true;\n      }\n      for (const column of dataColumns.value) {\n        if (column.fixed === \"left\") {\n          _hasLeftFixedColumn = true;\n        } else if (column.fixed === \"right\") {\n          _hasRightFixedColumn = true;\n        }\n      }\n      if (_hasLeftFixedColumn !== hasLeftFixedColumn.value) {\n        hasLeftFixedColumn.value = _hasLeftFixedColumn;\n      }\n      if (_hasRightFixedColumn !== hasRightFixedColumn.value) {\n        hasRightFixedColumn.value = _hasRightFixedColumn;\n      }\n    });\n    const hasEllipsis = computed(() => {\n      for (const col of dataColumns.value) {\n        if (col.ellipsis) {\n          return true;\n        }\n      }\n      return false;\n    });\n    const handleChange = (type) => {\n      const extra = {\n        type,\n        page: page.value,\n        pageSize: pageSize.value,\n        sorter: computedSorter.value,\n        filters: computedFilters.value,\n        dragTarget: type === \"drag\" ? dragState.data : void 0\n      };\n      emit(\"change\", flattenRawData.value, extra);\n    };\n    const handleFilterChange = (dataIndex, filteredValues) => {\n      _filters.value = __spreadProps(__spreadValues({}, computedFilters.value), {\n        [dataIndex]: filteredValues\n      });\n      emit(\"filterChange\", dataIndex, filteredValues);\n      handleChange(\"filter\");\n    };\n    const handleSorterChange = (dataIndex, direction) => {\n      _sorter.value = direction ? {\n        field: dataIndex,\n        direction\n      } : void 0;\n      emit(\"sorterChange\", dataIndex, direction);\n      handleChange(\"sorter\");\n    };\n    const {\n      _filters,\n      computedFilters,\n      resetFilters,\n      clearFilters\n    } = useFilter({\n      columns: dataColumns,\n      onFilterChange: handleFilterChange\n    });\n    const {\n      _sorter,\n      computedSorter,\n      resetSorters,\n      clearSorters\n    } = useSorter({\n      columns: dataColumns,\n      onSorterChange: handleSorterChange\n    });\n    const disabledKeys = new Set();\n    const allRowKeys = computed(() => {\n      const allRowKeys2 = [];\n      disabledKeys.clear();\n      const travelData = (data) => {\n        if (isArray(data) && data.length > 0) {\n          for (const record of data) {\n            allRowKeys2.push(record[rowKey.value]);\n            if (record.disabled) {\n              disabledKeys.add(record[rowKey.value]);\n            }\n            if (record.children) {\n              travelData(record.children);\n            }\n          }\n        }\n      };\n      travelData(props.data);\n      return allRowKeys2;\n    });\n    const currentAllRowKeys = computed(() => {\n      const keys = [];\n      const travel = (data) => {\n        for (const record of data) {\n          keys.push(record.key);\n          if (record.children) {\n            travel(record.children);\n          }\n        }\n      };\n      travel(flattenData.value);\n      return keys;\n    });\n    const currentAllEnabledRowKeys = computed(() => {\n      const keys = [];\n      const travel = (data) => {\n        for (const record of data) {\n          if (!record.disabled) {\n            keys.push(record.key);\n          }\n          if (record.children) {\n            travel(record.children);\n          }\n        }\n      };\n      travel(flattenData.value);\n      return keys;\n    });\n    const {\n      isRadio,\n      selectedRowKeys,\n      currentSelectedRowKeys,\n      handleSelect,\n      handleSelectAllLeafs,\n      handleSelectAll,\n      select,\n      selectAll,\n      clearSelected\n    } = useRowSelection({\n      selectedKeys,\n      defaultSelectedKeys,\n      rowSelection,\n      currentAllRowKeys,\n      currentAllEnabledRowKeys,\n      emit\n    });\n    const {\n      expandedRowKeys,\n      handleExpand,\n      expand,\n      expandAll\n    } = useExpand({\n      expandedKeys,\n      defaultExpandedKeys,\n      defaultExpandAllRows,\n      expandable,\n      allRowKeys,\n      emit\n    });\n    const lazyLoadData = reactive({});\n    const addLazyLoadData = (children2, record) => {\n      if (children2) {\n        lazyLoadData[record.key] = children2;\n      }\n    };\n    const isValidRecord = (record) => {\n      var _a, _b;\n      for (const field of Object.keys(computedFilters.value)) {\n        const filteredValues = computedFilters.value[field];\n        const column = dataColumnMap.get(field);\n        if (column && ((_a = column.filterable) == null ? void 0 : _a.filter) && filteredValues.length > 0) {\n          const result = (_b = column.filterable) == null ? void 0 : _b.filter(filteredValues, record.raw);\n          if (!result) {\n            return result;\n          }\n        }\n      }\n      return true;\n    };\n    const {\n      dragType,\n      dragState,\n      handleDragStart,\n      handleDragEnter,\n      handleDragLeave,\n      handleDragover,\n      handleDragEnd,\n      handleDrop\n    } = useDrag(draggable);\n    const {\n      resizingColumn,\n      columnWidth,\n      handleThMouseDown\n    } = useColumnResize(thRefs, emit);\n    const processedData = computed(() => {\n      var _a;\n      const travel = (data) => {\n        const result = [];\n        for (const _record of data) {\n          const record = {\n            raw: _record,\n            key: _record[props.rowKey],\n            disabled: _record.disabled,\n            expand: _record.expand,\n            isLeaf: _record.isLeaf\n          };\n          if (_record.children) {\n            record.isLeaf = false;\n            record.children = travel(_record.children);\n          } else if (props.loadMore && !_record.isLeaf) {\n            record.isLeaf = false;\n            if (lazyLoadData[record.key]) {\n              record.children = travel(lazyLoadData[record.key]);\n            }\n          } else {\n            record.isLeaf = true;\n          }\n          record.hasSubtree = Boolean(record.children ? props.hideExpandButtonOnEmpty ? record.children.length > 0 : true : props.loadMore && !record.isLeaf);\n          result.push(record);\n        }\n        return result;\n      };\n      return travel((_a = props.data) != null ? _a : []);\n    });\n    const validData = computed(() => {\n      const travel = (data) => data.filter((record) => {\n        if (isValidRecord(record)) {\n          if (record.children) {\n            record.children = travel(record.children);\n          }\n          return true;\n        }\n        return false;\n      });\n      return Object.keys(computedFilters.value).length > 0 ? travel(processedData.value) : processedData.value;\n    });\n    const sortedData = computed(() => {\n      var _a, _b;\n      const data = [...validData.value];\n      if (data.length > 0) {\n        if ((_a = computedSorter.value) == null ? void 0 : _a.field) {\n          const column = dataColumnMap.get(computedSorter.value.field);\n          if (column && ((_b = column.sortable) == null ? void 0 : _b.sorter) !== true) {\n            const {\n              field,\n              direction\n            } = computedSorter.value;\n            data.sort((a, b) => {\n              var _a2;\n              const valueA = a.raw[field];\n              const valueB = b.raw[field];\n              if (((_a2 = column.sortable) == null ? void 0 : _a2.sorter) && isFunction(column.sortable.sorter)) {\n                return column.sortable.sorter(a.raw, b.raw, {\n                  dataIndex: field,\n                  direction\n                });\n              }\n              const result = valueA > valueB ? 1 : -1;\n              return direction === \"descend\" ? -result : result;\n            });\n          }\n        }\n        if (dragState.dragging && dragState.targetPath.length > 0) {\n          const target = spliceFromPath(data, dragState.sourcePath);\n          spliceFromPath(data, dragState.targetPath, target);\n        }\n      }\n      return data;\n    });\n    const {\n      page,\n      pageSize,\n      handlePageChange,\n      handlePageSizeChange\n    } = usePagination(props, emit);\n    const onlyCurrent = computed(() => {\n      var _a, _b;\n      return (_b = (_a = rowSelection.value) == null ? void 0 : _a.onlyCurrent) != null ? _b : false;\n    });\n    watch(page, (cur, pre) => {\n      if (cur !== pre && onlyCurrent.value) {\n        clearSelected();\n      }\n    });\n    const flattenData = computed(() => {\n      if (props.pagination && sortedData.value.length > pageSize.value) {\n        return sortedData.value.slice((page.value - 1) * pageSize.value, page.value * pageSize.value);\n      }\n      return sortedData.value;\n    });\n    const flattenRawData = computed(() => flattenData.value.map((item) => item.raw));\n    const getSummaryData = () => {\n      return dataColumns.value.reduce((per, column, index) => {\n        if (column.dataIndex) {\n          if (index === 0) {\n            per[column.dataIndex] = props.summaryText;\n          } else {\n            let count = 0;\n            let isNotNumber = false;\n            flattenData.value.forEach((data) => {\n              if (column.dataIndex) {\n                if (isNumber(data.raw[column.dataIndex])) {\n                  count += data.raw[column.dataIndex];\n                } else if (!isUndefined(data.raw[column.dataIndex]) && !isNull(data.raw[column.dataIndex])) {\n                  isNotNumber = true;\n                }\n              }\n            });\n            per[column.dataIndex] = isNotNumber ? \"\" : count;\n          }\n        }\n        return per;\n      }, {});\n    };\n    const getTableDataWithRaw = (data) => {\n      if (data && data.length > 0) {\n        return data.map((raw) => {\n          return {\n            raw,\n            key: raw[props.rowKey]\n          };\n        });\n      }\n      return void 0;\n    };\n    const summaryData = computed(() => {\n      if (props.summary) {\n        if (isFunction(props.summary)) {\n          return getTableDataWithRaw(props.summary({\n            columns: dataColumns.value,\n            data: flattenRawData.value\n          }));\n        }\n        return getTableDataWithRaw([getSummaryData()]);\n      }\n      return void 0;\n    });\n    const containerRef = ref();\n    const containerScrollLeft = ref(0);\n    const alignLeft = ref(true);\n    const alignRight = ref(true);\n    const setAlignPosition = () => {\n      let _alignLeft = true;\n      let _alignRight = true;\n      const scrollContainer = splitTable.value ? tbodyRef.value : containerRef.value;\n      if (scrollContainer) {\n        _alignLeft = containerScrollLeft.value === 0;\n        _alignRight = Math.ceil(containerScrollLeft.value + scrollContainer.offsetWidth) >= scrollContainer.scrollWidth;\n      }\n      if (_alignLeft !== alignLeft.value) {\n        alignLeft.value = _alignLeft;\n      }\n      if (_alignRight !== alignRight.value) {\n        alignRight.value = _alignRight;\n      }\n    };\n    const getTableScrollCls = () => {\n      if (alignLeft.value && alignRight.value) {\n        return `${prefixCls}-scroll-position-both`;\n      }\n      if (alignLeft.value) {\n        return `${prefixCls}-scroll-position-left`;\n      }\n      if (alignRight.value) {\n        return `${prefixCls}-scroll-position-right`;\n      }\n      return `${prefixCls}-scroll-position-middle`;\n    };\n    const getTableFixedCls = () => {\n      const cls2 = [];\n      if (hasLeftFixedColumn.value) {\n        cls2.push(`${prefixCls}-has-fixed-col-left`);\n      }\n      if (hasRightFixedColumn.value) {\n        cls2.push(`${prefixCls}-has-fixed-col-right`);\n      }\n      return cls2;\n    };\n    const handleScroll = (e) => {\n      if (e.target.scrollLeft !== containerScrollLeft.value) {\n        containerScrollLeft.value = e.target.scrollLeft;\n      }\n      setAlignPosition();\n    };\n    const onTbodyScroll = (e) => {\n      handleScroll(e);\n      const {\n        scrollLeft\n      } = e.target;\n      if (theadRef.value) {\n        theadRef.value.scrollLeft = scrollLeft;\n      }\n      if (summaryRef.value) {\n        summaryRef.value.scrollLeft = scrollLeft;\n      }\n    };\n    const handleRowClick = (record, ev) => {\n      emit(\"rowClick\", record.raw, ev);\n    };\n    const handleCellClick = (record, column, ev) => {\n      emit(\"cellClick\", record.raw, column, ev);\n    };\n    const handleHeaderClick = (column, ev) => {\n      emit(\"headerClick\", column, ev);\n    };\n    const operations = computed(() => {\n      var _a, _b;\n      const operations2 = [];\n      const hasFixedColumn = hasLeftFixedColumn.value || hasRightFixedColumn.value;\n      let dragHandle;\n      let expand2;\n      let selection;\n      if (((_a = props.draggable) == null ? void 0 : _a.type) === \"handle\") {\n        dragHandle = {\n          name: \"drag-handle\",\n          title: props.draggable.title,\n          width: props.draggable.width,\n          fixed: props.draggable.fixed || hasFixedColumn\n        };\n        operations2.push(dragHandle);\n      }\n      if (props.expandable) {\n        expand2 = {\n          name: \"expand\",\n          title: props.expandable.title,\n          width: props.expandable.width,\n          fixed: props.expandable.fixed || hasFixedColumn\n        };\n        operations2.push(expand2);\n      }\n      if (props.rowSelection) {\n        selection = {\n          name: props.rowSelection.type === \"radio\" ? \"selection-radio\" : \"selection-checkbox\",\n          title: props.rowSelection.title,\n          width: props.rowSelection.width,\n          fixed: props.rowSelection.fixed || hasFixedColumn\n        };\n        operations2.push(selection);\n      }\n      const operationsFn = (_b = props.components) == null ? void 0 : _b.operations;\n      return isFunction(operationsFn) ? operationsFn({\n        dragHandle,\n        expand: expand2,\n        selection\n      }) : operations2;\n    });\n    const headerStyle = computed(() => {\n      var _a, _b, _c, _d;\n      if (isScroll.value.x) {\n        const style2 = {\n          width: isNumber((_a = props.scroll) == null ? void 0 : _a.x) ? `${(_b = props.scroll) == null ? void 0 : _b.x}px` : (_c = props.scroll) == null ? void 0 : _c.x\n        };\n        if ((_d = props.scroll) == null ? void 0 : _d.minWidth) {\n          style2.minWidth = isNumber(props.scroll.minWidth) ? `${props.scroll.minWidth}px` : props.scroll.minWidth;\n        }\n        return style2;\n      }\n      return void 0;\n    });\n    const contentStyle = computed(() => {\n      var _a, _b, _c, _d;\n      if (isScroll.value.x && flattenData.value.length > 0) {\n        const style2 = {\n          width: isNumber((_a = props.scroll) == null ? void 0 : _a.x) ? `${(_b = props.scroll) == null ? void 0 : _b.x}px` : (_c = props.scroll) == null ? void 0 : _c.x\n        };\n        if ((_d = props.scroll) == null ? void 0 : _d.minWidth) {\n          style2.minWidth = isNumber(props.scroll.minWidth) ? `${props.scroll.minWidth}px` : props.scroll.minWidth;\n        }\n        return style2;\n      }\n      return void 0;\n    });\n    const addColumn = (id, column) => {\n      slotColumnMap.set(id, column);\n    };\n    const removeColumn = (id) => {\n      slotColumnMap.delete(id);\n    };\n    provide(tableInjectionKey, reactive({\n      loadMore,\n      addLazyLoadData,\n      slots,\n      sorter: computedSorter,\n      filters: computedFilters,\n      filterIconAlignLeft,\n      resizingColumn,\n      checkStrictly,\n      currentAllEnabledRowKeys,\n      currentSelectedRowKeys,\n      addColumn,\n      removeColumn,\n      onSelectAll: handleSelectAll,\n      onSelect: handleSelect,\n      onSelectAllLeafs: handleSelectAllLeafs,\n      onSorterChange: handleSorterChange,\n      onFilterChange: handleFilterChange,\n      onThMouseDown: handleThMouseDown\n    }));\n    const cls = computed(() => [prefixCls, `${prefixCls}-size-${props.size}`, {\n      [`${prefixCls}-border`]: bordered.value.wrapper,\n      [`${prefixCls}-border-cell`]: bordered.value.cell,\n      [`${prefixCls}-border-header-cell`]: !bordered.value.cell && bordered.value.headerCell,\n      [`${prefixCls}-border-body-cell`]: !bordered.value.cell && bordered.value.bodyCell,\n      [`${prefixCls}-stripe`]: props.stripe,\n      [`${prefixCls}-hover`]: props.hoverable,\n      [`${prefixCls}-dragging`]: dragState.dragging,\n      [`${prefixCls}-type-selection`]: Boolean(props.rowSelection),\n      [`${prefixCls}-empty`]: props.data && flattenData.value.length === 0,\n      [`${prefixCls}-layout-fixed`]: props.tableLayoutFixed || isScroll.value.x || splitTable.value || hasEllipsis.value\n    }]);\n    const paginationCls = computed(() => [`${prefixCls}-pagination`, {\n      [`${prefixCls}-pagination-left`]: props.pagePosition === \"tl\" || props.pagePosition === \"bl\",\n      [`${prefixCls}-pagination-center`]: props.pagePosition === \"top\" || props.pagePosition === \"bottom\",\n      [`${prefixCls}-pagination-right`]: props.pagePosition === \"tr\" || props.pagePosition === \"br\",\n      [`${prefixCls}-pagination-top`]: isPaginationTop.value\n    }]);\n    const tableCls = computed(() => {\n      const cls2 = getTableFixedCls();\n      if (isScroll.value.x) {\n        cls2.push(getTableScrollCls());\n      }\n      if (splitTable.value) {\n        cls2.push(`${prefixCls}-scroll-y`);\n      }\n      return cls2;\n    });\n    const isVirtualList = computed(() => Boolean(props.virtualListProps));\n    const thWidth = ref({});\n    const getThWidth = () => {\n      const width = {};\n      for (const key of Object.keys(thRefs.value)) {\n        width[key] = thRefs.value[key].offsetWidth;\n      }\n      thWidth.value = width;\n    };\n    const hasScrollBar = ref(false);\n    const isTbodyHasScrollBar = () => {\n      if (tbodyRef.value) {\n        return tbodyRef.value.offsetWidth > tbodyRef.value.clientWidth;\n      }\n      return false;\n    };\n    const handleTbodyResize = () => {\n      const _hasScrollBar = isTbodyHasScrollBar();\n      if (hasScrollBar.value !== _hasScrollBar) {\n        hasScrollBar.value = _hasScrollBar;\n      }\n      setAlignPosition();\n      getThWidth();\n    };\n    onMounted(() => {\n      hasScrollBar.value = isTbodyHasScrollBar();\n      getThWidth();\n    });\n    const spinProps = computed(() => isObject(props.loading) ? props.loading : {\n      loading: props.loading\n    });\n    const renderEmpty = () => {\n      return createVNode(Tr, {\n        \"empty\": true\n      }, {\n        default: () => [createVNode(Td, {\n          \"colSpan\": dataColumns.value.length + operations.value.length\n        }, {\n          default: () => {\n            var _a, _b;\n            return [(_b = (_a = slots.empty) == null ? void 0 : _a.call(slots)) != null ? _b : createVNode(Empty, null, null)];\n          }\n        })]\n      });\n    };\n    const renderExpandContent = (record) => {\n      var _a;\n      if (record.expand) {\n        return isFunction(record.expand) ? record.expand() : record.expand;\n      }\n      if (slots[\"expand-row\"]) {\n        return slots[\"expand-row\"]({\n          record: record.raw\n        });\n      }\n      if ((_a = props.expandable) == null ? void 0 : _a.expandedRowRender) {\n        return props.expandable.expandedRowRender(record.raw);\n      }\n      return void 0;\n    };\n    const allColumns = computed(() => [].concat(operations.value, dataColumns.value));\n    const spanColumns = computed(() => props.spanAll ? allColumns.value : dataColumns.value);\n    const {\n      tableSpan,\n      removedCells\n    } = useSpan({\n      spanMethod,\n      data: flattenData,\n      columns: spanColumns\n    });\n    const {\n      tableSpan: tableSummarySpan,\n      removedCells: removedSummaryCells\n    } = useSpan({\n      spanMethod: summarySpanMethod,\n      data: flattenData,\n      columns: allColumns\n    });\n    const getVirtualColumnStyle = (name) => {\n      if (!isVirtualList.value || !name || !thWidth.value[name]) {\n        return void 0;\n      }\n      return {\n        width: `${thWidth.value[name]}px`\n      };\n    };\n    const renderSummaryRow = (record, rowIndex) => {\n      return createVNode(Tr, {\n        \"key\": `table-summary-${rowIndex}`,\n        \"class\": [`${prefixCls}-tr-summary`, props.rowClass],\n        \"onClick\": (ev) => handleRowClick(record, ev)\n      }, {\n        default: () => [operations.value.map((operation, index) => {\n          var _a;\n          const cellId = `${rowIndex}-${index}`;\n          const [rowspan, colspan] = (_a = tableSummarySpan.value[cellId]) != null ? _a : [1, 1];\n          if (removedSummaryCells.value.includes(cellId)) {\n            return null;\n          }\n          const style2 = getVirtualColumnStyle(operation.name);\n          return createVNode(OperationTd, {\n            \"style\": style2,\n            \"operationColumn\": operation,\n            \"operations\": operations.value,\n            \"record\": record,\n            \"rowSpan\": rowspan,\n            \"colSpan\": colspan,\n            \"summary\": true\n          }, null);\n        }), dataColumns.value.map((column, index) => {\n          var _a;\n          const cellId = `${rowIndex}-${operations.value.length + index}`;\n          const [rowspan, colspan] = (_a = tableSummarySpan.value[cellId]) != null ? _a : [1, 1];\n          if (removedSummaryCells.value.includes(cellId)) {\n            return null;\n          }\n          const style2 = getVirtualColumnStyle(column.dataIndex);\n          return createVNode(Td, {\n            \"key\": `td-${cellId}`,\n            \"style\": style2,\n            \"rowIndex\": rowIndex,\n            \"record\": record,\n            \"column\": column,\n            \"operations\": operations.value,\n            \"dataColumns\": dataColumns.value,\n            \"rowSpan\": rowspan,\n            \"colSpan\": colspan,\n            \"summary\": true,\n            \"onClick\": (ev) => handleCellClick(record, column, ev)\n          }, {\n            td: slots.td,\n            cell: slots[\"summary-cell\"]\n          });\n        })],\n        tr: slots.tr\n      });\n    };\n    const renderSummary = () => {\n      if (summaryData.value) {\n        return createVNode(\"tfoot\", null, [summaryData.value.map((data, index) => renderSummaryRow(data, index))]);\n      }\n      return null;\n    };\n    const renderVirtualListBody = () => {\n      return createVNode(ClientOnly, null, {\n        default: () => [createVNode(VirtualList, mergeProps({\n          \"ref\": virtualListRef,\n          \"class\": `${prefixCls}-body`,\n          \"data\": flattenData.value,\n          \"itemKey\": \"_key\",\n          \"type\": \"table\",\n          \"outerAttrs\": {\n            class: `${prefixCls}-element`,\n            style: contentStyle.value\n          }\n        }, props.virtualListProps, {\n          \"onResize\": handleTbodyResize,\n          \"onScroll\": handleScroll\n        }), {\n          item: ({\n            item,\n            index\n          }) => renderRecord(item, index)\n        })]\n      });\n    };\n    const renderExpandBtn = (record, stopPropagation = true) => {\n      var _a, _b, _c, _d, _e;\n      const currentKey = record.key;\n      const expanded = expandedRowKeys.value.includes(currentKey);\n      return createVNode(\"button\", {\n        \"type\": \"button\",\n        \"class\": `${prefixCls}-expand-btn`,\n        \"onClick\": (ev) => {\n          handleExpand(currentKey, record.raw);\n          if (stopPropagation) {\n            ev.stopPropagation();\n          }\n        }\n      }, [(_e = (_d = (_a = slots[\"expand-icon\"]) == null ? void 0 : _a.call(slots, {\n        expanded,\n        record: record.raw\n      })) != null ? _d : (_c = (_b = props.expandable) == null ? void 0 : _b.icon) == null ? void 0 : _c.call(_b, expanded, record.raw)) != null ? _e : expanded ? createVNode(IconMinus, null, null) : createVNode(IconPlus, null, null)]);\n    };\n    const renderExpand = (record, {\n      indentSize,\n      indexPath,\n      allowDrag,\n      expandContent\n    }) => {\n      var _a;\n      if (record.hasSubtree) {\n        return (_a = record.children) == null ? void 0 : _a.map((item, index) => renderRecord(item, index, {\n          indentSize,\n          indexPath,\n          allowDrag\n        }));\n      }\n      if (expandContent) {\n        const scrollContainer = splitTable.value ? tbodyRef.value : containerRef.value;\n        return createVNode(Tr, {\n          \"key\": `${record.key}-expand`,\n          \"expand\": true\n        }, {\n          default: () => [createVNode(Td, {\n            \"isFixedExpand\": hasLeftFixedColumn.value || hasRightFixedColumn.value,\n            \"containerWidth\": scrollContainer == null ? void 0 : scrollContainer.clientWidth,\n            \"colSpan\": dataColumns.value.length + operations.value.length\n          }, _isSlot(expandContent) ? expandContent : {\n            default: () => [expandContent]\n          })]\n        });\n      }\n      return null;\n    };\n    const renderRecord = (record, rowIndex, {\n      indentSize = 0,\n      indexPath,\n      allowDrag = true\n    } = {}) => {\n      var _a;\n      const currentKey = record.key;\n      const currentPath = (indexPath != null ? indexPath : []).concat(rowIndex);\n      const expandContent = renderExpandContent(record);\n      const showExpand = expandedRowKeys.value.includes(currentKey);\n      const isDragTarget = dragState.sourceKey === record.key;\n      const dragSourceEvent = dragType.value ? {\n        draggable: allowDrag,\n        onDragstart: (ev) => {\n          if (!allowDrag)\n            return;\n          handleDragStart(ev, record.key, currentPath, record.raw);\n        },\n        onDragend: (ev) => {\n          if (!allowDrag)\n            return;\n          handleDragEnd(ev);\n        }\n      } : {};\n      const dragTargetEvent = dragType.value ? {\n        onDragenter: (ev) => {\n          if (!allowDrag)\n            return;\n          handleDragEnter(ev, currentPath);\n        },\n        onDragover: (ev) => {\n          if (!allowDrag)\n            return;\n          handleDragover(ev);\n        },\n        onDrop: (ev) => {\n          if (!allowDrag)\n            return;\n          handleChange(\"drag\");\n          handleDrop(ev);\n        }\n      } : {};\n      return createVNode(Fragment, null, [createVNode(Tr, mergeProps({\n        \"key\": currentKey,\n        \"class\": [{\n          [`${prefixCls}-tr-draggable`]: dragType.value === \"row\",\n          [`${prefixCls}-tr-drag`]: isDragTarget\n        }, props.rowClass],\n        \"rowIndex\": rowIndex,\n        \"record\": record,\n        \"checked\": (_a = selectedRowKeys.value) == null ? void 0 : _a.includes(currentKey),\n        \"onClick\": (ev) => handleRowClick(record, ev)\n      }, dragType.value === \"row\" ? dragSourceEvent : {}, dragTargetEvent), {\n        default: () => [operations.value.map((operation, index) => {\n          var _a2;\n          const cellId = `${rowIndex}-${index}`;\n          const [rowspan, colspan] = props.spanAll ? (_a2 = tableSpan.value[cellId]) != null ? _a2 : [1, 1] : [1, 1];\n          if (props.spanAll && removedCells.value.includes(cellId)) {\n            return null;\n          }\n          const style2 = getVirtualColumnStyle(operation.name);\n          return createVNode(OperationTd, mergeProps({\n            \"key\": `operation-td-${index}`,\n            \"style\": style2,\n            \"operationColumn\": operation,\n            \"operations\": operations.value,\n            \"record\": record,\n            \"hasExpand\": Boolean(expandContent),\n            \"selectedRowKeys\": currentSelectedRowKeys.value,\n            \"rowSpan\": rowspan,\n            \"colSpan\": colspan,\n            \"renderExpandBtn\": renderExpandBtn\n          }, dragType.value === \"handle\" ? dragSourceEvent : {}), {\n            \"drag-handle-icon\": slots[\"drag-handle-icon\"]\n          });\n        }), dataColumns.value.map((column, index) => {\n          var _a2;\n          const cellId = `${rowIndex}-${props.spanAll ? operations.value.length + index : index}`;\n          const [rowspan, colspan] = (_a2 = tableSpan.value[cellId]) != null ? _a2 : [1, 1];\n          if (removedCells.value.includes(cellId)) {\n            return null;\n          }\n          const extraProps = index === 0 ? {\n            showExpandBtn: record.hasSubtree,\n            indentSize: record.hasSubtree ? indentSize - 20 : indentSize\n          } : {};\n          const style2 = getVirtualColumnStyle(column.dataIndex);\n          return createVNode(Td, mergeProps({\n            \"key\": `td-${index}`,\n            \"style\": style2,\n            \"rowIndex\": rowIndex,\n            \"record\": record,\n            \"column\": column,\n            \"operations\": operations.value,\n            \"dataColumns\": dataColumns.value,\n            \"rowSpan\": rowspan,\n            \"renderExpandBtn\": renderExpandBtn,\n            \"colSpan\": colspan\n          }, extraProps, {\n            \"onClick\": (ev) => handleCellClick(record, column, ev)\n          }), {\n            td: slots.td\n          });\n        })],\n        tr: slots.tr\n      }), showExpand && renderExpand(record, {\n        indentSize: indentSize + props.indentSize,\n        indexPath: currentPath,\n        allowDrag: allowDrag && !isDragTarget,\n        expandContent\n      })]);\n    };\n    const renderBody = () => {\n      const hasSubData = flattenData.value.some((record) => Boolean(record.hasSubtree));\n      return createVNode(Tbody, null, {\n        default: () => [flattenData.value.length > 0 ? flattenData.value.map((record, index) => renderRecord(record, index, {\n          indentSize: hasSubData ? 20 : 0\n        })) : renderEmpty()],\n        tbody: slots.tbody\n      });\n    };\n    const renderHeader = () => createVNode(Thead, null, {\n      default: () => [groupColumns.value.map((row, index) => createVNode(Tr, {\n        \"key\": `header-row-${index}`\n      }, {\n        default: () => [index === 0 && operations.value.map((operation, index2) => {\n          var _a;\n          return createVNode(OperationTh, {\n            \"key\": `operation-th-${index2}`,\n            \"ref\": (ins) => {\n              if ((ins == null ? void 0 : ins.$el) && operation.name) {\n                thRefs.value[operation.name] = ins.$el;\n              }\n            },\n            \"operationColumn\": operation,\n            \"operations\": operations.value,\n            \"selectAll\": Boolean(operation.name === \"selection-checkbox\" && ((_a = props.rowSelection) == null ? void 0 : _a.showCheckedAll)),\n            \"rowSpan\": groupColumns.value.length\n          }, null);\n        }), row.map((column, index2) => {\n          const resizable = props.columnResizable && Boolean(column.dataIndex) && index2 < row.length - 1;\n          return createVNode(Th, {\n            \"key\": `th-${index2}`,\n            \"ref\": (ins) => {\n              if ((ins == null ? void 0 : ins.$el) && column.dataIndex) {\n                thRefs.value[column.dataIndex] = ins.$el;\n              }\n            },\n            \"column\": column,\n            \"operations\": operations.value,\n            \"dataColumns\": dataColumns.value,\n            \"resizable\": resizable,\n            \"onClick\": (ev) => handleHeaderClick(column, ev)\n          }, {\n            th: slots.th\n          });\n        })]\n      }))],\n      thead: slots.thead\n    });\n    const renderContent = () => {\n      if (splitTable.value) {\n        const style2 = {\n          overflowY: hasScrollBar.value ? \"scroll\" : \"hidden\"\n        };\n        if (isNumber(props.stickyHeader)) {\n          style2.top = `${props.stickyHeader}px`;\n        }\n        return createVNode(Fragment, null, [props.showHeader && createVNode(\"div\", {\n          \"ref\": theadRef,\n          \"class\": [`${prefixCls}-header`, {\n            [`${prefixCls}-header-sticky`]: props.stickyHeader\n          }],\n          \"style\": style2\n        }, [createVNode(\"table\", {\n          \"class\": `${prefixCls}-element`,\n          \"style\": headerStyle.value,\n          \"cellpadding\": 0,\n          \"cellspacing\": 0\n        }, [createVNode(ColGroup, {\n          \"dataColumns\": dataColumns.value,\n          \"operations\": operations.value,\n          \"columnWidth\": columnWidth\n        }, null), renderHeader()])]), isVirtualList.value ? renderVirtualListBody() : createVNode(ResizeObserver, {\n          \"onResize\": handleTbodyResize\n        }, {\n          default: () => {\n            var _a, _b;\n            return [createVNode(\"div\", {\n              \"ref\": tbodyRef,\n              \"class\": `${prefixCls}-body`,\n              \"style\": {\n                maxHeight: isNumber((_a = props.scroll) == null ? void 0 : _a.y) ? `${(_b = props.scroll) == null ? void 0 : _b.y}px` : \"100%\"\n              },\n              \"onScroll\": onTbodyScroll\n            }, [createVNode(\"table\", {\n              \"class\": `${prefixCls}-element`,\n              \"style\": contentStyle.value,\n              \"cellpadding\": 0,\n              \"cellspacing\": 0\n            }, [flattenData.value.length !== 0 && createVNode(ColGroup, {\n              \"dataColumns\": dataColumns.value,\n              \"operations\": operations.value,\n              \"columnWidth\": columnWidth\n            }, null), renderBody()])])];\n          }\n        }), summaryData.value && summaryData.value.length && createVNode(\"div\", {\n          \"ref\": summaryRef,\n          \"class\": `${prefixCls}-tfoot`,\n          \"style\": {\n            overflowY: hasScrollBar.value ? \"scroll\" : \"hidden\"\n          }\n        }, [createVNode(\"table\", {\n          \"class\": `${prefixCls}-element`,\n          \"style\": contentStyle.value,\n          \"cellpadding\": 0,\n          \"cellspacing\": 0\n        }, [createVNode(ColGroup, {\n          \"dataColumns\": dataColumns.value,\n          \"operations\": operations.value,\n          \"columnWidth\": columnWidth\n        }, null), renderSummary()])])]);\n      }\n      return createVNode(ResizeObserver, {\n        \"onResize\": () => setAlignPosition()\n      }, {\n        default: () => [createVNode(\"table\", {\n          \"class\": `${prefixCls}-element`,\n          \"cellpadding\": 0,\n          \"cellspacing\": 0,\n          \"style\": contentStyle.value\n        }, [createVNode(ColGroup, {\n          \"dataColumns\": dataColumns.value,\n          \"operations\": operations.value,\n          \"columnWidth\": columnWidth\n        }, null), props.showHeader && renderHeader(), renderBody(), summaryData.value && summaryData.value.length && renderSummary()])]\n      });\n    };\n    const renderTable = (content) => {\n      var _a;\n      const style2 = ((_a = props.scroll) == null ? void 0 : _a.maxHeight) ? {\n        maxHeight: props.scroll.maxHeight\n      } : void 0;\n      return createVNode(Fragment, null, [createVNode(\"div\", {\n        \"class\": [`${prefixCls}-container`, tableCls.value]\n      }, [createVNode(\"div\", {\n        \"ref\": containerRef,\n        \"class\": [`${prefixCls}-content`, {\n          [`${prefixCls}-content-scroll-x`]: !splitTable.value\n        }],\n        \"style\": style2,\n        \"onScroll\": handleScroll\n      }, [content ? createVNode(\"table\", {\n        \"class\": `${prefixCls}-element`,\n        \"cellpadding\": 0,\n        \"cellspacing\": 0\n      }, [content()]) : renderContent()])]), slots.footer && createVNode(\"div\", {\n        \"class\": `${prefixCls}-footer`\n      }, [slots.footer()])]);\n    };\n    const renderPagination = () => {\n      var _a, _b;\n      const paginationProps = isObject(props.pagination) ? omit(props.pagination, [\"current\", \"pageSize\", \"defaultCurrent\", \"defaultPageSize\"]) : {};\n      return createVNode(\"div\", {\n        \"class\": paginationCls.value\n      }, [(_a = slots[\"pagination-left\"]) == null ? void 0 : _a.call(slots), createVNode(Pagination, mergeProps({\n        \"total\": validData.value.length,\n        \"current\": page.value,\n        \"pageSize\": pageSize.value,\n        \"onChange\": (page2) => {\n          handlePageChange(page2);\n          handleChange(\"pagination\");\n        },\n        \"onPageSizeChange\": (pageSize2) => {\n          handlePageSizeChange(pageSize2);\n          handleChange(\"pagination\");\n        }\n      }, paginationProps), null), (_b = slots[\"pagination-right\"]) == null ? void 0 : _b.call(slots)]);\n    };\n    const style = computed(() => {\n      var _a, _b;\n      if (isString((_a = props.scroll) == null ? void 0 : _a.y)) {\n        return {\n          height: (_b = props.scroll) == null ? void 0 : _b.y\n        };\n      }\n      return void 0;\n    });\n    const render = () => {\n      var _a;\n      if (slots.default) {\n        return createVNode(\"div\", {\n          \"class\": cls.value\n        }, [renderTable(slots.default)]);\n      }\n      children.value = (_a = slots.columns) == null ? void 0 : _a.call(slots);\n      return createVNode(\"div\", {\n        \"class\": cls.value,\n        \"style\": style.value\n      }, [children.value, createVNode(Spin, spinProps.value, {\n        default: () => [props.pagination !== false && flattenData.value.length > 0 && isPaginationTop.value && renderPagination(), renderTable(), props.pagination !== false && flattenData.value.length > 0 && !isPaginationTop.value && renderPagination()]\n      })]);\n    };\n    return {\n      render,\n      selfExpand: expand,\n      selfExpandAll: expandAll,\n      selfSelect: select,\n      selfSelectAll: selectAll,\n      selfResetFilters: resetFilters,\n      selfClearFilters: clearFilters,\n      selfResetSorters: resetSorters,\n      selfClearSorters: clearSorters\n    };\n  },\n  methods: {\n    selectAll(checked) {\n      return this.selfSelectAll(checked);\n    },\n    select(rowKey, checked) {\n      return this.selfSelect(rowKey, checked);\n    },\n    expandAll(checked) {\n      return this.selfExpandAll(checked);\n    },\n    expand(rowKey, checked) {\n      return this.selfExpand(rowKey, checked);\n    },\n    resetFilters(dataIndex) {\n      return this.selfResetFilters(dataIndex);\n    },\n    clearFilters(dataIndex) {\n      return this.selfClearFilters(dataIndex);\n    },\n    resetSorters() {\n      return this.selfResetSorters();\n    },\n    clearSorters() {\n      return this.selfClearSorters();\n    }\n  },\n  render() {\n    return this.render();\n  }\n});\nexport { _Table as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}