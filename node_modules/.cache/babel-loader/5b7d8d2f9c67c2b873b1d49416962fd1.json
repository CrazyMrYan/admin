{"ast":null,"code":"import { ref, computed } from \"vue\";\n\nconst useSelectedPath = (options, {\n  optionMap,\n  filteredLeafOptions,\n  showSearchPanel,\n  expandChild\n}) => {\n  const activeKey = ref();\n  const activeOption = computed(() => {\n    if (activeKey.value) return optionMap.get(activeKey.value);\n    return void 0;\n  });\n  const selectedPath = ref([]);\n  const displayColumns = computed(() => {\n    const columns = [options.value];\n\n    for (const key of selectedPath.value) {\n      const option = optionMap.get(key);\n\n      if (option == null ? void 0 : option.children) {\n        columns.push(option.children);\n      }\n    }\n\n    return columns;\n  });\n\n  const setSelectedPath = key => {\n    var _a;\n\n    const option = getTargetOption(key);\n    selectedPath.value = (_a = option == null ? void 0 : option.path.map(item => item.key)) != null ? _a : [];\n  };\n\n  const setActiveKey = key => {\n    activeKey.value = key;\n  };\n\n  const enabledOptions = computed(() => {\n    var _a;\n\n    if (showSearchPanel == null ? void 0 : showSearchPanel.value) {\n      return filteredLeafOptions.value.filter(item => !item.disabled);\n    }\n\n    if (activeOption.value && activeOption.value.parent) {\n      return (_a = activeOption.value.parent.children) == null ? void 0 : _a.filter(item => !item.disabled);\n    }\n\n    return options.value.filter(item => !item.disabled);\n  });\n\n  const getTargetOption = key => {\n    let target = key ? optionMap.get(key) : void 0;\n\n    if (expandChild.value) {\n      while (target && target.children && target.children.length > 0) {\n        target = target.children[0];\n      }\n    }\n\n    return target;\n  };\n\n  const getNextActiveNode = direction => {\n    var _a, _b, _c, _d, _e, _f, _g;\n\n    const _length = (_b = (_a = enabledOptions.value) == null ? void 0 : _a.length) != null ? _b : 0;\n\n    if (activeKey.value) {\n      const enabledIndex = (_d = (_c = enabledOptions.value) == null ? void 0 : _c.findIndex(item => item.key === activeKey.value)) != null ? _d : 0;\n\n      if (direction === \"next\") {\n        return (_e = enabledOptions.value) == null ? void 0 : _e[(_length + enabledIndex + 1) % _length];\n      }\n\n      return (_f = enabledOptions.value) == null ? void 0 : _f[(_length + enabledIndex - 1) % _length];\n    }\n\n    return (_g = enabledOptions.value) == null ? void 0 : _g[0];\n  };\n\n  return {\n    activeKey,\n    activeOption,\n    selectedPath,\n    displayColumns,\n    setActiveKey,\n    setSelectedPath,\n    getNextActiveNode\n  };\n};\n\nexport { useSelectedPath };","map":{"version":3,"names":["ref","computed","useSelectedPath","options","optionMap","filteredLeafOptions","showSearchPanel","expandChild","activeKey","activeOption","value","get","selectedPath","displayColumns","columns","key","option","children","push","setSelectedPath","_a","getTargetOption","path","map","item","setActiveKey","enabledOptions","filter","disabled","parent","target","length","getNextActiveNode","direction","_b","_c","_d","_e","_f","_g","_length","enabledIndex","findIndex"],"sources":["/www/wwwroot/admin/node_modules/@arco-design/web-vue/es/cascader/hooks/use-selected-path.js"],"sourcesContent":["import { ref, computed } from \"vue\";\nconst useSelectedPath = (options, {\n  optionMap,\n  filteredLeafOptions,\n  showSearchPanel,\n  expandChild\n}) => {\n  const activeKey = ref();\n  const activeOption = computed(() => {\n    if (activeKey.value)\n      return optionMap.get(activeKey.value);\n    return void 0;\n  });\n  const selectedPath = ref([]);\n  const displayColumns = computed(() => {\n    const columns = [options.value];\n    for (const key of selectedPath.value) {\n      const option = optionMap.get(key);\n      if (option == null ? void 0 : option.children) {\n        columns.push(option.children);\n      }\n    }\n    return columns;\n  });\n  const setSelectedPath = (key) => {\n    var _a;\n    const option = getTargetOption(key);\n    selectedPath.value = (_a = option == null ? void 0 : option.path.map((item) => item.key)) != null ? _a : [];\n  };\n  const setActiveKey = (key) => {\n    activeKey.value = key;\n  };\n  const enabledOptions = computed(() => {\n    var _a;\n    if (showSearchPanel == null ? void 0 : showSearchPanel.value) {\n      return filteredLeafOptions.value.filter((item) => !item.disabled);\n    }\n    if (activeOption.value && activeOption.value.parent) {\n      return (_a = activeOption.value.parent.children) == null ? void 0 : _a.filter((item) => !item.disabled);\n    }\n    return options.value.filter((item) => !item.disabled);\n  });\n  const getTargetOption = (key) => {\n    let target = key ? optionMap.get(key) : void 0;\n    if (expandChild.value) {\n      while (target && target.children && target.children.length > 0) {\n        target = target.children[0];\n      }\n    }\n    return target;\n  };\n  const getNextActiveNode = (direction) => {\n    var _a, _b, _c, _d, _e, _f, _g;\n    const _length = (_b = (_a = enabledOptions.value) == null ? void 0 : _a.length) != null ? _b : 0;\n    if (activeKey.value) {\n      const enabledIndex = (_d = (_c = enabledOptions.value) == null ? void 0 : _c.findIndex((item) => item.key === activeKey.value)) != null ? _d : 0;\n      if (direction === \"next\") {\n        return (_e = enabledOptions.value) == null ? void 0 : _e[(_length + enabledIndex + 1) % _length];\n      }\n      return (_f = enabledOptions.value) == null ? void 0 : _f[(_length + enabledIndex - 1) % _length];\n    }\n    return (_g = enabledOptions.value) == null ? void 0 : _g[0];\n  };\n  return {\n    activeKey,\n    activeOption,\n    selectedPath,\n    displayColumns,\n    setActiveKey,\n    setSelectedPath,\n    getNextActiveNode\n  };\n};\nexport { useSelectedPath };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}