{"ast":null,"code":"import { toRefs, cloneVNode, watch } from \"vue\";\n\nconst findElement = node => {\n  var _a;\n\n  let res = (_a = node == null ? void 0 : node.$el) != null ? _a : node;\n\n  while (res && !res.tagName) {\n    res = res.nextSibling;\n  }\n\n  return res;\n};\n\nfunction useRenderChildren(props, events = {}) {\n  const {\n    internalData,\n    visibleData,\n    itemRender\n  } = toRefs(props);\n  const itemRenderCache = new Map();\n\n  const renderChildren = () => {\n    return visibleData.value.map(({\n      item,\n      index,\n      key\n    }) => {\n      if (!itemRenderCache.has(key)) {\n        const [node] = itemRender.value({\n          item,\n          index\n        });\n        let dom;\n\n        const resizeHandler = () => {\n          var _a;\n\n          if (dom) {\n            (_a = events.onItemResize) == null ? void 0 : _a.call(events, dom, key);\n          }\n        };\n\n        itemRenderCache.set(key, cloneVNode(node, {\n          key,\n          ref: el => {\n            if (!dom) {\n              dom = findElement(el);\n            }\n          },\n\n          onVnodeMounted() {\n            resizeHandler();\n          },\n\n          onVnodeUpdated() {\n            resizeHandler();\n          }\n\n        }));\n      }\n\n      return itemRenderCache.get(key);\n    });\n  };\n\n  watch([internalData, itemRender], () => {\n    itemRenderCache.clear();\n  });\n  return renderChildren;\n}\n\nexport { useRenderChildren };","map":{"version":3,"names":["toRefs","cloneVNode","watch","findElement","node","_a","res","$el","tagName","nextSibling","useRenderChildren","props","events","internalData","visibleData","itemRender","itemRenderCache","Map","renderChildren","value","map","item","index","key","has","dom","resizeHandler","onItemResize","call","set","ref","el","onVnodeMounted","onVnodeUpdated","get","clear"],"sources":["/www/wwwroot/admin/node_modules/@arco-design/web-vue/es/_components/virtual-list/hooks/use-render-children.js"],"sourcesContent":["import { toRefs, cloneVNode, watch } from \"vue\";\nconst findElement = (node) => {\n  var _a;\n  let res = (_a = node == null ? void 0 : node.$el) != null ? _a : node;\n  while (res && !res.tagName) {\n    res = res.nextSibling;\n  }\n  return res;\n};\nfunction useRenderChildren(props, events = {}) {\n  const {\n    internalData,\n    visibleData,\n    itemRender\n  } = toRefs(props);\n  const itemRenderCache = new Map();\n  const renderChildren = () => {\n    return visibleData.value.map(({\n      item,\n      index,\n      key\n    }) => {\n      if (!itemRenderCache.has(key)) {\n        const [node] = itemRender.value({\n          item,\n          index\n        });\n        let dom;\n        const resizeHandler = () => {\n          var _a;\n          if (dom) {\n            (_a = events.onItemResize) == null ? void 0 : _a.call(events, dom, key);\n          }\n        };\n        itemRenderCache.set(key, cloneVNode(node, {\n          key,\n          ref: (el) => {\n            if (!dom) {\n              dom = findElement(el);\n            }\n          },\n          onVnodeMounted() {\n            resizeHandler();\n          },\n          onVnodeUpdated() {\n            resizeHandler();\n          }\n        }));\n      }\n      return itemRenderCache.get(key);\n    });\n  };\n  watch([internalData, itemRender], () => {\n    itemRenderCache.clear();\n  });\n  return renderChildren;\n}\nexport { useRenderChildren };\n"],"mappings":"AAAA,SAASA,MAAT,EAAiBC,UAAjB,EAA6BC,KAA7B,QAA0C,KAA1C;;AACA,MAAMC,WAAW,GAAIC,IAAD,IAAU;EAC5B,IAAIC,EAAJ;;EACA,IAAIC,GAAG,GAAG,CAACD,EAAE,GAAGD,IAAI,IAAI,IAAR,GAAe,KAAK,CAApB,GAAwBA,IAAI,CAACG,GAAnC,KAA2C,IAA3C,GAAkDF,EAAlD,GAAuDD,IAAjE;;EACA,OAAOE,GAAG,IAAI,CAACA,GAAG,CAACE,OAAnB,EAA4B;IAC1BF,GAAG,GAAGA,GAAG,CAACG,WAAV;EACD;;EACD,OAAOH,GAAP;AACD,CAPD;;AAQA,SAASI,iBAAT,CAA2BC,KAA3B,EAAkCC,MAAM,GAAG,EAA3C,EAA+C;EAC7C,MAAM;IACJC,YADI;IAEJC,WAFI;IAGJC;EAHI,IAIFf,MAAM,CAACW,KAAD,CAJV;EAKA,MAAMK,eAAe,GAAG,IAAIC,GAAJ,EAAxB;;EACA,MAAMC,cAAc,GAAG,MAAM;IAC3B,OAAOJ,WAAW,CAACK,KAAZ,CAAkBC,GAAlB,CAAsB,CAAC;MAC5BC,IAD4B;MAE5BC,KAF4B;MAG5BC;IAH4B,CAAD,KAIvB;MACJ,IAAI,CAACP,eAAe,CAACQ,GAAhB,CAAoBD,GAApB,CAAL,EAA+B;QAC7B,MAAM,CAACnB,IAAD,IAASW,UAAU,CAACI,KAAX,CAAiB;UAC9BE,IAD8B;UAE9BC;QAF8B,CAAjB,CAAf;QAIA,IAAIG,GAAJ;;QACA,MAAMC,aAAa,GAAG,MAAM;UAC1B,IAAIrB,EAAJ;;UACA,IAAIoB,GAAJ,EAAS;YACP,CAACpB,EAAE,GAAGO,MAAM,CAACe,YAAb,KAA8B,IAA9B,GAAqC,KAAK,CAA1C,GAA8CtB,EAAE,CAACuB,IAAH,CAAQhB,MAAR,EAAgBa,GAAhB,EAAqBF,GAArB,CAA9C;UACD;QACF,CALD;;QAMAP,eAAe,CAACa,GAAhB,CAAoBN,GAApB,EAAyBtB,UAAU,CAACG,IAAD,EAAO;UACxCmB,GADwC;UAExCO,GAAG,EAAGC,EAAD,IAAQ;YACX,IAAI,CAACN,GAAL,EAAU;cACRA,GAAG,GAAGtB,WAAW,CAAC4B,EAAD,CAAjB;YACD;UACF,CANuC;;UAOxCC,cAAc,GAAG;YACfN,aAAa;UACd,CATuC;;UAUxCO,cAAc,GAAG;YACfP,aAAa;UACd;;QAZuC,CAAP,CAAnC;MAcD;;MACD,OAAOV,eAAe,CAACkB,GAAhB,CAAoBX,GAApB,CAAP;IACD,CAjCM,CAAP;EAkCD,CAnCD;;EAoCArB,KAAK,CAAC,CAACW,YAAD,EAAeE,UAAf,CAAD,EAA6B,MAAM;IACtCC,eAAe,CAACmB,KAAhB;EACD,CAFI,CAAL;EAGA,OAAOjB,cAAP;AACD;;AACD,SAASR,iBAAT"},"metadata":{},"sourceType":"module"}