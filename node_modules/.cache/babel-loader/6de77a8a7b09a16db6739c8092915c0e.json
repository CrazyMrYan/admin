{"ast":null,"code":"import { createApp, createVNode } from \"vue\";\nlet ellipsisContainer;\n\nfunction styleToString(style) {\n  const styleNames = Array.prototype.slice.apply(style);\n  return styleNames.map(name => `${name}: ${style.getPropertyValue(name)};`).join(\"\");\n}\n\nfunction pxToNumber(value) {\n  if (!value) return 0;\n  const match = value.match(/^\\d*(\\.\\d*)?/);\n  return match ? Number(match[0]) : 0;\n}\n\nvar measure = (originElement, ellipsisConfig, operations, fullText) => {\n  if (!ellipsisContainer) {\n    ellipsisContainer = document.createElement(\"div\");\n    document.body.appendChild(ellipsisContainer);\n  }\n\n  const {\n    rows,\n    suffix,\n    ellipsisStr\n  } = ellipsisConfig;\n  const originStyle = window.getComputedStyle(originElement);\n  const styleString = styleToString(originStyle);\n  const lineHeight = pxToNumber(originStyle.lineHeight);\n  const maxHeight = Math.round(lineHeight * rows + pxToNumber(originStyle.paddingTop) + pxToNumber(originStyle.paddingBottom));\n  ellipsisContainer.setAttribute(\"style\", styleString);\n  ellipsisContainer.setAttribute(\"aria-hidden\", \"true\");\n  ellipsisContainer.style.height = \"auto\";\n  ellipsisContainer.style.minHeight = \"auto\";\n  ellipsisContainer.style.maxHeight = \"auto\";\n  ellipsisContainer.style.position = \"fixed\";\n  ellipsisContainer.style.left = \"0\";\n  ellipsisContainer.style.top = \"-99999999px\";\n  ellipsisContainer.style.zIndex = \"-200\";\n  const vm = createApp({\n    render() {\n      return createVNode(\"span\", null, [operations]);\n    }\n\n  });\n  vm.mount(ellipsisContainer);\n  const operationsChildNodes = Array.prototype.slice.apply(ellipsisContainer.childNodes[0].cloneNode(true).childNodes);\n  vm.unmount();\n  ellipsisContainer.innerHTML = \"\";\n  const ellipsisTextNode = document.createTextNode(`${ellipsisStr}${suffix}`);\n  ellipsisContainer.appendChild(ellipsisTextNode);\n  operationsChildNodes.forEach(operationNode => {\n    ellipsisContainer.appendChild(operationNode);\n  });\n  const textNode = document.createTextNode(fullText);\n  ellipsisContainer.insertBefore(textNode, ellipsisTextNode);\n\n  function inRange() {\n    return ellipsisContainer.offsetHeight <= maxHeight;\n  }\n\n  if (inRange()) {\n    return {\n      ellipsis: false,\n      text: fullText\n    };\n  }\n\n  function measureText(textNode2, startLoc = 0, endLoc = fullText.length, lastSuccessLoc = 0) {\n    const midLoc = Math.floor((startLoc + endLoc) / 2);\n    const currentText = fullText.slice(0, midLoc);\n    textNode2.textContent = currentText;\n\n    if (startLoc >= endLoc - 1) {\n      for (let step = endLoc; step >= startLoc; step -= 1) {\n        const currentStepText = fullText.slice(0, step);\n        textNode2.textContent = currentStepText;\n\n        if (inRange() || !currentStepText) {\n          return;\n        }\n      }\n    }\n\n    if (inRange()) {\n      measureText(textNode2, midLoc, endLoc, midLoc);\n    } else {\n      measureText(textNode2, startLoc, midLoc, lastSuccessLoc);\n    }\n  }\n\n  measureText(textNode);\n  return {\n    text: textNode.textContent,\n    ellipsis: true\n  };\n};\n\nexport { measure as default };","map":{"version":3,"names":["createApp","createVNode","ellipsisContainer","styleToString","style","styleNames","Array","prototype","slice","apply","map","name","getPropertyValue","join","pxToNumber","value","match","Number","measure","originElement","ellipsisConfig","operations","fullText","document","createElement","body","appendChild","rows","suffix","ellipsisStr","originStyle","window","getComputedStyle","styleString","lineHeight","maxHeight","Math","round","paddingTop","paddingBottom","setAttribute","height","minHeight","position","left","top","zIndex","vm","render","mount","operationsChildNodes","childNodes","cloneNode","unmount","innerHTML","ellipsisTextNode","createTextNode","forEach","operationNode","textNode","insertBefore","inRange","offsetHeight","ellipsis","text","measureText","textNode2","startLoc","endLoc","length","lastSuccessLoc","midLoc","floor","currentText","textContent","step","currentStepText","default"],"sources":["/www/wwwroot/admin/node_modules/@arco-design/web-vue/es/typography/utils/measure.js"],"sourcesContent":["import { createApp, createVNode } from \"vue\";\nlet ellipsisContainer;\nfunction styleToString(style) {\n  const styleNames = Array.prototype.slice.apply(style);\n  return styleNames.map((name) => `${name}: ${style.getPropertyValue(name)};`).join(\"\");\n}\nfunction pxToNumber(value) {\n  if (!value)\n    return 0;\n  const match = value.match(/^\\d*(\\.\\d*)?/);\n  return match ? Number(match[0]) : 0;\n}\nvar measure = (originElement, ellipsisConfig, operations, fullText) => {\n  if (!ellipsisContainer) {\n    ellipsisContainer = document.createElement(\"div\");\n    document.body.appendChild(ellipsisContainer);\n  }\n  const {\n    rows,\n    suffix,\n    ellipsisStr\n  } = ellipsisConfig;\n  const originStyle = window.getComputedStyle(originElement);\n  const styleString = styleToString(originStyle);\n  const lineHeight = pxToNumber(originStyle.lineHeight);\n  const maxHeight = Math.round(lineHeight * rows + pxToNumber(originStyle.paddingTop) + pxToNumber(originStyle.paddingBottom));\n  ellipsisContainer.setAttribute(\"style\", styleString);\n  ellipsisContainer.setAttribute(\"aria-hidden\", \"true\");\n  ellipsisContainer.style.height = \"auto\";\n  ellipsisContainer.style.minHeight = \"auto\";\n  ellipsisContainer.style.maxHeight = \"auto\";\n  ellipsisContainer.style.position = \"fixed\";\n  ellipsisContainer.style.left = \"0\";\n  ellipsisContainer.style.top = \"-99999999px\";\n  ellipsisContainer.style.zIndex = \"-200\";\n  const vm = createApp({\n    render() {\n      return createVNode(\"span\", null, [operations]);\n    }\n  });\n  vm.mount(ellipsisContainer);\n  const operationsChildNodes = Array.prototype.slice.apply(ellipsisContainer.childNodes[0].cloneNode(true).childNodes);\n  vm.unmount();\n  ellipsisContainer.innerHTML = \"\";\n  const ellipsisTextNode = document.createTextNode(`${ellipsisStr}${suffix}`);\n  ellipsisContainer.appendChild(ellipsisTextNode);\n  operationsChildNodes.forEach((operationNode) => {\n    ellipsisContainer.appendChild(operationNode);\n  });\n  const textNode = document.createTextNode(fullText);\n  ellipsisContainer.insertBefore(textNode, ellipsisTextNode);\n  function inRange() {\n    return ellipsisContainer.offsetHeight <= maxHeight;\n  }\n  if (inRange()) {\n    return {\n      ellipsis: false,\n      text: fullText\n    };\n  }\n  function measureText(textNode2, startLoc = 0, endLoc = fullText.length, lastSuccessLoc = 0) {\n    const midLoc = Math.floor((startLoc + endLoc) / 2);\n    const currentText = fullText.slice(0, midLoc);\n    textNode2.textContent = currentText;\n    if (startLoc >= endLoc - 1) {\n      for (let step = endLoc; step >= startLoc; step -= 1) {\n        const currentStepText = fullText.slice(0, step);\n        textNode2.textContent = currentStepText;\n        if (inRange() || !currentStepText) {\n          return;\n        }\n      }\n    }\n    if (inRange()) {\n      measureText(textNode2, midLoc, endLoc, midLoc);\n    } else {\n      measureText(textNode2, startLoc, midLoc, lastSuccessLoc);\n    }\n  }\n  measureText(textNode);\n  return {\n    text: textNode.textContent,\n    ellipsis: true\n  };\n};\nexport { measure as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}