{"ast":null,"code":"import { toRefs, ref, watchEffect, computed } from \"vue\";\nimport { getCheckedStateByInitKeys } from \"../utils/check-utils.js\";\n\nfunction useCheckedState(props) {\n  const {\n    defaultCheckedKeys,\n    checkedKeys: propCheckedKeys,\n    key2TreeNode,\n    checkStrictly,\n    halfCheckedKeys,\n    onlyCheckLeaf\n  } = toRefs(props);\n  const isInitialized = ref(false);\n  const localCheckedKeys = ref([]);\n  const localIndeterminateKeys = ref([]);\n  const computedCheckedKeys = ref();\n  const computedIndeterminateKeys = ref();\n\n  const getStateByKeys = keys => {\n    return getCheckedStateByInitKeys({\n      initCheckedKeys: keys,\n      key2TreeNode: key2TreeNode.value,\n      checkStrictly: checkStrictly.value,\n      onlyCheckLeaf: onlyCheckLeaf.value\n    });\n  };\n\n  const init = keys => {\n    const initState = getStateByKeys(keys);\n    [localCheckedKeys.value, localIndeterminateKeys.value] = initState;\n  };\n\n  init(propCheckedKeys.value || (defaultCheckedKeys == null ? void 0 : defaultCheckedKeys.value) || []);\n  watchEffect(() => {\n    if (propCheckedKeys.value) {\n      [computedCheckedKeys.value, computedIndeterminateKeys.value] = getStateByKeys(propCheckedKeys.value);\n    } else if (isInitialized.value) {\n      computedCheckedKeys.value = void 0;\n      computedIndeterminateKeys.value = void 0;\n      localCheckedKeys.value = [];\n      localIndeterminateKeys.value = [];\n    }\n\n    if (!isInitialized.value) {\n      isInitialized.value = true;\n    }\n  });\n  return {\n    checkedKeys: computed(() => computedCheckedKeys.value || localCheckedKeys.value),\n    indeterminateKeys: computed(() => {\n      if (checkStrictly.value && halfCheckedKeys.value) {\n        return halfCheckedKeys.value;\n      }\n\n      return computedIndeterminateKeys.value || localIndeterminateKeys.value;\n    }),\n\n    setCheckedState(newCheckedKeys, newIndeterminateKeys, reinitialize = false) {\n      if (reinitialize) {\n        init(newCheckedKeys);\n      } else {\n        localCheckedKeys.value = newCheckedKeys;\n        localIndeterminateKeys.value = newIndeterminateKeys;\n      }\n\n      return [localCheckedKeys.value, localIndeterminateKeys.value];\n    }\n\n  };\n}\n\nexport { useCheckedState as default };","map":{"version":3,"names":["toRefs","ref","watchEffect","computed","getCheckedStateByInitKeys","useCheckedState","props","defaultCheckedKeys","checkedKeys","propCheckedKeys","key2TreeNode","checkStrictly","halfCheckedKeys","onlyCheckLeaf","isInitialized","localCheckedKeys","localIndeterminateKeys","computedCheckedKeys","computedIndeterminateKeys","getStateByKeys","keys","initCheckedKeys","value","init","initState","indeterminateKeys","setCheckedState","newCheckedKeys","newIndeterminateKeys","reinitialize","default"],"sources":["/www/wwwroot/admin/node_modules/@arco-design/web-vue/es/tree/hooks/use-checked-state.js"],"sourcesContent":["import { toRefs, ref, watchEffect, computed } from \"vue\";\nimport { getCheckedStateByInitKeys } from \"../utils/check-utils.js\";\nfunction useCheckedState(props) {\n  const {\n    defaultCheckedKeys,\n    checkedKeys: propCheckedKeys,\n    key2TreeNode,\n    checkStrictly,\n    halfCheckedKeys,\n    onlyCheckLeaf\n  } = toRefs(props);\n  const isInitialized = ref(false);\n  const localCheckedKeys = ref([]);\n  const localIndeterminateKeys = ref([]);\n  const computedCheckedKeys = ref();\n  const computedIndeterminateKeys = ref();\n  const getStateByKeys = (keys) => {\n    return getCheckedStateByInitKeys({\n      initCheckedKeys: keys,\n      key2TreeNode: key2TreeNode.value,\n      checkStrictly: checkStrictly.value,\n      onlyCheckLeaf: onlyCheckLeaf.value\n    });\n  };\n  const init = (keys) => {\n    const initState = getStateByKeys(keys);\n    [localCheckedKeys.value, localIndeterminateKeys.value] = initState;\n  };\n  init(propCheckedKeys.value || (defaultCheckedKeys == null ? void 0 : defaultCheckedKeys.value) || []);\n  watchEffect(() => {\n    if (propCheckedKeys.value) {\n      [computedCheckedKeys.value, computedIndeterminateKeys.value] = getStateByKeys(propCheckedKeys.value);\n    } else if (isInitialized.value) {\n      computedCheckedKeys.value = void 0;\n      computedIndeterminateKeys.value = void 0;\n      localCheckedKeys.value = [];\n      localIndeterminateKeys.value = [];\n    }\n    if (!isInitialized.value) {\n      isInitialized.value = true;\n    }\n  });\n  return {\n    checkedKeys: computed(() => computedCheckedKeys.value || localCheckedKeys.value),\n    indeterminateKeys: computed(() => {\n      if (checkStrictly.value && halfCheckedKeys.value) {\n        return halfCheckedKeys.value;\n      }\n      return computedIndeterminateKeys.value || localIndeterminateKeys.value;\n    }),\n    setCheckedState(newCheckedKeys, newIndeterminateKeys, reinitialize = false) {\n      if (reinitialize) {\n        init(newCheckedKeys);\n      } else {\n        localCheckedKeys.value = newCheckedKeys;\n        localIndeterminateKeys.value = newIndeterminateKeys;\n      }\n      return [localCheckedKeys.value, localIndeterminateKeys.value];\n    }\n  };\n}\nexport { useCheckedState as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}