{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport { ref, computed } from \"vue\";\n\nconst useFilter = ({\n  columns,\n  onFilterChange\n}) => {\n  const _filters = ref(getDefaultFilters(columns.value));\n\n  const computedFilters = computed(() => {\n    var _a, _b;\n\n    const filters = {};\n\n    for (const item of columns.value) {\n      if (item.dataIndex) {\n        const value = (_b = (_a = item.filterable) == null ? void 0 : _a.filteredValue) != null ? _b : _filters.value[item.dataIndex];\n\n        if (value) {\n          filters[item.dataIndex] = value;\n        }\n      }\n    }\n\n    return filters;\n  });\n\n  const resetFilters = dataIndex => {\n    var _a;\n\n    const _dataIndex = dataIndex ? [].concat(dataIndex) : [];\n\n    const filters = {};\n\n    for (const item of columns.value) {\n      if (item.dataIndex && item.filterable) {\n        if (_dataIndex.length === 0 || _dataIndex.includes(item.dataIndex)) {\n          const filteredValue = (_a = item.filterable.defaultFilteredValue) != null ? _a : [];\n          filters[item.dataIndex] = filteredValue;\n          onFilterChange(item.dataIndex, filteredValue);\n        }\n      }\n    }\n\n    _filters.value = filters;\n  };\n\n  const clearFilters = dataIndex => {\n    const _dataIndex = dataIndex ? [].concat(dataIndex) : [];\n\n    const filters = {};\n\n    for (const item of columns.value) {\n      if (item.dataIndex && item.filterable) {\n        if (_dataIndex.length === 0 || _dataIndex.includes(item.dataIndex)) {\n          const filteredValue = [];\n          filters[item.dataIndex] = filteredValue;\n          onFilterChange(item.dataIndex, filteredValue);\n        }\n      }\n    }\n\n    _filters.value = filters;\n  };\n\n  return {\n    _filters,\n    computedFilters,\n    resetFilters,\n    clearFilters\n  };\n};\n\nconst getDefaultFilters = columns => {\n  var _a;\n\n  const filters = {};\n\n  for (const item of columns) {\n    if (item.dataIndex && ((_a = item.filterable) == null ? void 0 : _a.defaultFilteredValue)) {\n      filters[item.dataIndex] = item.filterable.defaultFilteredValue;\n    }\n  }\n\n  return filters;\n};\n\nexport { useFilter };","map":{"version":3,"names":["ref","computed","useFilter","columns","onFilterChange","_filters","getDefaultFilters","value","computedFilters","_a","_b","filters","item","dataIndex","filterable","filteredValue","resetFilters","_dataIndex","concat","length","includes","defaultFilteredValue","clearFilters"],"sources":["/www/wwwroot/admin/node_modules/@arco-design/web-vue/es/table/hooks/use-filter.js"],"sourcesContent":["import { ref, computed } from \"vue\";\nconst useFilter = ({\n  columns,\n  onFilterChange\n}) => {\n  const _filters = ref(getDefaultFilters(columns.value));\n  const computedFilters = computed(() => {\n    var _a, _b;\n    const filters = {};\n    for (const item of columns.value) {\n      if (item.dataIndex) {\n        const value = (_b = (_a = item.filterable) == null ? void 0 : _a.filteredValue) != null ? _b : _filters.value[item.dataIndex];\n        if (value) {\n          filters[item.dataIndex] = value;\n        }\n      }\n    }\n    return filters;\n  });\n  const resetFilters = (dataIndex) => {\n    var _a;\n    const _dataIndex = dataIndex ? [].concat(dataIndex) : [];\n    const filters = {};\n    for (const item of columns.value) {\n      if (item.dataIndex && item.filterable) {\n        if (_dataIndex.length === 0 || _dataIndex.includes(item.dataIndex)) {\n          const filteredValue = (_a = item.filterable.defaultFilteredValue) != null ? _a : [];\n          filters[item.dataIndex] = filteredValue;\n          onFilterChange(item.dataIndex, filteredValue);\n        }\n      }\n    }\n    _filters.value = filters;\n  };\n  const clearFilters = (dataIndex) => {\n    const _dataIndex = dataIndex ? [].concat(dataIndex) : [];\n    const filters = {};\n    for (const item of columns.value) {\n      if (item.dataIndex && item.filterable) {\n        if (_dataIndex.length === 0 || _dataIndex.includes(item.dataIndex)) {\n          const filteredValue = [];\n          filters[item.dataIndex] = filteredValue;\n          onFilterChange(item.dataIndex, filteredValue);\n        }\n      }\n    }\n    _filters.value = filters;\n  };\n  return {\n    _filters,\n    computedFilters,\n    resetFilters,\n    clearFilters\n  };\n};\nconst getDefaultFilters = (columns) => {\n  var _a;\n  const filters = {};\n  for (const item of columns) {\n    if (item.dataIndex && ((_a = item.filterable) == null ? void 0 : _a.defaultFilteredValue)) {\n      filters[item.dataIndex] = item.filterable.defaultFilteredValue;\n    }\n  }\n  return filters;\n};\nexport { useFilter };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}