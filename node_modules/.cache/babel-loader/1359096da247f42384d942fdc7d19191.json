{"ast":null,"code":"import { computed, reactive } from \"vue\";\n\nconst useDrag = draggable => {\n  const dragType = computed(() => {\n    if (draggable.value) {\n      if (draggable.value.type === \"handle\") {\n        return \"handle\";\n      }\n\n      return \"row\";\n    }\n\n    return void 0;\n  });\n  const dragState = reactive({\n    dragging: false,\n    sourceKey: \"\",\n    sourcePath: [],\n    targetPath: [],\n    data: {}\n  });\n\n  const clearDragState = () => {\n    dragState.dragging = false;\n    dragState.sourceKey = \"\";\n    dragState.sourcePath = [];\n    dragState.targetPath = [];\n    dragState.data = {};\n  };\n\n  const handleDragStart = (ev, targetKey, targetPath, data) => {\n    if (ev.dataTransfer) {\n      ev.dataTransfer.effectAllowed = \"move\";\n\n      if (ev.target && ev.target.tagName === \"TD\") {\n        const {\n          parentElement\n        } = ev.target;\n\n        if (parentElement && parentElement.tagName === \"TR\") {\n          ev.dataTransfer.setDragImage(parentElement, 0, 0);\n        }\n      }\n    }\n\n    dragState.dragging = true;\n    dragState.sourceKey = targetKey;\n    dragState.sourcePath = targetPath;\n    dragState.data = data;\n  };\n\n  const handleDragEnter = (ev, sourcePath) => {\n    if (ev.dataTransfer) {\n      ev.dataTransfer.dropEffect = \"move\";\n    }\n\n    dragState.targetPath = sourcePath;\n    ev.preventDefault();\n  };\n\n  const handleDragLeave = ev => {};\n\n  const handleDragover = ev => {\n    if (ev.dataTransfer) {\n      ev.dataTransfer.dropEffect = \"move\";\n    }\n\n    ev.preventDefault();\n  };\n\n  const handleDragEnd = ev => {\n    var _a;\n\n    if (((_a = ev.dataTransfer) == null ? void 0 : _a.dropEffect) === \"none\") {\n      clearDragState();\n    }\n  };\n\n  const handleDrop = ev => {\n    clearDragState();\n    ev.preventDefault();\n  };\n\n  return {\n    dragType,\n    dragState,\n    handleDragStart,\n    handleDragEnter,\n    handleDragLeave,\n    handleDragover,\n    handleDragEnd,\n    handleDrop\n  };\n};\n\nexport { useDrag };","map":{"version":3,"names":["computed","reactive","useDrag","draggable","dragType","value","type","dragState","dragging","sourceKey","sourcePath","targetPath","data","clearDragState","handleDragStart","ev","targetKey","dataTransfer","effectAllowed","target","tagName","parentElement","setDragImage","handleDragEnter","dropEffect","preventDefault","handleDragLeave","handleDragover","handleDragEnd","_a","handleDrop"],"sources":["/www/wwwroot/admin/node_modules/@arco-design/web-vue/es/table/hooks/use-drag.js"],"sourcesContent":["import { computed, reactive } from \"vue\";\nconst useDrag = (draggable) => {\n  const dragType = computed(() => {\n    if (draggable.value) {\n      if (draggable.value.type === \"handle\") {\n        return \"handle\";\n      }\n      return \"row\";\n    }\n    return void 0;\n  });\n  const dragState = reactive({\n    dragging: false,\n    sourceKey: \"\",\n    sourcePath: [],\n    targetPath: [],\n    data: {}\n  });\n  const clearDragState = () => {\n    dragState.dragging = false;\n    dragState.sourceKey = \"\";\n    dragState.sourcePath = [];\n    dragState.targetPath = [];\n    dragState.data = {};\n  };\n  const handleDragStart = (ev, targetKey, targetPath, data) => {\n    if (ev.dataTransfer) {\n      ev.dataTransfer.effectAllowed = \"move\";\n      if (ev.target && ev.target.tagName === \"TD\") {\n        const { parentElement } = ev.target;\n        if (parentElement && parentElement.tagName === \"TR\") {\n          ev.dataTransfer.setDragImage(parentElement, 0, 0);\n        }\n      }\n    }\n    dragState.dragging = true;\n    dragState.sourceKey = targetKey;\n    dragState.sourcePath = targetPath;\n    dragState.data = data;\n  };\n  const handleDragEnter = (ev, sourcePath) => {\n    if (ev.dataTransfer) {\n      ev.dataTransfer.dropEffect = \"move\";\n    }\n    dragState.targetPath = sourcePath;\n    ev.preventDefault();\n  };\n  const handleDragLeave = (ev) => {\n  };\n  const handleDragover = (ev) => {\n    if (ev.dataTransfer) {\n      ev.dataTransfer.dropEffect = \"move\";\n    }\n    ev.preventDefault();\n  };\n  const handleDragEnd = (ev) => {\n    var _a;\n    if (((_a = ev.dataTransfer) == null ? void 0 : _a.dropEffect) === \"none\") {\n      clearDragState();\n    }\n  };\n  const handleDrop = (ev) => {\n    clearDragState();\n    ev.preventDefault();\n  };\n  return {\n    dragType,\n    dragState,\n    handleDragStart,\n    handleDragEnter,\n    handleDragLeave,\n    handleDragover,\n    handleDragEnd,\n    handleDrop\n  };\n};\nexport { useDrag };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}